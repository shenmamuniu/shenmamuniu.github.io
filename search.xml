<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>如何在Windows下以后台方式运行Spring Boot打包的jar包</title>
      <link href="/2023/11/24/ru-he-zai-windows-xia-yi-hou-tai-fang-shi-yun-xing-spring-boot-da-bao-de-jar-bao/"/>
      <url>/2023/11/24/ru-he-zai-windows-xia-yi-hou-tai-fang-shi-yun-xing-spring-boot-da-bao-de-jar-bao/</url>
      
        <content type="html"><![CDATA[<p>Spring Boot是一种流行的Java Web开发框架，它可以快速地创建独立的、生产级的Spring应用程序。Spring Boot应用程序可以打包成jar文件，方便地进行部署和运行。但是，如果我们直接使用<code>java -jar your-app.jar</code>命令来运行jar文件，那么程序会在前台运行，占用控制台窗口，而且一旦关闭窗口，程序就会终止。那么，如何在Windows下以后台方式运行Spring Boot打包的jar包呢？本文将介绍两种方法，分别是使用nssm服务和使用powershell脚本。</p><span id="more"></span><h2 id="方法一：使用nssm服务"><a href="#方法一：使用nssm服务" class="headerlink" title="方法一：使用nssm服务"></a>方法一：使用nssm服务</h2><p>nssm是一个开源的工具，您可以使用它来创建和管理Windows服务。Windows服务是一种在后台运行的程序，它可以在系统启动时自动运行，也可以手动启动或停止。使用nssm服务的优点是，您可以方便地管理多个jar文件，也可以设置服务的属性，如用户、日志、依赖等。使用nssm服务的步骤如下：</p><ol><li>下载nssm工具，解压缩后得到nssm.exe文件。</li><li>在命令行中运行<code>nssm install your-app</code>，这会弹出一个窗口，让您填写服务的相关信息。</li><li>在Application标签页中，填写以下信息：<ul><li>Path: 您的Java运行时环境的路径，如<code>C:\Program Files\Java\jdk1.8.0_181\bin\javaw.exe</code>。</li><li>Startup directory: 您的jar文件所在的目录，如<code>C:\path\to\your\app</code>。</li><li>Arguments: 您运行jar文件的参数，如<code>-jar your-app.jar</code>。</li><li>Service name: 您的服务的名称，如<code>your-app</code>。</li></ul></li><li>点击Install service按钮，这会创建一个名为your-app的服务，并在系统启动时自动运行。</li><li>您可以使用<code>nssm start your-app</code>命令启动服务，或者使用<code>nssm stop your-app</code>命令停止服务。</li><li>您可以使用<code>nssm status your-app</code>命令查看服务的状态，或者使用<code>nssm edit your-app</code>命令修改服务的信息。</li><li>您可以使用<code>nssm remove your-app</code>命令删除服务，或者使用<code>nssm gui</code>命令打开图形界面管理服务。</li></ol><h2 id="方法二：使用powershell脚本"><a href="#方法二：使用powershell脚本" class="headerlink" title="方法二：使用powershell脚本"></a>方法二：使用powershell脚本</h2><p>powershell是一种强大的脚本语言，您可以使用它来运行或关闭多个jar文件，并且可以指定关闭哪个jar文件。使用powershell脚本的优点是，您不需要安装任何额外的工具，也可以灵活地控制程序的运行。使用powershell脚本的步骤如下：</p><ol><li>创建一个名为start.ps1的文件，内容如下：</li></ol><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">Write-Host</span> <span class="token string">"Starting jar files..."</span><span class="token function">Start-Process</span> <span class="token operator">-</span>FilePath <span class="token string">"javaw"</span> <span class="token operator">-</span>ArgumentList <span class="token string">"-jar your-app-1.jar"</span> <span class="token operator">-</span>WindowStyle Hidden<span class="token function">Start-Process</span> <span class="token operator">-</span>FilePath <span class="token string">"javaw"</span> <span class="token operator">-</span>ArgumentList <span class="token string">"-jar your-app-2.jar"</span> <span class="token operator">-</span>WindowStyle Hidden<span class="token function">Start-Process</span> <span class="token operator">-</span>FilePath <span class="token string">"javaw"</span> <span class="token operator">-</span>ArgumentList <span class="token string">"-jar your-app-3.jar"</span> <span class="token operator">-</span>WindowStyle Hidden<span class="token function">Write-Host</span> <span class="token string">"Done."</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个文件会在后台运行三个jar文件，您可以根据您的需要添加或删除jar文件。</p><ol start="2"><li>创建一个名为stop.ps1的文件，内容如下：</li></ol><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">Write-Host</span> <span class="token string">"Stopping jar files..."</span><span class="token variable">$processes</span> = <span class="token function">Get-Process</span> <span class="token operator">-</span>Name <span class="token string">"javaw"</span><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$process</span> in <span class="token variable">$processes</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token variable">$commandLine</span> = <span class="token punctuation">(</span><span class="token function">Get-WmiObject</span> Win32_Process <span class="token operator">-</span><span class="token keyword">Filter</span> <span class="token string">"ProcessId = <span class="token function">$<span class="token punctuation">(</span><span class="token variable">$process</span><span class="token punctuation">.</span>Id<span class="token punctuation">)</span></span>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>CommandLine    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$commandLine</span> <span class="token operator">-like</span> <span class="token string">"*your-app-1.jar*"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">Write-Host</span> <span class="token string">"Stopping your-app-1.jar"</span>        <span class="token function">Stop-Process</span> <span class="token operator">-</span>Id <span class="token variable">$process</span><span class="token punctuation">.</span>Id <span class="token operator">-</span>Force    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$commandLine</span> <span class="token operator">-like</span> <span class="token string">"*your-app-2.jar*"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">Write-Host</span> <span class="token string">"Stopping your-app-2.jar"</span>        <span class="token function">Stop-Process</span> <span class="token operator">-</span>Id <span class="token variable">$process</span><span class="token punctuation">.</span>Id <span class="token operator">-</span>Force    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$commandLine</span> <span class="token operator">-like</span> <span class="token string">"*your-app-3.jar*"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">Write-Host</span> <span class="token string">"Stopping your-app-3.jar"</span>        <span class="token function">Stop-Process</span> <span class="token operator">-</span>Id <span class="token variable">$process</span><span class="token punctuation">.</span>Id <span class="token operator">-</span>Force    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">Write-Host</span> <span class="token string">"Done."</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个文件会关闭所有包含jar文件名的javaw进程，您可以根据您的需要添加或删除jar文件。</p><ol start="3"><li>双击start.ps1文件，或者在命令行中运行<code>powershell -ExecutionPolicy Bypass -File start.ps1</code>，这会在后台运行jar文件。</li><li>双击stop.ps1文件，或者在命令行中运行<code>powershell -ExecutionPolicy Bypass -File stop.ps1</code>，这会关闭jar文件。</li><li>您可以使用任务管理器查看程序的进程，或者使用<code>Get-Process -Name &quot;javaw&quot;</code>命令查看程序的信息。</li></ol><p>以下是一个示例的powershell脚本的运行结果：</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\path\to\your\app> powershell <span class="token operator">-</span>ExecutionPolicy Bypass <span class="token operator">-</span>File <span class="token function">start</span><span class="token punctuation">.</span>ps1Starting jar files<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Done<span class="token punctuation">.</span><span class="token function">PS</span> C:\path\to\your\app> <span class="token function">Get-Process</span> <span class="token operator">-</span>Name <span class="token string">"javaw"</span>Handles  NPM<span class="token punctuation">(</span>K<span class="token punctuation">)</span>    PM<span class="token punctuation">(</span>K<span class="token punctuation">)</span>      WS<span class="token punctuation">(</span>K<span class="token punctuation">)</span>     CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span>     Id  <span class="token function">SI</span> ProcessName<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>      <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>     <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>     <span class="token operator">--</span>  <span class="token operator">--</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>    328      23    50764      79876       0<span class="token punctuation">.</span>28   4788   1 javaw    328      23    50764      79876       0<span class="token punctuation">.</span>28   4788   1 javaw    328      23    50764      79876       0<span class="token punctuation">.</span>28   4788   1 javaw<span class="token function">PS</span> C:\path\to\your\app> powershell <span class="token operator">-</span>ExecutionPolicy Bypass <span class="token operator">-</span>File stop<span class="token punctuation">.</span>ps1Stopping jar files<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Stopping your-app-1<span class="token punctuation">.</span>jarStopping your-app-2<span class="token punctuation">.</span>jarStopping your-app-3<span class="token punctuation">.</span>jarDone<span class="token punctuation">.</span><span class="token function">PS</span> C:\path\to\your\app> <span class="token function">Get-Process</span> <span class="token operator">-</span>Name <span class="token string">"javaw"</span><span class="token function">Get-Process</span> : Cannot find a <span class="token keyword">process</span> with the name <span class="token string">"javaw"</span><span class="token punctuation">.</span> Verify the <span class="token keyword">process</span> name and call the cmdlet again<span class="token punctuation">.</span>At line:1 char:1<span class="token operator">+</span> <span class="token function">Get-Process</span> <span class="token operator">-</span>Name <span class="token string">"javaw"</span><span class="token operator">+</span> ~~~~~~~~~~~~~~~~~~~~~~~~~    <span class="token operator">+</span> CategoryInfo          : ObjectNotFound: <span class="token punctuation">(</span>javaw:String<span class="token punctuation">)</span> <span class="token namespace">[Get-Process]</span><span class="token punctuation">,</span> ProcessCommandException    <span class="token operator">+</span> FullyQualifiedErrorId : NoProcessFoundForGivenName<span class="token punctuation">,</span>Microsoft<span class="token punctuation">.</span>PowerShell<span class="token punctuation">.</span>Commands<span class="token punctuation">.</span>GetProcessCommand<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文介绍了如何在Windows下以后台方式运行Spring Boot打包的jar包的两种方法，分别是使用nssm服务和使用powershell脚本。这两种方法各有优缺点，您可以根据您的需求和喜好选择适合您的方法。如果您有任何疑问或建议，欢迎在评论区留言。谢谢您的阅读！</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些对程序员有用的网站</title>
      <link href="/2023/02/12/yi-xie-dui-cheng-xu-yuan-you-yong-de-wang-zhan/"/>
      <url>/2023/02/12/yi-xie-dui-cheng-xu-yuan-you-yong-de-wang-zhan/</url>
      
        <content type="html"><![CDATA[<p>本文来自<a href="https://github.com/tuteng/Best-websites-a-programmer-should-visit-zh">程序员应该访问的最佳网站</a></p><span id="more"></span><h1 id="程序员应该访问的最佳网站中文版原版"><a href="#程序员应该访问的最佳网站中文版原版" class="headerlink" title="程序员应该访问的最佳网站中文版原版"></a>程序员应该访问的最佳网站中文版<a href="https://github.com/sdmg15/Best-websites-a-programmer-should-visit">原版</a></h1><p>一些对程序员有用的网站</p><p>在学习CS的时候有一些你必须知道的有用的站点来获取通知为了你的技术储备和学习新知识。这里是一个你应该访问的不是非常全面的一些站点的列表，这个列表会不断更新，只要我能得到链接，你也可以通过添加你知道的来为此做出贡献</p><h3>Index</h3>   * [当你遇到问题时](#when-you-get-stuck)* [新闻篇](#news)* [杂志篇](#magazines)* [针对新手的代码训练](#coding-practice-for-beginners)* [加密货币](#cryptocurrency)* [针对那些想开始一个小的项目但是无从下手的人](#for-those-who-want-to-start-a-small-project-but-cant-find-the-ideas)* [通用编码建议](#general-coding-advice)* [编码风格](#coding-style)* [通用工具](#general-tools)* [面试准备](#interview-preparation)* [纪录片](#documentaries)* [学习新知识-mooc](#moocs-for-learning-something-new)* [与你首选的编程语言的站点(对我来说是java)](#sites-related-to-your-preferred-programming-language-for-me-java)* [AI学习](#learn-ai)* [研讨会、研究性写作、会谈等](#seminar--research-writing--talks-etc)* [Reddit知识汇总](#everything-in-one-place)* [Youtube频道](#youtube-channels)* [好文章](#good-articles)* [bash和shell脚本](bash-and-shell-scripting)* [播客](#podcasts)* [构建一个简单的编译器/解释器](#building-a-simple-compilerinterpreter)* [欣赏他人的代码](#watch-others-code)* [教程](#tutorials)* [一个程序员应该知道的东西](#what-should-a-programmer-know)* [编程比赛](#competitive-programming)* [计算机书籍](#computer-books)* [视频指南](#video-tutorials)* [在线编译和共享代码片段](#online-compiler-and-sharing-code-snippets)* [开发者博客](#blogs-of-developers)* [用来提高你的英语](#for-improving-your-english)* [当你厌倦了CS相关的东西](#when-you-get-bored-from-cs-related-stuff)* [开源网站](#open-source-websites)<h1 id="when-you-get-stuck">当你遇到问题时</h1>[Codementor](https://www.codementor.io): 国际版在行，更侧重于开发者之间的帮助，可以从某些方面的专家那里获取帮助[devRant](https://www.devrant.io): 供你吐槽和释放压力的地方[Learn Anything](https://learn-anything.xyz/): 帮助你找到学习任何知识时的最佳路径[Quora](https://www.quora.com/): 一个共享知识和更好的理解世界的地方[Stack Overflow](http://stackoverflow.com/): 订阅他们的每周新闻和任何你感兴趣的主题<h1 id="news">新闻篇</h1>[ACM TechNews](http://technews.acm.org) : 科技新闻[Stratechery](https://stratechery.com) : 类似于个人博客[AlternativeTo](https://alternativeto.net) : 众包软件推荐[Ars Technica](https://arstechnica.com) : 精品文章[Better Dev Links](https://betterdev.link) : 每周一次的链接推送帮助你成为更好的开发者[DevOpsLinks](http://devopslinks.com) : 一个对DevOps感兴趣的众多开发者和it专家的在线社区[GSMArena.com](http://www.gsmarena.com) : 与最新手机和android相关的新闻[Hacker News Digest](https://hndigest.com) : Hacker News文摘[Hacker News](https://news.ycombinator.com/): 针对程序员的新闻聚合，通过新闻稿获取头条新闻[Hacker Newsletter](http://www.hackernewsletter.com/) : 手工编辑，周周更新[Hacker Noon](https://hackernoon.com) : 一些技术科技类文章的网站[High Scalability](http://highscalability.com) : 不同公司在他们的apps上的成功的故事[Lobsters](https://lobste.rs/) : Lobsters是一个聚焦于技术的社区，主要是链接聚合和对话题进行讨论[product hunt ](https://www.producthunt.com/) : 寻找你最喜欢的东西[Recode](https://www.recode.net) : 聚焦硅谷商业的科技新闻[Reddit.com/r/programming](https://www.reddit.com/r/programming/) :科技新闻和文章的聚合[Slashdot](https://slashdot.org) : 新闻，社会新闻[Stack Share](https://stackshare.io) :各公司技术栈共享站点[TechCrunch](http://techcrunch.com/) : 一个科技新闻的站点[The DEV Community](https://dev.to) : 程序员分享想法和互相帮助的地方[Ars Technica](http://arstechnica.com/) : 发表的独特的精品文章[The Verge](https://www.theverge.com) : 更多面向产品的科技新闻[XDA](https://www.xda-developers.com) :Android开发者新闻<h1 id="magazines">杂志篇</h1>[Mit技术评论](https://www.technologyreview.com/magazine/) :麻省理工学院技术评论杂志[Nautilus](http://nautil.us) : 纽约人看技术[LWN](https://lwn.net) :开源技术，编程等的新闻周刊等（原linux每周新闻）<h1 id="coding-practice-for-beginners">针对初学者的代码练习</h1>[Cave of programming](https://caveofprogramming.com/) : 学习编程，提升技巧[Codeacademy](https://www.codecademy.com/) : 交互式编码学习，免费[CodeAbbey - 一个任何人都能精通编程的地方](http://codeabbey.com/) : 从菜鸟到专家进阶之地[Exercism.io](http://exercism.io/) : 用超过30种不同的语言解决实践问题，与其他人分享你的解决方案[freeCodeCamp](https://www.freecodecamp.com/) : 学习编码并且为非营利性组织构建项目。打造你的全栈开发技能[karan/Projects-Solutions](https://github.com/karan/Projects-Solutions) 用不同语言实现的项目[Lod - Cloud](http://lod-cloud.net/) : 开放数据云图[Programming by Doing](http://programmingbydoing.com/) : 编程进阶站点[Reddit.com/r/dailyprogrammer](http://www.reddit.com/r/dailyprogrammer) :  有趣的编程挑战，在这里你能学习其他人的编码，对于你解决不了的编码你能看看其他人是怎么解决的[People Can Program](https://www.peoplecanprogram.com) :互联网上最友好的编程学习应用[Programming Tasks](http://rosettacode.org/wiki/Category:Programming_Tasks) : 小程序汇总，不是微信的小程序[Vim adventures](https://vim-adventures.com) :边玩边学vim[Pramp](https://www.pramp.com) : 尝试面试官角色，结束后，可以点击左边的按钮交换角色[Paqmind](http://paqmind.com) :学习编程的指南和挑战[treehouse](https://teamtreehouse.com) :快速容易和经济实惠的方法来提升技巧<h1 id="cryptocurrency">加密货币</h1>[加密货币爱好者必知内容](http://www.ofnumbers.com/2017/09/21/eight-things-cryptocurrency-enthusiasts-probably-wont-tell-you/) :加密货币爱好者必须要知道的8项内容[区块链基础](https://www.sitepen.com/blog/2017/09/21/blockchain-basics/) :区块链介绍<h1 id="for-those-who-want-to-start-a-small-project-but-cant-find-the-ideas">针对那些想开始一个小的项目但是无从下手的人</h1>[freeCodeCamp | React project ideas](https://medium.freecodecamp.org/every-time-you-build-a-to-do-list-app-a-puppy-dies-505b54637a5d?gi=c786640fbd11) :学习react的27个有趣的想法[martyr2s-mega-project-ideas-list](http://www.dreamincode.net/forums/topic/78802-martyr2s-mega-project-ideas-list/) : 包含125个项目，从初级到中级[karan/Projects](https://github.com/karan/Projects) : 针对新手的小项目的汇总[Wrong "big projects" for beginners](http://rodiongork.tumblr.com/post/108155476418/wrong-big-projects-for-beginners) : 怎样选择，从哪里开始[vicky002/1000-Projects](https://github.com/vicky002/1000_Projects) : 一个能够用任何编程语言解决的巨型项目清单 <h1 id="general-coding-advice">通用编码建议</h1>[成为一名优秀开发者的10种方法](https://stephenhaunts.files.wordpress.com/2014/04/10-ways-to-be-a-better-developer.png)[代码审查最佳实践](http://kevinlondon.com/2015/05/05/code-review-best-practices.html): Kevin London的博客[Dieter Rams : 好的产品设计的10个原则](https://stephenhaunts.com/2013/12/11/dieter-rams-10-principles-of-good-product-design/)[设计模式](https://sourcemaking.com/design_patterns) : 用例子详细说明设计模式[如何成为一个程序员或谷歌搜索的艺术](https://okepi.wordpress.com/2014/08/21/how-to-become-a-programmer-or-the-art-of-googling-well/)[js项目指南](https://github.com/wearehive/project-guidelines):javascript项目最佳实践集合[Learn to Code With Me](https://learntocodewith.me) : 一个资源非常全的网站，旨在为科技界的开发人员提供资源[一个程序员一生应遵循的原则](http://thecodist.com/article/lessons_from_a_lifetime_of_being_a_programmer)[编程规范](https://webpro.github.io/programming-principles/) :程序设计原理与模式分类综述[软件设计模式](https://en.wikipedia.org/wiki/Software_design_pattern) : 设计模式的汇总[良好的编程原则](http://www.artima.com/weblogs/viewpost.jsp?thread=331531)[我希望在我一开始学习编码的时候就能得到的一些建议 — Free Code Camp](https://medium.freecodecamp.com/things-i-wish-someone-had-told-me-when-i-was-learning-how-to-code-565fc9dcb329#.y5wbd3pj6) : 从教别人处学到的东西[在计算机科学专业应该知道什么](http://matt.might.net/articles/what-cs-majors-should-know/) :良好的编程规范[软件开发者的工作](https://henrikwarne.com/2012/12/12/working-as-a-software-developer/) : Henrik Warne的博客<h1 id="coding-style">编码风格</h1>[Airbnb JS 风格指南](https://github.com/airbnb/javascript) : 写JavaScript最好的方式  [Airbnb Ruby 风格指南](https://github.com/airbnb/ruby) : Airbnb的ruby风格指南[Ruby 编码风格指南](https://github.com/bbatsov/ruby-style-guide) : 社区驱动的Ruby编码风格指南[Angular 1 风格指南](https://github.com/johnpapa/angular-styleguide/tree/master/a1) : 官方认可的风格指南，作者John Pappa[CS 106B 编码风格指南](http://stanford.edu/class/archive/cs/cs106b/cs106b.1158/styleguide.shtml) : 代码臃肿者必看  [调试问题](http://www.umich.edu/~eecs381/generalFAQ/Debugging.html) :检查如何调试程序[CS课程目录(许多在线讲座)](https://github.com/prakhar1989/awesome-courses) : 另一个在线CS课程[在线CS课程目录](https://github.com/open-source-society/computer-science) : 免费的在线CS课程[优秀的 C 编码习惯 • /r/C_Programming](https://www.reddit.com/r/C_Programming/comments/1vuubw/good_c_programming_habits/)  [google C++ 编码风格](https://google.github.io/styleguide/cppguide.html)  [怎样高效的报告Bug](http://www.chiark.greenend.org.uk/~sgtatham/bugs.html)  [建议初学者避免使用的坏的编码习惯?](https://www.reddit.com/r/learnprogramming/comments/1i4ds4/what_are_some_bad_coding_habits_you_would/)  [PEP8 - Python编码风格指南](https://www.python.org/dev/peps/pep-0008/)[标准 JS 风格指南](https://standardjs.com) : JavaScript风格指南[Google Python 风格指南](https://google.github.io/styleguide/pyguide.html)[Aurelia 风格指南](https://github.com/behzad888/Aurelia-styleguide)<h1 id="general-tools">通用工具</h1>* [CodePad](https://codepad.remoteinterview.io/DDCUYLAEYS) : 远程面试工具* [CodePen](https://codepen.io) : 基于浏览器共享前端代码的地方* [Devicons](http://vorillaz.github.io/devicons/#/main) : 免费图标汇总* [regex101](https://regex101.com) : 在线正则表达式测试和调试，国内也有不少* [regexr](https://regexr.com) : 另一个在线学习、测试正则表达式的工具* [Wit AI](https://wit.ai) :帮助开发者灵活的控制应用，适合没有移动端开发经验的用户<h2 id="#">bash和shell脚本</h2>* [Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/html/) :对shell脚本艺术的深入挖掘* [Bash Guide for Beginners](http://www.tldp.org/LDP/Bash-Beginners-Guide/html/) :对新手的bash使用指南* [Bash编程](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html)* [Bash参考手册](https://www.gnu.org/software/bash/manual/bashref.html) * [Bash指南](http://mywiki.wooledge.org/BashGuide)* [Conquering the Command Line](http://conqueringthecommandline.com/book/frontmatter) : 针对开发者的Unix和Linux命令<h2 id="interview-preparation">面试准备</h2>  * [/r/cscareerquestions](https://www.reddit.com/r/cscareerquestions/comments/20ahfq/heres_a_pretty_big_list_of_programming_interview/) : 这是一个非常大的面试问题列表是我在为4大面试时用到的，我认为对大家也是有用的  * [10个最频繁的SQL查询面试问题](http://java67.blogspot.in/2013/04/10-frequently-asked-sql-query-interview-questions-answers-database.html)  * [逻辑题答案汇总](http://puzzles.nigelcoldwell.co.uk/)  * [算法设计流程](http://www.hiredintech.com/algorithm-design/)  * [资质问题与答案](http://www.indiabix.com/) : Quant and aptitude preparation  * [一个技术面试题，逻辑题等的站点](http://www.techinterview.org/) : 各种让你思考的东西  * [BeehYve](https://www.beehyve.io) :各种学生需要的资源  * [面试准备时的链接的汇总 • /r/cscareerquestions ](https://www.reddit.com/r/cscareerquestions/comments/2lzc4h/big_collection_of_interview_preparation_links/)  * [算法复杂度笔记](http://bigocheatsheet.com/#)  * [大家的误解](http://ssp.impulsetrain.com/big-o.html)  * [位操作技巧](https://gist.github.com/dideler/2365607)  * [ChiperSoft/InterviewThis](https://github.com/ChiperSoft/InterviewThis) : 在面试期间问到对公司的了解的问题  * [Code Project](https://www.codeproject.com) : 面向开发人员  * [Java核心面试问题 - 每个主题的面试题 ](http://javahonk.com/core-java-interview-questions/)  * [一些有趣的C问题 ](http://www.gowrikumar.com/c/index.php)  * [CS9: CS技术面试中的问题解决](http://web.stanford.edu/class/cs9/)  * [优秀的逻辑题](http://gurmeet.net/puzzles/)  * [确定不同循环的时间复杂度?](http://stackoverflow.com/questions/11094330/determining-the-big-o-runtimes-of-these-different-loops) :在stackoverflow上的一些好问题包括计算时间复杂度.  * [5个基本的电话面试问题 - steveyegge2 ](https://sites.google.com/site/steveyegge2/five-essential-phone-screen-questions)  * [新人面试](http://placementsindia.blogspot.in/)  * [GeeksforGeeks | 针对geek的计算机科学入门](http://www.geeksforgeeks.org/) : 订阅他们获取新文章  * [准备学习SQL篇：用语言描述一下数据库规范化 - Essential SQL ](http://www.essentialsql.com/get-ready-to-learn-sql-database-normalization-explained-in-simple-english/)  * [https://github.com/odino/interviews](https://github.com/odino/interviews) : 面试重要问题列表  * [让你的简历改头换面](http://www.lifeclever.com/give-your-resume-a-face-lift/)  * [技术面试指南](http://www.kchodorow.com/blog/2013/02/28/guide-to-tech-interviews/)  * [如何为技术面试做准备• /r/cscareerquestions](https://www.reddit.com/r/cscareerquestions/comments/1jov24/heres_how_to_prepare_for_tech_interviews/)  * [怎样进行算法面试](http://www.palantir.com/2011/09/how-to-rock-an-algorithms-interview/)  * [怎样进行自我介绍 | The Art of Manliness ](http://www.artofmanliness.com/2016/01/05/tell-me-a-little-about-yourself/)  * [如何回答最棘手的40个面试问题| ICS Job Portal ](http://www.icsjobportal.com/blog/job-interview-questions/)  * [如何进入科技企业-求职和面试指南](http://haseebq.com/how-to-break-into-tech-job-hunting-and-interviews/)    * [怎样面试](http://kelukelu.me/interview/index.html)  * [怎样准备一个面试 - 1](http://se7so.blogspot.in/2014/01/how-to-prepare-for-interview-1.html)  * [IIT Delhi 实习经验](http://placement-iit2013.blogspot.com) :   * [samwincott/Internship-Guide](https://github.com/samwincott/Internship-Guide) : 与实习相关的链接汇总  * [华尔街面试](https://blogs.janestreet.com/interviewing-at-jane-street/)  * [面试架构 - Java Honk](http://javahonk.com/category/interview/)  * [工作面试：如何做好求职面试|展示个人魅力 ](http://www.artofmanliness.com/2012/08/06/how-to-ace-a-job-interview/)  * [求职面试新闻、视频、评论和八卦 - Lifehacker ](http://lifehacker.com/tag/job-interviews)  * [求职面试问题和最佳答案](https://www.thebalance.com/job-interview-questions-and-answers-2061204)  * [kimberli/interviews](https://github.com/kimberli/interviews) : 面试学习表格  * [Mission-peace/interview problems ](https://github.com/mission-peace/interview/wiki) : 一个大的编码面试的问题的汇总  * [软件工程师面试实践平台](https://www.pramp.com/ref/gt1) :与真正的同行进行编程交流  * [Problems | LeetCode OJ ](https://leetcode.com/problemset/algorithms/) : 针对面试的编码训练  * [程序员和软件面试问答](http://www.programmerinterview.com/)  * [Reddit.com/user/ashish2199/m/puzzles](https://www.reddit.com/user/ashish2199/m/puzzles) : Reddit逻辑题  * [SQL面试问题](https://www.jitbit.com/news/181-jitbits-sql-interview-questions/) : 好的SQL测试  * [使用韦恩图进行SQL连接](http://stevestedman.com/wp-content/uploads/VennDiagram1.pdf)  * [svozniuk/java-interviews](https://github.com/svozniuk/java-interviews) : Java面试题  * [25个最难的HR问题 ](http://www.datsi.fi.upm.es/~frosal/docs/25mdq.html)  * [面试10大算法](http://www.programcreek.com/2012/11/top-10-algorithms-for-coding-interview/)  * [Unix／Linux笔记](http://cheatsheetworld.com/programming/unix-linux-cheat-sheet/)  * [为求职者和雇主提供的建议](https://www.reddit.com/r/india/comments/1clgdj/unsolicited_advice_for_job_seekers_and_employers/)  * [通过动画可视化数据结构和算法](http://visualgo.net/)  * [We Help Coders Get Hired](http://www.hiredintech.com/app) : 提供系统设计，面试策略，软件技能等的web站点  * [你的问题是什么?](https://www.reddit.com/r/cscareerquestions/comments/209rkq/what_are_your_goto_questions_for_the_do_you_have/)  * [为何你会赚钱少 • /r/cscareerquestions](https://www.reddit.com/r/cscareerquestions/comments/1b8wa3/why_you_make_less_money/)  * [ wu :: riddles(hard) ](https://www.ocf.berkeley.edu/~wwu/riddles/hard.shtml) : 逻辑题  * [夏季实习：最终篇](eulercoder.me/blog/career/Summer-Internship-the-ultimate-guide)  * [求职面试问题和最好的答案](http://jobsearch.about.com/od/interviewquestionsanswers/a/interviewquest.htm)  * [Java面试问题与答案](http://adnjavainterview.blogspot.in)  * [编程语言概念 课堂笔记 ](http://www.cmi.ac.in/~madhavan/courses/pl2006/lecturenotes/lecture-notes/lecture-notes.html) :  面向对象概念和编程语言概念  * [系统设计面试](https://github.com/checkcheckzz/system-design-interview)  * [一个站点提供技术面试题，逻辑题或者你想的其他内容 ](http://www.techinterview.org/)  * [前端常见面试题汇总](https://www.geekjc.com/ebook/detail/5ba5bcae7143880b09cb4d54/1537588096871)<h1 id="documentaries">纪录片</h1>  * [什么都能问 Gayle Laakmann McDowell (程序员面试宝典的作者)](https://www.youtube.com/watch?v=1fqxMuPmGak)  * [Breaking the Code: Alan Turing传](https://www.youtube.com/watch?v=S23yie-779k)  * [攻破代码面试](https://www.youtube.com/watch?v=4NIb9l3imAo)  * [攻破代码面试-全栈开发演讲者系列](https://www.youtube.com/watch?v=Eg5-tdAwclo)  * [书呆子的胜利](https://www.youtube.com/playlist?list=PLn-Y3vvQbmHO5WUcBdIWqiUfNawhC1cn3) : Play-list  * [哈佛大学 CS50 - 渐进学习 (视频)](https://www.youtube.com/watch?v=iOq5kSKqeR4)  * [cpu如何执行程序(视频)](https://www.youtube.com/watch?v=42KTvGYQYnA)  * [机器代码指令(视频)](https://www.youtube.com/watch?v=Mv2XQgpbTNE)  * 机器改变世界 - 关于计算机历史的纪录片      [Part 1: 巨大的大脑 ](http://www.youtube.com/watch?v=rcR74y61xZk)      [Part 2: 发现未来](http://www.youtube.com/watch?v=1APZ5-cjWfw)      [Part 3: 台式计算机](http://www.youtube.com/watch?v=zwC3gOudlAc)      [Part 4: 机器的思考](http://www.youtube.com/watch?v=4gzpd0irP58)      [Part 5: 指尖上的世界](http://www.youtube.com/watch?v=J_3A2jSnvHE)  * [机械计算机(All Parts) ](https://www.youtube.com/watch?v=s1i-dnAH9Y4) : 20世纪50年代的一个视频，说明了在没有现代电子的情况下机械计算机是如何工作的  * [Project Code Rush - netscape/mozilla起源的纪录片](https://www.youtube.com/watch?v=a-49a_CjH0M)  * [自学计算机科学](https://teachyourselfcs.com/)  * [Linux的故事](https://www.youtube.com/watch?v=XMm0HsmOTFI)  * [Download: 互联网的真实故事](https://www.youtube.com/playlist?list=PL_IlIlrxhtPMqW4b0-v8OgLvFZQes6SoZ) : 发现频道关于浏览器战争和互联网泡沫的记录  * [Linux操作系统的故事 ](https://www.youtube.com/watch?v=fxjElWL8igo)<h1 id="moocs-for-learning-something-new">学习新知识-mooc</h1>  * [课程中心](https://www.class-central.com) : 超过10万名学生评价的目录  * [计算机科学资源 ](https://docs.google.com/spreadsheets/d/1BD8BJJUNaX63m2QmySWMGDp71nx4W4MyyiIBlfMoN3Q/htmlview?sle=true#) : 针对自学者的mooc列表  * [Coursera.org](https://www.coursera.org) :在网上学习全世界最好的课程  * [CS50](https://www.youtube.com/user/cs50tv/videos)  * [edX](https://www.edx.org) : 免费在线课程，帮助你进步，改善你的生活  * [Kadenze | Creative Programming](https://www.kadenze.com/courses?subjects%5B%5D=7): 注重艺术和创造力的编程课  * [麻省理工学院电气工程和计算机科学](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/)    * [MOOC.fi](http://mooc.fi/english.html) : 赫尔辛基大学在线课程  * [NPTEL Vidoes COMP_SCI_ENGG ](https://onlinecourses.nptel.ac.in/explorer/search?category=COMP_SCI_ENGG)    * [prakhar1989/awesome-CS-courses](https://github.com/prakhar1989/awesome-courses/blob/master/README.md) : CS课程大汇总  * [Udacity](http://udacity.com/)  * [UCBerkeley](https://www.youtube.com/user/UCBerkeley/videos)  * [网上CS课程的收集](https://github.com/prakhar1989/awesome-courses/blob/master/README.md)  * [极客教程](https://www.geekjc.com)<h1 id="sites-related-to-your-preferred-programming-language-for-me-java">与你偏爱的编程语言相关的网站(对我来说是Java)</h1>  * [学习java的最好的书](https://javahungry.blogspot.com/2014/02/best-books-for-learning-java-must-read.html) : Java基础  * [Bjarne Stroustrup's C++风格和技术问答](http://www.stroustrup.com/bs_faq2.html) : C++问答  * [Bjarne Stroustrup's FAQ](http://www.stroustrup.com/bs_faq.html) : The C++ FAQ  * [C++11 -新的ISO C++ 标准](http://www.stroustrup.com/C++11FAQ.html) : C++11问答  * [编译器(视频)](https://www.youtube.com/playlist?list=PLO9y7hOkmmSGTy5z6HZ-W4k2y8WXF7Bff)  * [深入Java：垃圾回收!](https://www.infoq.com/presentations/garbage-collection-benefits)  * [免费在线的章节用来学习java虚拟机](http://www.artima.com/insidejvm/ed2/index.html)  * [垃圾搜集如何工作](http://www.dynatrace.com/en/javabook/how-garbage-collection-works.html)    * [算法、数据结构、面试问题和答案的实现 ](https://github.com/sherxon/AlgoDS)  * [IntelliJ键盘快捷键](https://www.jetbrains.com/help/idea/keyboard-shortcuts-you-cannot-miss.html) :使用IntelliJ的键盘快捷键用来提高生产力  * [Java Corner at Artima.com ](http://www.artima.com/java/index.html)  * [Java课程笔记 ](http://www.cafeaulait.org/course/)  * [Java堆](http://www.javaoffheap.com)   * [Java-source](http://www.java-source.net) : Java开源软件  * [Java Visualizer ](http://www.cs.princeton.edu/~cos126/java_visualize/) : 帮助将引用，值，变量可视化  * [JournalDev - Java, Java EE, Android, Web Development Tutorials](http://www.journaldev.com/)  * [Learning Java](http://chimera.labs.oreilly.com/books/1234000001805/index.html):一个免费的在线学习Java语言的教材  * [Netbeans的键盘快捷键](https://netbeans.org/project_downloads/usersguide/shortcuts-80.pdf) : 键盘快捷键能够使你在工作时提高生产力  * [搜索开源的Java API ](http://www.docjar.com/) : 浏览Java库的源代码，并且学习如何实现  * [C++编程语言](http://www.stroustrup.com/C++.html) : C++编程语言  * [Java内存模型](http://www.cs.umd.edu/~pugh/java/memoryModel/)  * [The Java™ Tutorials  ](https://docs.oracle.com/javase/tutorial/) : 最好的Java手册  * [理解JVM](http://www.cubrid.org/blog/dev-platform/understanding-jvm-internals/)  * [垃圾回收是什么](https://plumbr.eu/handbook/what-is-garbage-collection) : 动态垃圾搜集  * [Welcome to JavaWorld.com ](http://www.javaworld.com/)  * [XyzWs Java FAQs ](http://www.xyzws.com/javafaq/page/1) : Java面试题汇总<h1 id="learn-ai">AI学习</h1> * [fast.ai](http://course.fast.ai) : 针对没有研究生水准的数学的开发者的免费实用的深度学习课程 * [grakn.ai](https://grakn.ai) : 数据库AI * [Robots that learn](https://blog.openai.com/robots-that-learn/) : 机器人学习 * [无监督神经元](https://blog.openai.com/unsupervised-sentiment-neuron/) * [AI、机器学习、深度学习的不同](https://blogs.nvidia.com/blog/2016/07/29/whats-difference-artificial-intelligence-machine-learning-deep-learning-ai/) * [TensorFlow](https://www.tensorflow.org) : 一个针对机器智能的软件开源库 * [Scikit-learn](http://scikit-learn.org) : 一个针对机器学习的Python模块 * [DeepLearning.ai](https://www.deeplearning.ai) : 深度学习课程，作者coursera的创建者，吴恩达 * [深度学习的历史](http://blog.floydhub.com/coding-the-history-of-deep-learning/)  * [Serpent AI](https://github.com/SerpentAI/SerpentAI) : 游戏代理框架<h1 id="seminar--research-writing--talks-etc">研讨会、研究性写作、会谈等</h1>  * [关于研究和写作的建议](http://www.cs.cmu.edu/~mleone/how-to.html)  * [博士论文](http://www.cse.iitd.ac.in/~srsarangi/articles.html)  * [在会议上讨论的实用技巧](https://stephenhaunts.com/2015/10/02/practical-tips-for-talking-at-usergroups-and-conferences-part-1/)  * [研讨会和报告](https://www.cse.iitb.ac.in/~ranade/communicationskills.html)  * [Latex参考](http://latex.knobs-dials.com)  * [Begin Latex in minutes](https://github.com/LewisVo/Begin-Latex-in-minutes) : 针对初学者的Latex的简单介绍帮助你轻松掌握Latex  * [Lshort](https://tobi.oetiker.ch/lshort/lshort.pdf) : 对Latex2的详细介绍<h1 id="everything-in-one-place">知识汇总</h1>  * [reddit.com/user/ashish2199/m/cs_student_subs](https://www.reddit.com/user/ashish2199/m/cs_student_subs) : 在reddits中计算机科学和编程相关的主题  * [一个程序员应该访问的web站点](https://www.quora.com/What-are-the-best-websites-a-programmer-should-visit/answer/Ashish-Padalkar?srid=OH96) :发表在Quora上，作者ashish2199  * [Moocha](https://www.moocha.io) : 从edx、coursera、udacity等搜索在线课程  * [Rico's cheatsheets](https://devhints.io) : 常用知识备忘集合  * [API Documentation](http://devdocs.io/) : 一个众所周知的带有搜索接口的API文档，类似于dash<h1 id="youtube-channels">youtube频道</h1>  * [C++Now (BoostCon)](https://www.youtube.com/channel/UC5e__RG9K3cHrPotPABnrwg) :当前的C++会议  * [code::dive conference](https://www.youtube.com/channel/UCU0Rt8VHO5-YNQXwIjkf-1g) : 有诺基亚技术中心组织的会议  * [Coding Blocks](https://www.youtube.com/CodingBlocks) : 指南，技巧  * [Computerphile ](https://www.youtube.com/user/Computerphile/videos) : 每个CS学生都应该看  * [ComputerHistory ](https://www.youtube.com/user/ComputerHistory/videos) : 针对那些想知道如何达成目标的人  * [CppCon ](https://www.youtube.com/user/CppCon/videos?shelf_id=0&view=0&sort=dd) : C++会议  * [Facebook Developers ](https://www.youtube.com/user/FacebookDevelopers/videos)  * [Fun Fun Function](https://www.youtube.com/c/mpjmevideos) : 每周一次的对编程主题的分类，也包括一些与编码不直接相关的内容  * [Google Developers ](https://www.youtube.com/user/GoogleDevelopers/videos)  * [GoogleTechTalks ](https://www.youtube.com/user/GoogleTechTalks/videos) : 关于热门话题的视频和在技术界的一些趣事  * [Gynvael Coldwin](https://www.youtube.com/user/GynvaelEN) :逆向工程和黑客（CTF）博客，每周三都有新的直播  * [HowToBecomeTV ](https://www.youtube.com/user/HowToBecomeTV/videos) : 与技术界相关的开发人员的好的面试  * [Java ](https://www.youtube.com/user/java/videos) : 有关Java的会谈  * [JavaOne ](https://www.youtube.com/channel/UCdDhYMT2USoLdh4SZIsu_1g/videos) : Java会议  * [Meeting C++ YT Kanalseite ](https://www.youtube.com/user/MeetingCPP/videos) : C++会议  * [Netflix UI Engineering](https://www.youtube.com/channel/UCGGRRqAjPm6sL3-WGBDnKJA/videos) : web开发者，移动开发者和对Netflix技术栈感兴趣的视频  * [O'Reilly ](https://www.youtube.com/user/OreillyMedia/videos) : 世界最佳技术作家访谈录  * [Placement Grid ](https://www.youtube.com/user/PlacementGrid/videos) : 面试及校园实习经验  * [Scott Meyers: Past Talks ](http://www.aristeia.com/presentations.html)  * [Siraj Raval](https://www.youtube.com/channel/UCWN3xxRkmTPmbKwht9FuE5A) : AI和深度学习指南视频  * [ThinMatrix ](https://www.youtube.com/user/ThinMatrix/videos) : 开发者在java中使用OpenGL制作的一个3D游戏的博客和指南  * [thoughtbot  ](https://www.youtube.com/user/ThoughtbotVideo/videos) : 谈论各种话题  * [yegor256 ](https://www.youtube.com/user/technoparkcorp/videos)<h1 id="good-articles">好文章</h1>  * [白话40个关键的计算机科学概念](http://carlcheo.com/compsci)    * [关于图论的一个介绍](https://dev.to/vaidehijoshi/a-gentle-introduction-to-graph-theory)  * [一个对程序员友好的语言](http://moonscript.org/)  * [软件开发者的阅读列表](https://stevewedig.com/2014/02/03/software-developers-reading-list/) : 这是一些好书和链接   * [关于TCP/IP协议栈的代码](http://www.saminiir.com/lets-code-tcp-ip-stack-5-tcp-retransmission/): 编写一个TCP/IP的协议栈，5:TCP重传  * [代码的转换](https://codewords.recurse.com/issues/four/the-language-of-choice):语言的选择  * [数据结构与算法](https://techiedelight.quora.com/500-Data-Structures-and-Algorithms-practice-problems-and-their-solutions):一些算法和数据结构的解决方案  * [深入字节码](https://www.wikiwand.com/en/Java_bytecode)  * [初级开发者的想法](http://blog.thefirehoseproject.com/posts/expectations-of-a-junior-developer/)  * [Linux内核](https://0xax.gitbooks.io/linux-insides/content/Booting/linux-bootstrap-1.html)  * [算法清单](https://www.wikiwand.com/en/List_of_algorithms)  * [提升编码技巧的关键](http://blog.thefirehoseproject.com/posts/learn-to-code-and-be-self-reliant/)  * [Unicode编码](https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/)  * [我们正在通过创新重塑零售业](http://multithreaded.stitchfix.com/)  * [每个程序员都需要知道的关于在文本中设置编码和字符的内容](http://kunststube.net/encoding/)  * [每个程序员都应该了解的关于内存的内容-pdf](http://futuretech.blinkenlights.nl/misc/cpumemory.pdf)  * [为什么网页的快速加载是很重要的](https://fly.io/articles/why-fast-pages-are-important/):为什么一个APP的速度决定了其收入  * [qotoqot-提升技巧](https://qotoqot.com/blog/improving-focus/):我是如何一个月工作200个小时的  * [Pixel Beat - Unix](http://www.pixelbeat.org/docs/unix-parallel-tools.html):使用unix工具并行处理  * [学习Vim](https://hackernoon.com/learning-vim-what-i-wish-i-knew-b5dca186bef7):我希望我应该知道什么<h1 id="podcasts">播客</h1>  * [Coding Blocks](http://www.codingblocks.net/):一个播客，涵盖最佳编程实践，设计模式，性能编码，面向对象编码，数据库设计和实现、提示、技巧和许多其他主题的内容  * [水深火热的开发者](http://developeronfire.com/episodes):一个播客，分享开发人员的人性，并讲述了由Dave Rael主持的一些令人惊叹的软件人物的故事  * [开发者茶话会](https://spec.fm/podcasts/developer-tea) : 开发者在喝茶小憩时浏览的播客  * [前端的欢乐时光](http://frontendhappyhour.com/):来自Netflix，Evernote，Atlassian＆LinkedIn的软件工程师小组，讨论关于前端开发的所有事情的一个博客。  * [无线电的所有流程](http://www.fullstackradio.com/):包括从产品设计和用户体验到单元测试和系统管理。  * [Groovy播客](http://groovypodcast.podbean.com/):专用于Groovy编程语言及其生态系统的播客。  * [IPhreaks](https://devchat.tv/iphreaks):每周讨论一次关于iOS开发和开发中的最新技术，具体讨论苹果，工具，做法  和代码  * [JavaScript 论坛](https://devchat.tv/js-jabber):每周一次关于JavaScript，前端开发，社区，职业和框架的讨论。  * [用我的播客学习代码](https://learntocodewith.me/podcast/):以一个季为一集的科技播客，是由劳伦斯·布拉德福德（Laurence Bradford）主持，从科技职业到科技业务的课程  * [MS示例展示](http://msdevshow.com/):Jason Young和Carl Schweitzer谈到有关Azure云，Windows，Windows Phone，Visual Studio以及使用Microsoft平台的跨平台开发等最新的开发者新闻  * [React Native Radio](https://devchat.tv/react-native-radio):每周讨论使用JavaScript和React构建移动应用程序的工具，技术和技术  * [软件工程日报](https://softwareengineeringdaily.com/):关于软件主题的日常技术面试  * [软件工程无线电](http://www.se-radio.net/):针对专业软件开发人员的播客，目标是成为一个持久的教育资源而不是新闻  * [语法](https://syntax.fm/) :对Wes Bos＆Scott Tolinski和Web开发人员来说是一个比较有趣的博客  * [The Bike Shed](http://bikeshed.fm/) :参与者讨论他们的开发经验和Ruby，Rails，JavaScript等的挑战  * [The Change log](https://changelog.com/podcast) : 每周一次的谈话，参与者都是开源技术的核心人员和创建者  * [愤世嫉俗的开发者](https://cynicaldeveloper.com/) :一个播客，旨在通过解释最新和最伟大的开发技术，为您提供开发知识和职业生涯，并提供您作为开发人员取得成功的需要。覆盖桌面，网络和移动开发，主要围绕.Net堆栈，也经常研究其他软件和框架<h1 id="building-a-simple-compilerinterpreter">构建一个简单的编译器/解释器</h1>  * [snowman：可能是有史以来最小的编译器](https://github.com/thejameskyle/the-super-tiny-compiler) : 这是一个超简化的例子，它描述了一个使用JavaScript编写的易于阅读的 现代编译器的所有主要部分  * [精彩的编译器](http://aalhour.com/awesome-compilers/) : 编译器，翻译和运行的精彩资源列表  * [提升一个编译器](http://www.cs.dartmouth.edu/~mckeeman/cs48/mxcom/gem/html/GrowingCompiler.html) : 了解如何提升一个编译器    * [一起开发一个简单的解释器-第一章](https://ruslanspivak.com/lsbasi-part1/) : 尝试通过构建一个编译器，揭开它的神秘面纱  * [业余编译器开发者的资源](http://c9x.me/compile/bib/) : 业余编译器开发者的资源  * [计算机程序的构造与解释](https://sarabander.github.io/sicp/html/index.xhtml) : 计算机程序的结构和解释  * [我开发的第一个编译器](https://dev.to/fcpauldiaz/writing-my-first-compiler) : 写出你的第一个编译器  * [编译器简介](https://nicoleorchard.com/blog/compilers) : 如何与计算机说话，例如Siri先生  * [编写自己的编译器](http://staff.polito.it/silvano.rivoira/HowToWriteYourOwnCompiler.htm) : 如何编写自己的编译器<h1 id="tutorials">教程</h1>  * [A Hacker's Guide to Git](https://wildlyinaccurate.com/a-hackers-guide-to-git/) : 为那些想学习git的人打下坚实的基础  * [Best Of - Gustavo Duarte](http://duartes.org/gustavo/blog/best-of/) : 包含各种主题的文章  * [CMSI 281: Data Structures](http://cs.lmu.edu/~ray/classes/dsa/) : 针对数据结构的轻量级的说明  * [Collecting all the cheat sheets](http://overapi.com) : 大量编程语言的接口表  * [C Programming](http://users.cs.cf.ac.uk/Dave.Marshall/C/CE.html)  * [C编程语言常见问题](http://c-faq.com/index.html)  * [Data Structures and Algorithms by John Morris](http://oopweb.com/Algorithms/Documents/PLDS210/VolumeFrames.html) : 代码和其分析的另一个好的来源  * [深入学习C语言](https://www.slideshare.net/olvemaudal/deep-c) : 关于C语言的一个很好的演示  * [设计模式：可重用面向对象的软件的基础](https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612) : aka the "Gang Of Four" book, or GOF  * [Dynamic programming - PrismoSkills](http://prismoskills.appspot.com/lessons/Dynamic_Programming/Chapter_01_-_Introduction.jsp) : 学习如何解决动态规划问题  * [Git从入门到精通](https://maryrosecook.com/blog/post/git-from-the-inside-out)  * [Head First Design Patterns](https://www.amazon.com/Head-First-Design-Patterns-Brain-Friendly/dp/0596007124)  * [How to Program in C++](http://cs.fit.edu/~mmahoney/cse2050/how2cpp.html) : 怎样学习C++编程，关于学习C++和STL的好资源  * [http://www.mysqltutorial.org/](http://www.mysqltutorial.org)  * [indradhanush tutotials](https://indradhanush.github.io/blog/writing-a-unix-shell-part-3/) : 写一个Unix核   * [Introduction to C Programming](http://www.le.ac.uk/users/rjm1/cotter/index.htm)  * [10分钟搞定UNIX](http://freeengineer.org/learnUNIXin10minutes.html)  * [Learning the shell.](http://linuxcommand.org)  * [Linux Journey](https://linuxjourney.com) : 学习Linux的好站点  * [Linux Tutorial](https://ryanstutorials.net/linuxtutorial/) : 学习Linux的好资源  * [More about Github-flavored markdown](https://guides.github.com/features/mastering-markdown/)  * [MySQL Essentials](http://www.techotopia.com/index.php/MySQL_Essentials)  * [Open Data Structures](http://opendatastructures.org) : 用来学习数据结构和算法的优秀的资源提供了C++ , Java等各种语言的伪代码  * [OS Course Notes](https://www2.cs.uic.edu/~jbell/CourseNotes/OperatingSystems/) : Galvin's书的章节笔记  * [从新手到专家-编程、web开发、DevOps新闻，教程和工具](https://dzone.com)  * [SQL (Structured Query Language) in one page : SQL.SU](http://www.cheat-sheets.org/sites/sql.su/) : 结构化查询语言，一个非常好的SQL记录表  * [Subtle | Poor Man's CI](https://www.subtle.press/course/poor-mans-ci) : 了解连续集成平台如何工作，通过使用Node.js构建您自己的git之一  * [TCP/IP图解](https://en.wikipedia.org/wiki/TCP/IP_Illustrated)  * [The Bash Guide](http://guide.bash.academy) : 学习Bash Shell的优秀教程  * [The Descent to C](https://www.chiark.greenend.org.uk/~sgtatham/cdescent/) : 针对那些从高级编程语言像java或者python迁移到C的人  * [The Linux 命令行: yige完整介绍](https://www.amazon.com/Linux-Command-Line-Complete-Introduction/dp/1593273894)  * [The Unix环境编程](http://product.half.ebay.com/The-UNIX-Programming-Environment-by-Brian-W-Kernighan-and-Rob-Pike-1983-Other/54385&tg=info)  * [TopCoder Tutorials](https://www.topcoder.com/community/data-science/data-science-tutorials/)  * [Tutorialspoint](https://www.tutorialspoint.com) : UPSC，IAS，PCS，公务员，银行，能力，问题，答案，解释，面试，入学考试，解决方案的文本和视频教程  * [UNIX和Linux系统管理员手册 第四版](https://www.amazon.com/UNIX-Linux-System-Administration-Handbook/dp/0131480057)  * [VimTutor+](https://vimtutorplus.herokuapp.com/exercise/1) : 从浏览器上学习VIM  * [W3Schools在线Web教程](https://www.w3schools.com)   * [Unix Shell](https://www.dartmouth.edu/~rc/classes/ksh/print_pages.shtml) : ksh / bash的Unix shell脚本  * [Snap SVG](http://snapsvg.io) : 现代Web的JavaScript SVG库  * [vim.rtorr](https://vim.rtorr.com) : Vim Cheat Sheet  * [Open Vim](http://www.openvim.com/tutorial.html) :  交互式Vim教程  * [Algorithm Using Dynamic Programming and A](http://thume.ca/2017/06/17/tree-diffing/) : 使用动态编程和A*设计树差分算法  * [Learn Python](https://www.learnpython.org) : 免费的交互式Python教程  * [C++17](https://www.viva64.com/en/b/0533/) : C ++指南17<h1 id="watch-others-code">欣赏他人的代码</h1>  * [LiveEdu.tv](https://www.liveedu.tv) :  构建应用，网站游戏等人的视频  * [Twitch.tv](https://www.twitch.tv/communities/programming) : Twitch的编程社区<h1 id="what-should-a-programmer-know">一个程序员应该知道的东西</h1>  * [GitHub.com Build software better, together](https://github.com) : 向其他人展示你的项目和与人协作的地方（为了更高效的使用它必须知道Git）  * [Gitlab提供无限制的私有库，和无限制的组织](https://about.gitlab.com)  * [程序员能力矩阵](http://sijinjoseph.com/programmer-competency-matrix/) :  一篇用来了解我们作为程序员的水平的文章<h1 id="competitive-programming">编程比赛</h1>  * [Archived Problems - Project Euler](https://projecteuler.net/archives) : 问题归档  * [Art of Problem Solving](https://artofproblemsolving.com) : 数学课对你来说太容易了吗？你来到正确的地方！  * [CodeChef](https://www.codechef.com) : 唯一的编程比赛Web 2.0平台  * [Codefights](https://codefights.com) : 测试你的编码技巧  * [Codeforces](http://codeforces.com) : 编程竞赛，在线计算机编程  * [Codewars](https://www.codewars.com) : 根据完成代码排名  * [Codility](https://codility.com) : 验证和提高编码技能  * [Codingame](https://www.codingame.com/start) : 通过游戏和挑战学习编码！  * [Google Code Jam Practice and](https://code.google.com/codejam/past-contests) : 过去比赛的练习题  * [HackerEarth - Programming challenges and Developer jobs](https://www.hackerearth.com)  * [HackerRank](https://www.hackerrank.com) : 实践编码、竞争、找工作  * [PKU ACM ICPC Practice problems](http://poj.org/problemlist) : ACMACPC 在线审核  * [Sphere Online Judge (SPOJ)](http://www.spoj.com) : 成为一名真正的编程硕士学习如何编写和构建高效的算法  * [Topcoder](https://www.topcoder.com) : 通过更多的包为代码提供更快的速度  * [UVa Online Judge](https://uva.onlinejudge.org) : 支持多种语言的数百种问题  * [WakaTime](https://wakatime.com) : 通过编辑器插件收集编码度量的排行榜<h1 id="computer-books">计算机书籍</h1>  * [Become a Programmer, Motherfucker (list of books)](http://programming-motherfucker.com/become.html) :来自Zed A. Shaw的书籍详尽清单  * [最佳图书奖](http://gatecse.in/best-books-for-gatecse/)  * [cses.fi/book.html](https://cses.fi/book.html)  * [github.com/vhf/free-programming-books](https://github.com/EbookFoundation/free-programming-books/blob/master/free-programming-books.md) : 超过500本免费电子书几乎包括你能想到的所有语言  * [GitBook](https://www.gitbook.com) : GitBook 可以帮助您的团队在线编写，协作和发布内容  * [Data Science course](https://jakevdp.github.io/PythonDataScienceHandbook/) : Python数据科学手册<h1 id="video-tutorials">视频指南</h1>  * [codedamn](https://www.youtube.com/channel/UCJUmE61LxhbhudzUugHL2wQ/videos) : 前端Web开发教程  * [代码学院](https://www.codeschool.com) : PluralSight公司和一个有抱负和有经验的开发人员的互动学习的地方  * [CodingMadeEasy](https://www.youtube.com/user/CodingMadeEasy/videos) : C ++教程  * [CS1: Higher Computing - Richard Buckland UNSW](https://www.youtube.com/playlist?list=PL6B940F08B9773B9F) : 一个很好的介绍性的CS课程  * [Derek Banas](https://www.youtube.com/user/derekbanas/videos) : 优质的教程  * [算法的设计与分析](http://openclassroom.stanford.edu/MainFolder/CoursePage.php?course=IntroToAlgorithms)  * [DevTips](https://www.youtube.com/user/DevTipsForDesigners/videos) : web开发教程  * [Kathryn Hodge](https://www.youtube.com/channel/UC4DwZ2VXM2KWtzHjVk9M_xg/videos) : 为初学者提供好视频  * [mycodeschool](https://www.youtube.com/user/mycodeschool/videos) : 数据结构和算法教程  * [Pluralsight](https://www.pluralsight.com) :通过多个短期课程学习软件开发，DevOps和数据科学  * [thenewboston](https://www.youtube.com/user/thenewboston/videos) : 课程很好但是与实际内容相比有点啰嗦  * [Tushar Roy](https://www.youtube.com/user/tusharroy2525/videos) : 印度Youtuber的算法和数据结构教程  * [Vim Tutorial Videos - Flarfnoogins](http://derekwyatt.org/vim/tutorials/index.html) : 用于学习Vim好的视频教程  * [XDA-University - Helping You Learn Android Development](https://forum.xda-developers.com/general/xda-university):帮助您学习Android开发  * [Khan Academy](https://www.khanacademy.org/computing/computer-science) : 免费学习计算机科学  * [Functional programming](https://www.youtube.com/watch?v=1PhArSujR_A) : John Carmack功能编程（2013）  * [Video about vims](https://vimeo.com/album/2838732) : 关于Vim的一系列教程<h1 id="online-compiler-and-sharing-code-snippets">在线编译和共享代码片段</h1>  * [CodePad](https://codepad.remoteinterview.io) : 支持代码编写，测试和运行，支持超过25种语言  * [Codesandbox.io](https://codesandbox.io) : CodeSandbox可以更轻松地创建，与他人共享和重用React项目  * [Godbolt.org](https://godbolt.org) : 一款非常优秀的工具用来探索在不同编译器没有优化时的输出  * [Ideone.com](https://ideone.com) : 用于60多种编程语言的在线编译和调试工具  * [JSFiddle](https://jsfiddle.net) : 在线测试你的javascript，CSS，HTML或者CoffeeScript  * [Pastebin.com](https://pastebin.com)  * [C9.io](https://c9.io) : 在云端的开发环境  * [Github Gist](https://gist.github.com) : 即时分享代码，笔记和片段<h1 id="blogs-of-developers">开发者博客</h1>  * [Algo-Geeks](http://algo-geeks.blogspot.com) : 编程拼图，数学技巧，算法等  * [Antirez - Redis Creator's blog](http://antirez.com/latest/0) : Antirez的博客  * [Antonio081014's Algorithms Codes](http://code.antonio081014.com) : RULE下的世界    * [Archives — Ask a Manager](http://www.askamanager.org/archives) : 人力资源相关的东西  * [Armin Ronacher's Thoughts and Writings](http://lucumr.pocoo.org) : 关于Python和开源的博客  * [blog.might.net](http://matt.might.net/articles/) : might dot net的博客  * [Brendon Gregg - Linux Kernel Dev](http://www.brendangregg.com) : Brendon D. Gregg博客  * [Clean Coder Blog](http://blog.cleancoder.com) : 《代码整洁之道》一书作者的博客  * [CodeAhoy](https://codeahoy.com) : 软件和人为因素的博客，100％测试人类  * [CoderGears Blog Insights from](http://www.codergears.com/Blog/) : the CoderGears Team  * [Coding Geek - A blog about IT, programming and Java](http://coding-geek.com) : 关于IT，编程和Java的博客  * [Coding Horror](https://blog.codinghorror.com) : 一个最好的编码博客  * [CSE Blog](http://www.cseblog.com) : 量子，数学，计算机科学难题  * [Daedtech.com](https://www.daedtech.com) : 有关软件的故事  * [Dan Dreams of Coding](https://dandreamsofcoding.com)  * [Daniel Lemire's Blog](https://lemire.me/blog/) : Daniel Lemire的博客  * [Eli Bendersky](http://eli.thegreenplace.net) : 从Python到LLVM的一切  * [Geek Land](https://avidullu.wordpress.com) : 我珍贵的收藏品  * [HackerEarth Blog](http://blog.hackerearth.com) : 黑客博客  * [IT Enthusiast](http://rodiongork.tumblr.com) : IT热衷者  * [Joel on Software](https://www.joelonsoftware.com) : StackOverflow首席执行官的博客  * [Late Developer](https://latedev.wordpress.com) :  一个老C ++人的随机想法  * [1ucasvb's laboriginal math and physics visualization](http://1ucasvb.tumblr.com) : Lucas Vieira Barbosa的实验室原始数学和物理可视化  * [Math ∩ Programming](https://jeremykun.com) : Math ∩ Programming  * [My Tech Interviews](http://www.mytechinterviews.com) : 准备技术访谈  * [Paul Graham Essays](http://www.paulgraham.com/articles.html) : Paul Grahan Essays  * [Programming Blog](http://www.yegor256.com) : Yegor Bugayenko的编程博客     * [Programming in the 21st Century](http://prog21.dadgum.com) : 二十一世纪的编程  * [rudhakar Rayavaram](http://sudhakar.online) : Sudhakar Rayavaram博客  * [Runhe Tian Coding Practice](https://tianrunhe.wordpress.com) : 苹果，谷歌，Facebook，亚马逊和微软的技术面试问题  * [Small Programming Challenges and Puzzles](https://www.nayuki.io/category/programming) : Nayuki项目  * [Stephen Haunts { Coding in the Trenches }](https://stephenhaunts.com) : 软件开发，架构和技术领导力  * [stevehanov.ca](http://stevehanov.ca/blog/) : 我知道如何在线制作和销售软件，我可以和你分享我的提示  * [Takipi Blog](http://blog.takipi.com) : 主要关注Java和JVM语言  * [WildMl](http://www.wildml.com) : 机器学习博客  * [XDA - Android Developer Forum](https://forum.xda-developers.com) : Android开源开发者论坛<h1 id="for-improving-your-english">用来提高你的英语</h1>  * [Englishclub.com/learn-english](https://www.englishclub.com/learn-english.htm)  * [语法和写作指南](http://grammar.ccc.commnet.edu/grammar/) : 对于那些想提高英语语言能力的人  * [标点符号和字母大小写规则](http://www.grammarbook.com/english_rules.asp)  * [PPurdue大学在线写作实验室](https://owl.english.purdue.edu)  * [Quia - English](https://www.quia.com/shared/english/)<h1 id="when-you-get-bored-from-cs-related-stuff">当你厌倦了CS相关的东西</h1>  * [Barcroft TV](https://www.youtube.com/user/barcroftmedia/featured) : 构成世界的各种各样的人的短小的纪录片  * [Big Think](https://www.youtube.com/user/bigthink/videos) : 专家驱动，可操作的教育内容，包括比尔·克林顿到比尔·奈  * [ColdFusion](https://www.youtube.com/user/coldfustion/videos) : 过去的当前的以及未来的技术  * [CrashCourse](https://www.youtube.com/user/crashcourse/videos) : 各种科目的小班课程  * [Every Frame a Painting](https://www.youtube.com/user/everyframeapainting/videos) : 高质量的电影分析  * [National Geographic](https://www.youtube.com/user/NationalGeographic/videos) 来自世界各地的高品质内容  * [r/ProgrammerHumor](https://www.reddit.com/r/ProgrammerHumor/) : Subreddit 用于听什么像什么  * [Reddit the front page of the internet](https://www.reddit.com) : 适合有大把空闲时间的人  * [Ridddle](https://www.youtube.com/user/VineMontanaTV/videos) : 关于科学的YouTube频道，主要是但不仅仅是宇宙和空间  * [SciShow](https://www.youtube.com/user/scishow/videos) : 有关您一直想知道的有趣问题的答案  * [SmarterEveryDay](https://www.youtube.com/user/destinws2/videos) : 关于我们周围世界的许多惊人的科学信息，通常用高速摄像机  * [TED](https://www.youtube.com/user/TEDtalksDirector/videos) : 谈论技术，娱乐和设计  * [TestTube News](https://www.youtube.com/user/TestTubeNetwork/videos) : 有关世界各地新闻的有趣信息  * [Reddit the front page of the internet](https://www.reddit.com) : 适合有大把空闲时间的人  * [How to live for long time ?](http://www.bbc.com/future/story/20170601-the-secret-to-a-long-and-healthy-life-eat-less) : 长寿的秘密  * [Vsauce](https://www.youtube.com/user/Vsauce/videos) : 最好的YouTube频道  * [Ox A cuk](http://www.ox.ac.uk/research/research-in-conversation/how-live-happy-life/dr-bronwyn-tarr#) : 如何过幸福的生活  * [lonelyspeck](https://www.lonelyspeck.com/the-milky-way-in-los-angeles-light-pollution/) : 关于轻污染天文摄影的权利的曝光 - Palos Verdes，洛杉矶，加利福尼亚州<h1 id="open-source-websites">开源网站</h1>  * [Open Hatch](https://openhatch.org) : OpenHatch是一个非营利组织，致力于将潜在的免费软件贡献者与社区，工具和教育相匹配   * [Source Forge](sourceforge.net) : SourceForge主持着近28万个项目（最后一次）。它每天提供超过200万次下载，并包含各种类别的应用程序和工具  * [Google Code](code.google.com/projecthosting) : Google使用Subversion或Mercurial版本控制系统为开源项目提供免费托管服务。它提供2GB的存储，集成的代码审查工具，维基和问题跟踪。 Google Code网站还提供了Google许多公开API和其他开发人员工具的链接。  * [Launch Pad](launchpad.net) :由Canonical、LaunchPad维护，特别针对在Ubuntu上运行的项目。它为超过21,000个使用Bazaar版本控制系统的项目提供托管  * [Google Open Source](opensource.google.com) : Google开源  * [Red Hat Developer](developer.redhat.com) : 全球领先的开源解决方案提供商  * [Open Source](opensource.com) : 开源  * [Google Summer of Code](https://summerofcode.withgoogle.com) : Google Summer of Code是一项全球性计划，致力于将更多的学生开发人员引入开源软件开发。学生在休学期间，用户3个月与一个开源组织合作完成的编程项目  * [Open Source Web Design](http://www.oswd.org) : 开源网页设计是一个共享符合标准的免费网页设计模板的平台。我们通过良好的设计给网络发布商一个通知  * [Mozilla Winter of Security](https://wiki.mozilla.org/Security/Automation/Winter_Of_Security_2016) : 安全冬季（MWOS）是由Mozilla安全小组组织的一个计划：让学生参与安全项目，学生必须执行一个学期项目作为大学课程的一部分，可以选择其中一个MWOS项目  * [Eclipse Lab](http://www.eclipse.org/org/foundation/eclipselabs/faq.php) : Eclipse Labs是一个基于Eclipse平台构建技术的开源项目社区。它提供开源项目通常需要的基础架构服务，如代码存储库，错误跟踪，项目网站/ wiki。 Eclipse Labs由Google Code Project Hosting托管，所以对于已经使用Google Code Project Hosting的开发人员来说，这将非常熟悉  * [Bit Bucket](https://bitbucket.org) : 像GitHub一样，BitBucket也承载了公共和私人项目。在这个网站上，少于五个用户的开源项目和私人项目是免费的。它拥有超过48,000个存储库，其中许多存储库可在现场进行搜索site.  * [Media Wiki](https://www.mediawiki.org/wiki/MediaWiki) : MediaWiki是一款用PHP编写的免费软件开源维基软件包，最初用于维基百科。现在也被非营利维基媒体基金会和许多其他维基的其他项目使用，包括这个网站，MediaWiki的主页  * [Code Curiosity](https://codecuriosity.org) : CodeCuriosity是一个鼓励开放源代码的平台，无论项目是大还是小，每个人都为自己的努力而获得回报  * [Code Triage](https://www.codetriage.com) : 帮助完成您最喜欢的开源项目，并在开发过程中成为更好的开发人员  * [Issue Hub](http://issuehub.io) : 贡献于开源。搜索问题标签为您找到正确的项目  * [Up for Grabs](http://up-for-grabs.net) : 这是一个专门为新贡献者策划的项目的列表。这些是开始使用项目的好方法，或是帮助分享开源项目的负担。  * [First Timers Only](http://www.firsttimersonly.com) : 首次对开放源码做出贡献可能是可怕的，有点压倒性。也许你是一个代码新手，或者你已经编码了一段时间，但还没有找到一个你觉得自己很有帮助的项目  * [Your First PR](http://yourfirstpr.github.io) : 您的第一个公关帮助在GitHub和其他地方展示最佳启动器问题为开源做贡献<h1 id="Special Thanks">特别感谢</h1>  * 如果您发现这很有用或考虑也参与并作出贡献，请考虑一个github Star。  * 特别感谢Ashish Padalkar（@ ashish2199）为初始版本原始帖子贡献了大量的数据和结构。<p>  <em><strong>Maintained with :heart: by sdmg15 &amp; al</strong></em></p>]]></content>
      
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript对象深拷贝</title>
      <link href="/2023/02/04/javascript-dui-xiang-shen-kao-bei/"/>
      <url>/2023/02/04/javascript-dui-xiang-shen-kao-bei/</url>
      
        <content type="html"><![CDATA[<p>为防止修改到JavaScript原始对象，会使用到深拷贝。</p><span id="more"></span><p><a href="http://www.kaotop.com/it/14615.html">js对象深拷贝的方法</a>中介绍了深拷贝的3种方法：</p><p>1、先将对象序列号为json字符串，再还原</p><p>2、使用Object.assign():适用于要拷贝的对象中属性为基础数据类型的</p><p>3、循环递归</p><h2 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>source<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>第一个参数为目标对象，第二个参数为原始对象。</p></blockquote><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="http://www.kaotop.com/it/14615.html">1、js对象深拷贝的方法</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bat脚本打开某个网页</title>
      <link href="/2023/02/04/bat-jiao-ben-da-kai-mou-ge-wang-ye/"/>
      <url>/2023/02/04/bat-jiao-ben-da-kai-mou-ge-wang-ye/</url>
      
        <content type="html"><![CDATA[<p>本文介绍如何使用bat打开某个网页。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS: Win10</p><h2 id="打开某个页面"><a href="#打开某个页面" class="headerlink" title="打开某个页面"></a>打开某个页面</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">explorer.exe <span class="token string">"http://localhost/index.html"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.jianshu.com/p/d48d6773681a">1、bat命令：浏览器打开网站</a></p>]]></content>
      
      
      <categories>
          
          <category> 脚本 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 脚本 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中的排序函数</title>
      <link href="/2023/02/04/python-zhong-de-pai-xu-han-shu/"/>
      <url>/2023/02/04/python-zhong-de-pai-xu-han-shu/</url>
      
        <content type="html"><![CDATA[<p>Python使用sort函数，配合lambda表达式，实现按照列表中某个字段的排序。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Python: 3.9</p><h2 id="python中的sort和sorted"><a href="#python中的sort和sorted" class="headerlink" title="python中的sort和sorted"></a>python中的sort和sorted</h2><table><thead><tr><th>sort</th><th>sorted</th></tr></thead><tbody><tr><td>直接修改原始对象</td><td>不修改原始对象，会返回新的对象</td></tr><tr><td>只能对list进行排序</td><td>所有<strong>可迭代对象</strong>都可以使用</td></tr><tr><td>lst. sort(key[, reverse]])</td><td>sorted(iterable[,key[, reverse]])</td></tr></tbody></table><blockquote><p>其中reverse为True时降序，False升序</p></blockquote><h2 id="对列表中指定元素排序"><a href="#对列表中指定元素排序" class="headerlink" title="对列表中指定元素排序"></a>对列表中指定元素排序</h2><p>升序排列：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">students <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'john'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'jane'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'dave'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>students<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key <span class="token operator">=</span> <span class="token keyword">lambda</span> student<span class="token punctuation">:</span>student<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>使用sorted:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>students<span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> student<span class="token punctuation">:</span>student<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>reverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Python中标准数据类型"><a href="#Python中标准数据类型" class="headerlink" title="Python中标准数据类型"></a>Python中标准数据类型</h2><p>Number（数字）</p><p>String（字符串）</p><p>List（列表）</p><p>Tuple（元组）</p><p>Set（集合）</p><p>Dictionary（字典）</p><p>除数字外都可迭代(可使用for循环遍历)，可通过isinstance函数判断:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Iterable<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Iterable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">,</span>Iterable<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">'NAME'</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>Iterable<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/liliwang/articles/12716899.html">1、python实现数组按列排序、字符串数组排序、按照关键字排序–sort和sorted的使用</a></p><p><a href="https://www.runoob.com/python3/python3-data-type.html">2、Python3基本数据类型</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium根据经纬度获取高程</title>
      <link href="/2023/02/04/cesium-gen-ju-jing-wei-du-huo-qu-gao-cheng/"/>
      <url>/2023/02/04/cesium-gen-ju-jing-wei-du-huo-qu-gao-cheng/</url>
      
        <content type="html"><![CDATA[<p>本文介绍使用Cesium获取指定地点的高程信息。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Cesium: 1.9</p><p>OS：Win10</p><h2 id="Cesium加载地形"><a href="#Cesium加载地形" class="headerlink" title="Cesium加载地形"></a>Cesium加载地形</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> terrainProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CesiumTerrainProvider</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"http://localhost/geodata/terrain"</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>viewer<span class="token punctuation">.</span>terrainProvider <span class="token operator">=</span> terrainProvider<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="获取高程信息"><a href="#获取高程信息" class="headerlink" title="获取高程信息"></a>获取高程信息</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// Query the terrain height of two Cartographic positions</span><span class="token keyword">var</span> terrainProvider <span class="token operator">=</span> Cesium<span class="token punctuation">.</span><span class="token function">createWorldTerrain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> positions <span class="token operator">=</span> <span class="token punctuation">[</span>    Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">86.925145</span><span class="token punctuation">,</span> <span class="token number">27.988257</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">87.0</span><span class="token punctuation">,</span> <span class="token number">28.0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> promise <span class="token operator">=</span> Cesium<span class="token punctuation">.</span><span class="token function">sampleTerrain</span><span class="token punctuation">(</span>terrainProvider<span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> positions<span class="token punctuation">)</span><span class="token punctuation">;</span>Cesium<span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>promise<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">updatedPositions</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// positions[0].height and positions[1].height have been updated.</span>    <span class="token comment">// updatedPositions is just a reference to positions.</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>sampleTerrain(terrainProvider, level, positions)</strong></p><p>其中level为The terrain level-of-detail from which to query terrain heights. </p></blockquote><h2 id="Cesium注册点击事件"><a href="#Cesium注册点击事件" class="headerlink" title="Cesium注册点击事件"></a>Cesium注册点击事件</h2><p>Cesium中Scene对象的pickPosition函数需要开启深度检测，即需要设置depthTestAgainstTerrain为true,否则无法正确获取到点击位置的地理坐标：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>depthTestAgainstTerrain<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>完整的点击事件中获取坐标的代码如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ScreenSpaceEventHandler</span><span class="token punctuation">(</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler<span class="token punctuation">.</span><span class="token function">setInputAction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">movement</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> position <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">pickPosition</span><span class="token punctuation">(</span>movement<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> cartographic <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromCartesian</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> longitude <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toDegrees</span><span class="token punctuation">(</span>cartographic<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> latitude <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toDegrees</span><span class="token punctuation">(</span>cartographic<span class="token punctuation">.</span>latitude<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> Cesium<span class="token punctuation">.</span>ScreenSpaceEventType<span class="token punctuation">.</span><span class="token constant">LEFT_CLICK</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>移除点击事件：</p><pre class="line-numbers language-none"><code class="language-none">this.clickHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cesium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置web服务器中SSL使用的TLS版本</title>
      <link href="/2023/02/04/pei-zhi-web-fu-wu-qi-zhong-ssl-shi-yong-de-tls-ban-ben/"/>
      <url>/2023/02/04/pei-zhi-web-fu-wu-qi-zhong-ssl-shi-yong-de-tls-ban-ben/</url>
      
        <content type="html"><![CDATA[<p>本文介绍配置Nginx和Tomcat中TLS的版本为1.2，其中1.0和1.1已于2020年被弃用。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS: Win10</p><p>Openssl: 3.0.3</p><p>Tomcat: 9.0</p><h2 id="安全信息提示"><a href="#安全信息提示" class="headerlink" title="安全信息提示"></a>安全信息提示</h2><p>SSL&#x2F;TLS:已弃用的TLSv1.0和TLSv1.1协议检测。</p><h2 id="检测SSL支持的TLS的版本"><a href="#检测SSL支持的TLS的版本" class="headerlink" title="检测SSL支持的TLS的版本"></a>检测SSL支持的TLS的版本</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">openssl s_client <span class="token parameter variable">-connect</span> localhost:8443 <span class="token parameter variable">-tls1_2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>tls版本：-tls1、-tls1_1、-tls1_2、-tls1_3</p></blockquote><h2 id="Tomcat配置ssl"><a href="#Tomcat配置ssl" class="headerlink" title="Tomcat配置ssl"></a>Tomcat配置ssl</h2><p>在server.xml中:</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span>           <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8443<span class="token punctuation">"</span></span> <span class="token attr-name">maxThreads</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span>           <span class="token attr-name">scheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https<span class="token punctuation">"</span></span> <span class="token attr-name">secure</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">SSLEnabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>     <span class="token attr-name">keystoreFile</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>xx.p12<span class="token punctuation">"</span></span>      <span class="token attr-name">keystorePass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>xx<span class="token punctuation">"</span></span>     <span class="token attr-name">keystoreType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>PKCS12<span class="token punctuation">"</span></span>           <span class="token attr-name">clientAuth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">sslEnabledProtocols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TLSv1.2,TLSv1.1<span class="token punctuation">"</span></span> <span class="token attr-name">sslProtocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TLS<span class="token punctuation">"</span></span>     <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>配置参数: sslEnabledProtocols</p><p>此时如果执行以下命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">openssl s_client <span class="token parameter variable">-connect</span> localhost:8443 <span class="token parameter variable">-tls1_2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>会得到含有session-id的信息，表示成功建立的会话：</p><pre class="line-numbers language-none"><code class="language-none">SSL-Session:    Protocol  : TLSv1.1    Cipher    : 0000    Session-ID: 63DC6861ED2A37C74AB5921C634687939C09DE0198959EE9369292681D3DA9EA<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>如果执行以下命令:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">openssl s_client <span class="token parameter variable">-connect</span> localhost:8443 <span class="token parameter variable">-tls1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>则此处的session-id为空，表示会话建立失败，未启用tls1.0版本</p><h2 id="Nginx的SSL配置中设置支持的tls版本"><a href="#Nginx的SSL配置中设置支持的tls版本" class="headerlink" title="Nginx的SSL配置中设置支持的tls版本"></a>Nginx的SSL配置中设置支持的tls版本</h2><pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span><span class="token directive"><span class="token keyword">listen</span> <span class="token number">8443</span> ssl</span><span class="token punctuation">;</span><span class="token directive"><span class="token keyword">ssl_certificate</span>   ../cert/localhost.pem</span><span class="token punctuation">;</span><span class="token directive"><span class="token keyword">ssl_certificate_key</span>  ../cert/localhost-key.pem</span><span class="token punctuation">;</span><span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">5m</span></span><span class="token punctuation">;</span><span class="token directive"><span class="token keyword">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4</span><span class="token punctuation">;</span><span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2</span><span class="token punctuation">;</span><span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>参数为ssl_protocals</p></blockquote><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/harbin1900/p/16805959.html">1、Tomcat 启用TLS1.2 1.3 禁用TLS1.0 1.1</a></p><p><a href="https://www.cnblogs.com/zklymm/p/16356119.html">2、SpringBoot配置SSL</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 应用安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3获取键盘输入及print函数的使用</title>
      <link href="/2022/12/21/python3-huo-qu-jian-pan-shu-ru-ji-print-han-shu-de-shi-yong/"/>
      <url>/2022/12/21/python3-huo-qu-jian-pan-shu-ru-ji-print-han-shu-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>本文介绍python脚本打包的全过程。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>Python: 3.9</p><p>OS: Win10</p><h2 id="应用简介"><a href="#应用简介" class="headerlink" title="应用简介"></a>应用简介</h2><p>用Python写了一个脚本处理图片数据，其中输入和输出目录需要手动设置，最终达到的效果如下所示：</p><p><img src="/2022/12/21/python3-huo-qu-jian-pan-shu-ru-ji-print-han-shu-de-shi-yong/2022-12-21_165353.jpg" alt="最终效果"></p><h2 id="获取键盘输入"><a href="#获取键盘输入" class="headerlink" title="获取键盘输入"></a>获取键盘输入</h2><p>使用input()可以获取键盘输入数据，其中\n为换行符：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">input_dir<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入tif文件所在目录:\n"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="PIL提示图片大小超出显示"><a href="#PIL提示图片大小超出显示" class="headerlink" title="PIL提示图片大小超出显示"></a>PIL提示图片大小超出显示</h2><p>DecompressionBombWarning: Image size (92680344 pixels) exceeds limit of  89478485 pixels, could be decompression bomb DOS  attack.DecompressionBombWarning…</p><p><a href="https://www.cnblogs.com/PiaoLingJiLu/p/14335184.html">可调整上限</a>：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> ImageImage<span class="token punctuation">.</span>MAX_IMAGE_PIXELS <span class="token operator">=</span> <span class="token number">2300000000</span> <span class="token comment"># 更改阈值像素上限</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>不调整也没关系，只是会出现提示</p></blockquote><h2 id="Python3-print函数格式化"><a href="#Python3-print函数格式化" class="headerlink" title="Python3 print函数格式化"></a>Python3 print函数格式化</h2><p>输出多个int类型的变量：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'处理完成:%d个成功,%d个失败 '</span> <span class="token operator">%</span><span class="token punctuation">(</span>counts<span class="token punctuation">,</span>errors<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>同时输出int和str类型的变量:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"the length of (%s) is %d"</span> <span class="token operator">%</span><span class="token punctuation">(</span><span class="token string">'runoob'</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token string">'runoob'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>python字符串格式化符号(更多的可<a href="https://www.runoob.com/w3cnote/python3-print-func-b.html">参考</a>):</p><table><thead><tr><th align="center">符号</th><th>描述</th></tr></thead><tbody><tr><td align="center">s%</td><td>格式化字符串</td></tr><tr><td align="center">d%</td><td>格式化整数</td></tr><tr><td align="center">f%</td><td>格式化浮点数字</td></tr></tbody></table><h2 id="Pyinstaller打包时设置图标"><a href="#Pyinstaller打包时设置图标" class="headerlink" title="Pyinstaller打包时设置图标"></a>Pyinstaller打包时设置图标</h2><p>添加–icon参数：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">pyinstaller <span class="token operator">-</span>F xx<span class="token punctuation">.</span>py <span class="token operator">-</span><span class="token operator">-</span>icon<span class="token operator">=</span><span class="token string">"xx.ico"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>可将ico文件放在py文件同级目录</p></blockquote><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本文记录了一个简单的含用户交互的python脚本的从0到打包的全过程，希望对你有所帮助。</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python tornado获取请求头和reuqests添加请求头</title>
      <link href="/2022/12/08/python-tornado-huo-qu-qing-qiu-tou-he-reuqests-tian-jia-qing-qiu-tou/"/>
      <url>/2022/12/08/python-tornado-huo-qu-qing-qiu-tou-he-reuqests-tian-jia-qing-qiu-tou/</url>
      
        <content type="html"><![CDATA[<p>本文介绍Python中使用tornado做接口时，获取客户端请求头中的数据，然后将请求头中的数据使用requests发送到另外一个接口。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Python: 3.9</p><p>OS: Win10</p><p>IDE: VS Code</p><h2 id="客户端发送请求"><a href="#客户端发送请求" class="headerlink" title="客户端发送请求"></a>客户端发送请求</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/imgproc/rest/test'</span><span class="token punctuation">,</span>    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token string-property property">'token'</span><span class="token operator">:</span> <span class="token string">'zjk'</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">pId</span><span class="token operator">:</span><span class="token number">23</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>    <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Tornado获取请求头中的数据"><a href="#Tornado获取请求头中的数据" class="headerlink" title="Tornado获取请求头中的数据"></a>Tornado获取请求头中的数据</h2><p>这里的headers是字典类型的数据，因此可以直接读取：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">token<span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'token'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="requests发送请求时携带token"><a href="#requests发送请求时携带token" class="headerlink" title="requests发送请求时携带token"></a>requests发送请求时携带token</h2><p>requests这里的headers也是字典类型的数据，如下：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requestsrequests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>headers<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'token'</span><span class="token punctuation">:</span>token<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> Tornado </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tornado </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JQuery删除和添加元素</title>
      <link href="/2022/12/04/jquery-shan-chu-he-tian-jia-yuan-su/"/>
      <url>/2022/12/04/jquery-shan-chu-he-tian-jia-yuan-su/</url>
      
        <content type="html"><![CDATA[<p>本文归纳下jQuery中添加和删除元素。</p><span id="more"></span><blockquote><p>本文内容参考：<a href="https://www.runoob.com/jquery/jquery-dom-add.html">jQuery - 添加元素</a></p></blockquote><h2 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h2><h3 id="append"><a href="#append" class="headerlink" title="append()"></a>append()</h3><p>在被选元素的内部结尾插入内容</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#bbox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'&lt;div id="bbox2">&lt;/div>'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>元素执行此方法之后，如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"bbox"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"bbox2"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="prepend"><a href="#prepend" class="headerlink" title="prepend()"></a>prepend()</h3><p>在被选元素的内部的开头插入内容，效果可参考append</p><h3 id="after"><a href="#after" class="headerlink" title="after()"></a>after()</h3><p>在被选元素之后插入内容</p><h3 id="before"><a href="#before" class="headerlink" title="before()"></a>before()</h3><p>在被选元素之前插入内容</p><blockquote><p>即：append&#x2F;prepend 是在选择元素内部嵌入。</p><p>after&#x2F;before 是在元素外面追加。</p></blockquote><h2 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h2><p>remove() - 删除被选元素（及其子元素）</p><p>empty() - 从被选元素中删除子元素</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JQuery </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JQuery中的效果方法</title>
      <link href="/2022/12/04/jquery-zhong-de-xiao-guo-fang-fa/"/>
      <url>/2022/12/04/jquery-zhong-de-xiao-guo-fang-fa/</url>
      
        <content type="html"><![CDATA[<p>本文介绍几个jQuery的效果函数，如显示隐藏,淡入淡出,逐渐变化等。</p><span id="more"></span><h2 id="animate"><a href="#animate" class="headerlink" title="animate()"></a>animate()</h2><p>对选中元素自定义动画。</p><p>在改变元素的位置或大小时,如果使用此方法，可以使得变化不那么生硬，有一个类似过度的效果</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>styles<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>speed<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中:</p><p><strong>styles</strong>主要支持以下样式：</p><p>left、right、width、height、top、bottom、margin、padding等，需要注意的是该属性名称必须是驼峰写法： 您必须使用 paddingLeft 代替 padding-left，marginRight 代替 margin-right。</p><p><strong>speed</strong> 可设置：slow、fast 或毫秒</p><p><strong>easing</strong> 可取值：swing或linear,前者表示开头和结尾慢，中间快，后者表示匀速移动</p><p><strong>callback</strong> 动画完成后要执行的函数</p><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#bbox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">height</span><span class="token operator">:</span><span class="token string">"300px"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更多内容参考：<a href="https://www.runoob.com/jquery/eff-animate.html">jQuery animate() 方法</a></p><h2 id="fadeIn-or-fadeOut"><a href="#fadeIn-or-fadeOut" class="headerlink" title="fadeIn or fadeOut"></a>fadeIn or fadeOut</h2><p>fadeIn：元素从不可见到可见</p><p>fadeOut: 元素从可见到不可见</p><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>其中speed的取值同animate函数的一样，都是:毫秒&#x2F;slow&#x2F;fast</p><p>easing: swing&#x2F;linear</p></blockquote><h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><p>完整的演示一个元素从消失到再次出现的过程：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#bbox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">,</span><span class="token string">'linear'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#bbox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">,</span><span class="token string">'swing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="fadeTo"><a href="#fadeTo" class="headerlink" title="fadeTo"></a>fadeTo</h3><p>将元素的透明到改到指定的数值。</p><p>语法如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeTo</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span>opacity<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例：</p><p>将元素的透明度改为0.4</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#bbox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeTo</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="fadeToggle"><a href="#fadeToggle" class="headerlink" title="fadeToggle"></a>fadeToggle</h3><p>调整元素的显示或隐藏的状态：即如果元素是隐藏的，那么会将其调整为显示；如果是显示的，调整为隐藏。</p><p>语法：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeToggle</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#bbox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeToggle</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="hide-or-show"><a href="#hide-or-show" class="headerlink" title="hide or show"></a>hide or show</h2><p>显示或隐藏元素。</p><h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="toggle"><a href="#toggle" class="headerlink" title="toggle"></a>toggle</h3><p>在显示和隐藏中切换，类似fade家族中的fadeToggle</p><p>语法如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="slideUp-or-slideDown"><a href="#slideUp-or-slideDown" class="headerlink" title="slideUp or slideDown"></a>slideUp or slideDown</h2><p><strong>slideUp</strong>:以向上滑动的方式隐藏元素</p><p><strong>slideDown</strong>:以向下滑动的方式显示元素</p><h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideUp</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span>easing<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>slideDown</strong> 适用于通过 jQuery 方法隐藏的元素，或在 CSS 中声明 display:none 隐藏的元素（不适用于通过 visibility:hidden 隐藏的元素）。 </p></blockquote><h3 id="slideToggle"><a href="#slideToggle" class="headerlink" title="slideToggle"></a>slideToggle</h3><p>在显示或隐藏中切换，使用限制同slideDown,即：</p><blockquote><p>适用于通过 jQuery 方法隐藏的元素，或在 CSS 中声明 display:none 隐藏的元素（不适用于通过 visibility:hidden 隐藏的元素）。</p></blockquote><h2 id="jQuery链"><a href="#jQuery链" class="headerlink" title="jQuery链"></a>jQuery链</h2><p>通过 jQuery，可以把动作&#x2F;方法链接在一起,Chaining 允许我们在一条语句中运行多个 jQuery 方法（在相同的元素上）, 这样的话，浏览器就不必多次查找相同的元素。</p><p>使用如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#p1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideUp</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideDown</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JQuery </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS遍历对象的key</title>
      <link href="/2022/11/28/js-bian-li-dui-xiang-de-key/"/>
      <url>/2022/11/28/js-bian-li-dui-xiang-de-key/</url>
      
        <content type="html"><![CDATA[<p>在JavaScript中遍历对象的key时，看到有使用到for-in循环的，了解了下for-in的使用限制。</p><span id="more"></span><h2 id="JavaScript遍历对象的key"><a href="#JavaScript遍历对象的key" class="headerlink" title="JavaScript遍历对象的key"></a>JavaScript遍历对象的key</h2><blockquote><p>说明:本节参考了<a href="https://blog.csdn.net/qq_34790644/article/details/114672553">js 获取对象的所有key值，用来遍历</a></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> gArr<span class="token operator">=</span><span class="token punctuation">&#123;</span>    <span class="token string-property property">"一年级"</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">,</span>    <span class="token string-property property">"二年级"</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> gArr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>gArr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">一年级</span><span class="token operator">:</span><span class="token number">30</span><span class="token literal-property property">二年级</span><span class="token operator">:</span><span class="token number">20</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>换种写法，先获取keys,再用for-in循环，如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> keys<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>gArr<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> keys<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gArr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出如下：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">0</span><span class="token keyword">undefined</span><span class="token number">1</span><span class="token keyword">undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>为甚么会出现这种情况?</p><h2 id="JavaScript中的for-in循环"><a href="#JavaScript中的for-in循环" class="headerlink" title="JavaScript中的for-in循环"></a>JavaScript中的for-in循环</h2><p>for&#x2F;in 语句用于循环对象属性。</p><p>循环中的代码每执行一次，就会对数组的元素或者对象的属性进行一次操作。</p><p>JavaScript 支持不同类型的循环：</p><ul><li><strong>for</strong> - 循环代码块一定的次数</li><li><em><strong>for&#x2F;in</strong></em> - 循环遍历对象的属性</li><li><strong>while</strong> - 当指定的条件为 true 时循环指定的代码块</li><li><strong>do&#x2F;while</strong> - 同样当指定的条件为 true 时循环指定的代码块</li></ul><blockquote><p><strong>注意：</strong> 不要使用 for&#x2F;in 语句来循环数组的索引，你可以使用 for语句替代。</p></blockquote><p>本节内容摘自:<a href="https://www.runoob.com/jsref/jsref-forin.html">JavaScript for&#x2F;in 语句</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>取消Chrome和Firefox的更新提示</title>
      <link href="/2022/11/27/qu-xiao-chrome-he-firefox-de-geng-xin-ti-shi/"/>
      <url>/2022/11/27/qu-xiao-chrome-he-firefox-de-geng-xin-ti-shi/</url>
      
        <content type="html"><![CDATA[<p>最新的浏览器都在设置里面取消了自动更新的设置，本文介绍如何取消Chrome和Firefox这两款浏览器的更新提示。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS: Windows</p><p>Firefox: 102</p><p>Chrome: 96</p><h2 id="Firefox"><a href="#Firefox" class="headerlink" title="Firefox"></a>Firefox</h2><p>修改注册表，在CMD中执行以下命令即可：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">reg <span class="token function">add</span> <span class="token string">"HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Mozilla\Firefox"</span> /v DisableAppUpdate /t REG_DWORD /d <span class="token number">1</span> /f<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更多方法可参考<a href="https://sysin.org/blog/disable-firefox-auto-update/#Firefox-for-Windows">如何禁用 Firefox 自动更新 (macOS, Linux, Windows)</a></p><h2 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h2><p>直接修改Chrome浏览器的快捷方式，修改target参数：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token string">"C:\Program Files\Chrome\Chrome.exe"</span> --disable-background-networking<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 系统安装配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 系统安装配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中的文件和文件夹操作</title>
      <link href="/2022/11/26/python-zhong-de-wen-jian-he-wen-jian-jia-cao-zuo/"/>
      <url>/2022/11/26/python-zhong-de-wen-jian-he-wen-jian-jia-cao-zuo/</url>
      
        <content type="html"><![CDATA[<p>本文记录用python处理文件的一些操作，含文件的遍历、拷贝、重命名等操作。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Python: 3.9</p><p>OS: Windows</p><p>IDE: VS Code</p><h2 id="文件遍历"><a href="#文件遍历" class="headerlink" title="文件遍历"></a>文件遍历</h2><p>参考：<a href="https://www.cnblogs.com/yibeimingyue/p/14678667.html">python遍历某个文件夹下的所有子文件夹及文件</a></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> root<span class="token punctuation">,</span>dirs<span class="token punctuation">,</span>files <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span>file_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>          <span class="token keyword">for</span> <span class="token builtin">dir</span> <span class="token keyword">in</span> dirs<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span><span class="token builtin">dir</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="判断文件是否存在"><a href="#判断文件是否存在" class="headerlink" title="判断文件是否存在"></a>判断文件是否存在</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>awz3_path<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="文件拷贝"><a href="#文件拷贝" class="headerlink" title="文件拷贝"></a>文件拷贝</h2><pre class="line-numbers language-none"><code class="language-none">import shutilshutil.copy(source,dest)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>shutil的更多用法：</p><p><img src="/2022/11/26/python-zhong-de-wen-jian-he-wen-jian-jia-cao-zuo/Python%E7%9A%84shutil.jpg"></p><p>更多用法，参考：<a href="https://www.cnblogs.com/ltkekeli1229/p/15709414.html">Python模块-shutil模块详解</a></p><h2 id="文本文件的读取"><a href="#文本文件的读取" class="headerlink" title="文本文件的读取"></a>文本文件的读取</h2><p> Python open() 方法用于打开一个文件，并返回文件对象。 </p><h3 id="全部读取文件内容"><a href="#全部读取文件内容" class="headerlink" title="全部读取文件内容"></a>全部读取文件内容</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">txt_file<span class="token operator">=</span><span class="token string">"xx.txt"</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>txt_file<span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fs<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>with关键字的使用：读完文件后，要对文件关闭，调用文件的close,dispose的方法，否则文件会被占用，此时使用with就可以自动关闭，和c#中的using关键字非常相似。</p></blockquote><h3 id="逐行读取文本文件"><a href="#逐行读取文本文件" class="headerlink" title="逐行读取文本文件"></a>逐行读取文本文件</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>txt_file<span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fs<span class="token punctuation">:</span>    line<span class="token operator">=</span>fs<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">while</span> line<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>        line<span class="token operator">=</span>fs<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="读取JSON文件"><a href="#读取JSON文件" class="headerlink" title="读取JSON文件"></a>读取JSON文件</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> json<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"xx.json"</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fs<span class="token punctuation">:</span>    htss<span class="token operator">=</span>json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>fs<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>htss<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="文本文件的写入"><a href="#文本文件的写入" class="headerlink" title="文本文件的写入"></a>文本文件的写入</h2><p>open函数的<a href="https://www.runoob.com/python3/python3-file-methods.html">mode参数</a></p><table><thead><tr><th>模式</th><th>描述</th></tr></thead><tbody><tr><td>x</td><td>写模式，新建一个文件，如果该文件已存在则会报错。</td></tr><tr><td>b</td><td>二进制模式。</td></tr><tr><td>+</td><td>打开一个文件进行更新(可读可写)。</td></tr><tr><td>U</td><td>通用换行模式（<strong>Python 3 不支持</strong>）。</td></tr><tr><td>r</td><td>以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td></tr><tr><td>rb</td><td>以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。一般用于非文本文件如图片等。</td></tr><tr><td>r+</td><td>打开一个文件用于读写。文件指针将会放在文件的开头。</td></tr><tr><td>rb+</td><td>以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。一般用于非文本文件如图片等。</td></tr><tr><td>w</td><td>打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td></tr><tr><td>wb</td><td>以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td></tr><tr><td>w+</td><td>打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td></tr><tr><td>wb+</td><td>以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td></tr><tr><td>a</td><td>打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td></tr><tr><td>ab</td><td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td></tr><tr><td>a+</td><td>打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td></tr><tr><td>ab+</td><td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td></tr></tbody></table><h3 id="文件的写入"><a href="#文件的写入" class="headerlink" title="文件的写入"></a>文件的写入</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">"w"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"做自己的保护神"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="文件的追加"><a href="#文件的追加" class="headerlink" title="文件的追加"></a>文件的追加</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">"a"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"落子无悔"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>此时文件内容：</p><blockquote><p><em><strong>做自己的保护神落子无悔</strong></em></p></blockquote><p>如果需要换行，添加换行符<strong>\n</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">"a"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>writelines<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"好好生活好好爱\n"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中的list和tuple</title>
      <link href="/2022/11/26/python-zhong-de-list-he-tuple/"/>
      <url>/2022/11/26/python-zhong-de-list-he-tuple/</url>
      
        <content type="html"><![CDATA[<p>Python中列表list和元组tuple是非常常见的两种数据类型，其中list是可变序列，tuple是不可变序列，本文对这两种数据类型进行简单的介绍</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Python:3.9</p><p>OS:Windows</p><p>IDE:VS Code</p><h2 id="列表：list"><a href="#列表：list" class="headerlink" title="列表：list"></a>列表：list</h2><p>内容来源：<a href="https://www.runoob.com/python3/python3-list.html">Python3 列表</a></p><h3 id="创建列表"><a href="#创建列表" class="headerlink" title="创建列表"></a>创建列表</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">list</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="元素的访问"><a href="#元素的访问" class="headerlink" title="元素的访问"></a>元素的访问</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 访问第一个元素</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># 倒数第二个元素</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># 索引[1,3)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># ['green', 'blue']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="数组的更新"><a href="#数组的更新" class="headerlink" title="数组的更新"></a>数组的更新</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token comment"># [0, 'green', 'blue', 'yellow', 'white', 'black']</span><span class="token comment"># 列表添加元素</span><span class="token builtin">list</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'pink'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token comment"># 列表插入元素</span><span class="token builtin">list</span><span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token comment"># 删除元素</span><span class="token keyword">del</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token comment"># [0, 'green', 'blue', 'yellow', 'white', 'black']</span><span class="token comment"># 元素个数计算</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="内置方法"><a href="#内置方法" class="headerlink" title="内置方法"></a>内置方法</h3><table><thead><tr><th>方法</th><th>作用</th></tr></thead><tbody><tr><td>append(obj)</td><td>添加元素</td></tr><tr><td>insert(index,obj)</td><td>插入</td></tr><tr><td>remove(obj)</td><td>删除元素</td></tr><tr><td>reverse()</td><td>列表反转</td></tr><tr><td>index(obj)</td><td>返回第一个匹配项的索引位置</td></tr><tr><td>list(seq)</td><td>将元组转为列表</td></tr></tbody></table><h2 id="元组：tuple"><a href="#元组：tuple" class="headerlink" title="元组：tuple"></a>元组：tuple</h2><p>内容来源：<a href="https://www.runoob.com/python3/python3-tuple.html">Python3 元组</a></p><p> Python 的元组与列表类似，不同之处在于元组的元素不能修改。</p><p>元组使用小括号 ( )，列表使用方括号 [ ]。</p><p>元组创建很简单，只需要在括号中添加元素，并使用逗号隔开即可。</p><h3 id="创建元组"><a href="#创建元组" class="headerlink" title="创建元组"></a>创建元组</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">tup1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'Google'</span><span class="token punctuation">,</span> <span class="token string">'Runoob'</span><span class="token punctuation">,</span> <span class="token number">1997</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="访问元组的元素"><a href="#访问元组的元素" class="headerlink" title="访问元组的元素"></a>访问元组的元素</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>tup1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tup1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="修改和删除？"><a href="#修改和删除？" class="headerlink" title="修改和删除？"></a>修改和删除？</h3><p>元组中的元素不允许修改，但可以连接元组</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">tup2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'xyz'</span><span class="token punctuation">)</span>tup3<span class="token operator">=</span>tup1<span class="token operator">+</span>tup2<span class="token keyword">print</span><span class="token punctuation">(</span>tup3<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>元组中的元素不可删除，但可以删除元组</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">del</span> tup2<span class="token keyword">print</span><span class="token punctuation">(</span>tup2<span class="token punctuation">)</span><span class="token comment"># name 'tup2' is not defined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="元组的运算"><a href="#元组的运算" class="headerlink" title="元组的运算"></a>元组的运算</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">tup4<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># 元组元素个数</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>tup4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 元素复制</span><span class="token keyword">print</span><span class="token punctuation">(</span>tup4<span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># 判断元素是否在元组内</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token keyword">in</span> tup4<span class="token punctuation">)</span><span class="token comment"># (3, 4, 5, 3, 4, 5, 3, 4, 5, 3, 4, 5)</span><span class="token comment"># isinstance 判断某个数据的数据类型</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>tup4<span class="token punctuation">,</span><span class="token builtin">tuple</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 将元组转为列表</span>list_tup4<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span>tup4<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list_tup4<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="元组的内置函数"><a href="#元组的内置函数" class="headerlink" title="元组的内置函数"></a>元组的内置函数</h3><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>len(tuple)</td><td>计算元素个数</td></tr><tr><td>max(tuple)</td><td>元素最大值</td></tr><tr><td>min(tuple)</td><td>最小值</td></tr><tr><td>tuple(iterabke)</td><td>将可迭代序列转换为元组</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中的datetime和time</title>
      <link href="/2022/11/26/python-zhong-de-datetime-he-time/"/>
      <url>/2022/11/26/python-zhong-de-datetime-he-time/</url>
      
        <content type="html"><![CDATA[<p>本文记录Python中的日期和时间的用法。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Python:3.9</p><p>OS:Windows</p><p>IDE:VS Code</p><h2 id="时间：time"><a href="#时间：time" class="headerlink" title="时间：time"></a>时间：time</h2><p>本节内容来源：<a href="https://www.runoob.com/python3/python3-date-time.html">Python3  日期和时间</a></p><h3 id="获取当前时间"><a href="#获取当前时间" class="headerlink" title="获取当前时间"></a>获取当前时间</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">print</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>输出：</p><p>2022-11-26 15:43:44</p><h3 id="将时间字符串转为时间"><a href="#将时间字符串转为时间" class="headerlink" title="将时间字符串转为时间"></a>将时间字符串转为时间</h3><p>这里有个struct_time的东西，为tuple格式：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">time_struct<span class="token operator">=</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">"2022-11-26 15:43:44"</span><span class="token punctuation">,</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>time_struct<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>输出结果如下:</p><p>time.struct_time(tm_year&#x3D;2022, tm_mon&#x3D;11, tm_mday&#x3D;26, tm_hour&#x3D;15, tm_min&#x3D;43, tm_sec&#x3D;44, tm_wday&#x3D;5, tm_yday&#x3D;330,<br>tm_isdst&#x3D;-1)</p><blockquote><p>注：这个是可以直接使用&gt;,&lt;等运算符直接比较大小的</p></blockquote><p>如判断当前时间是否在某个时间段：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">checkTimePassed</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span>endTime<span class="token punctuation">)</span><span class="token punctuation">:</span>    start<span class="token operator">=</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>startTime<span class="token punctuation">,</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>    end<span class="token operator">=</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>endTime<span class="token punctuation">,</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>    nowstr<span class="token operator">=</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>    now<span class="token operator">=</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>nowstr<span class="token punctuation">,</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> now<span class="token operator">></span>start <span class="token keyword">and</span> now<span class="token operator">&lt;</span>end<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token boolean">True</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>将time_struct转为时间戳：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">"2022-11-26 15:43:44"</span><span class="token punctuation">,</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>输出</p><p>1669448624.0</p><h3 id="时间格式化字符串"><a href="#时间格式化字符串" class="headerlink" title="时间格式化字符串"></a>时间格式化字符串</h3><ul><li>%y 两位数的年份表示（00-99）</li><li>%Y 四位数的年份表示（000-9999）</li><li>%m 月份（01-12）</li><li>%d 月内中的一天（0-31）</li><li>%H 24小时制小时数（0-23）</li><li>%I 12小时制小时数（01-12）</li><li>%M 分钟数（00&#x3D;59）</li><li>%S 秒（00-59）</li></ul><h2 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a>datetime</h2><h3 id="获取当前时间-1"><a href="#获取当前时间-1" class="headerlink" title="获取当前时间"></a>获取当前时间</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> datetimedt<span class="token operator">=</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>输出</p><p>2022-11-26 15:50:27</p><h3 id="获取前10分钟的时间"><a href="#获取前10分钟的时间" class="headerlink" title="获取前10分钟的时间"></a>获取前10分钟的时间</h3><p>使用datetime的<strong>timedelta</strong>方法：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> datetimedt<span class="token operator">=</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>yes_time <span class="token operator">=</span> dt <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>minutes<span class="token operator">=</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span>newTime<span class="token operator">=</span>yes_time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>newTime<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出：</p><p>2022-11-26 15:51:15<br>2022-11-26 15:41:15</p><h2 id="strftime-vs-strptime"><a href="#strftime-vs-strptime" class="headerlink" title="strftime vs. strptime"></a>strftime vs. strptime</h2><p>strftime:将时间类型转为指定格式的字符串</p><p>strptime:将时间字符串转为时间</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript中的let和const</title>
      <link href="/2022/11/05/javascript-zhong-de-let-he-const/"/>
      <url>/2022/11/05/javascript-zhong-de-let-he-const/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍在Javascript中出现的let和const关键字,它们是ES6中新增的。</p><span id="more"></span><h2 id="几个概念"><a href="#几个概念" class="headerlink" title="几个概念"></a>几个概念</h2><h3 id="ECMAScript和Javascript"><a href="#ECMAScript和Javascript" class="headerlink" title="ECMAScript和Javascript"></a>ECMAScript和Javascript</h3><p>ECMAScript6它是 ECMA-262 标准的第六个版本，其特点是对 ECMAScript 规范有着显著的变化和改进。</p><p>ES6&#x3D;ECMAScript6&#x3D;ES2015，描述的是同一个东西，名字不同。</p><p>ECMAScript是标准规范，Javascript是其实现(大概是这个意思)。</p><h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><p>一款可以将 ES6 代码转换为 ES5 代码的转译器。</p><h2 id="let-vs-var"><a href="#let-vs-var" class="headerlink" title="let vs. var"></a>let vs. var</h2><p>作用：声明一个在代码块中有效的变量。</p><p>在ES6之前， JavaScript 只有两种作用域： <strong>全局变量</strong> 与 <strong>函数内的局部变量</strong>。  </p><p>ES6则引入了块级作用域，即用let声明的变量只能在代码块{}内有效，{}外不能访问，如：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> x<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> y<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"y:"</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//y is not defined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在循环体中，let关键字也是仅在循环体内部有效，如:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 一些代码...</span><span class="token punctuation">&#125;</span><span class="token comment">// 这里输出 i 为 5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>let声明的全局变量不属于window对象，因此不能用window.访问；</p><p>let关键字在相同的作用域中，是不可以重新声明赋值的；</p></blockquote><h2 id="const关键字"><a href="#const关键字" class="headerlink" title="const关键字"></a>const关键字</h2><p>作用：声明一个只读的常量，声明的同时必须进行初始化。</p><p>const 定义的对象或者数组，其实是可变的，可修改其属性值。</p><h2 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h2><p><strong>相同点:</strong></p><p>都是块级作用域；</p><p>都不能和它所在的作用域内的其它变量或函数拥有相同名称；</p><p><strong>不同点：</strong></p><p>const声明时要同时初始化</p><p>const不能修改，但可重新为对象的属性赋值。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.runoob.com/js/js-let-const.html">1、JavaScript let 和 const </a></p><p><a href="https://blog.51cto.com/u_15127629/2871340">2、一文读懂 JavaScript 和 ECMAScript 的区别</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript中数组的使用</title>
      <link href="/2022/11/05/javascript-zhong-shu-zu-de-shi-yong/"/>
      <url>/2022/11/05/javascript-zhong-shu-zu-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录Javascript中数组的一些方法，包括map、reduce、filter等。</p><span id="more"></span><h2 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h2><p>作用：通过指定函数处理数组的每个元素，并返回处理后的数组。</p><p>实例：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> nums<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">var</span> newArr<span class="token operator">=</span>nums<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出结果:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h2><p>作用: 检测数值元素，并返回符合条件所有元素的数组。 </p><h2 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h2><p>作用:返回通过测试（函数内判断）的数组的第一个元素的值。 </p><h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h2><p>作用:接收一个函数作为<strong>累加器</strong>，数组中的每个值（从左到右）开始缩减，最终计算为一个值。 </p><p>用法:array.reduce(function(total, currentValue, currentIndex, arr), initialValue)</p><p>实例：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> nums<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">var</span> sum<span class="token operator">=</span>nums<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span>num</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> total<span class="token operator">+</span>num<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出结果:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">15</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h2><p>作用： 添加或删除数组中的元素。 </p><p>用法： <em>array</em>.splice(<em>index</em>,<em>howmany</em>,<em>item1</em>,…..,<em>itemX</em>) </p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>index</td><td>添加或删除的位置</td></tr><tr><td>howmany</td><td>应该删除多少元素。必须是数字，但可以是 “0”。如果未规定此参数，则删除从 index 开始到原数组结尾的所有元素。</td></tr><tr><td>item1,….itemX</td><td>要添加的元素</td></tr></tbody></table><p>示例：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> nums<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">var</span> deletedArr<span class="token operator">=</span>nums<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>输出结果:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h2><p>作用：返回数组中某个指定的元素位置 </p><h2 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h2><p>作用：连接两个或多个数组</p><p>语法： <em>array1</em>.concat(<em>array2</em>,<em>array3</em>,…,<em>arrayX</em>) </p><h2 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h2><p>作用：将数组中的元素转为为一个字符串</p><p>语法： <em>array</em>.join(<em>separator</em>) </p><h2 id="shift"><a href="#shift" class="headerlink" title="shift()"></a>shift()</h2><p>作用：删除并返回数组的第一个元素</p><h2 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h2><p>作用：向数组的开头添加一个或更多元素，并返回新的长度</p><h2 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h2><p>作用：对数组进行排序，会改变原始数组。 默认排序顺序为按字母升序。 </p><p>语法： <em>array</em>.sort(<em>sortfunction</em>)</p><p>示例：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Mango"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>fruits<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//["Apple","Banana","Mango","Orange"]</span>fruits<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>fruits<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1,2,20,3,4,5]</span>fruits<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>fruits<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a<span class="token operator">-</span>b<span class="token punctuation">;</span><span class="token comment">//升序</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1,2,3,4,5,20]</span>fruits<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"杨蓉"</span><span class="token punctuation">,</span><span class="token string">"朱一龙"</span><span class="token punctuation">,</span><span class="token string">"彭冠英"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>fruits<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token string">'zh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//["彭冠英","杨蓉","朱一龙"]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h2><p>作用：反转数组元素，直接改变原始数组</p><h2 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h2><p>作用：返回指定位置的数据并组成新的数组</p><p>语法： <em>array</em>.slice(<em>start</em>, <em>end</em>) </p><p>示例：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Lemon"</span><span class="token punctuation">,</span> <span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Mango"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> citrus <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>citrus<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ["Orange","Lemon"]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>更多用法，可参考<a href="https://www.runoob.com/jsref/jsref-obj-array.html">文章</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cesium编辑并保存Entity</title>
      <link href="/2022/11/03/cesium-bian-ji-bing-bao-cun-entity/"/>
      <url>/2022/11/03/cesium-bian-ji-bing-bao-cun-entity/</url>
      
        <content type="html"><![CDATA[<p>这里借助Cesium的exportKml方法，先将Entity转为xml字符串，然后借助mapbox的togeojson将kml转为geojson,从而实现Entity数据的保存。</p><span id="more"></span><h2 id="Cesium编辑Entity"><a href="#Cesium编辑Entity" class="headerlink" title="Cesium编辑Entity"></a>Cesium编辑Entity</h2><p>可参考<a href="http://support.supermap.com.cn:8090/webgl/examples/webgl/editor.html#DrawAndEdit">绘制编辑线面</a></p><h2 id="Cesium将Entity转为kml"><a href="#Cesium将Entity转为kml" class="headerlink" title="Cesium将Entity转为kml"></a>Cesium将Entity转为kml</h2><p>参考<a href="http://cesium.xin/cesium/cn/Documentation1.62/exportKml.html">exportKml</a>:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> entities <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>EntityCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//其中x为Entity</span>Cesium<span class="token punctuation">.</span><span class="token function">exportKml</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>     <span class="token literal-property property">entities</span><span class="token operator">:</span> entityCollection <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> xmlStr<span class="token operator">=</span>result<span class="token punctuation">.</span>kml<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="kml转geojson"><a href="#kml转geojson" class="headerlink" title="kml转geojson"></a>kml转geojson</h2><p>使用<a href="https://github.com/mapbox/togeojson">togeojson</a>可将kml转为geojson,如下:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'togeojson.js'</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'test/data/linestring.kml'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xml</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>toGeoJSON<span class="token punctuation">.</span><span class="token function">kml</span><span class="token punctuation">(</span>xml<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果拿到的是xml的字符串形式，即：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">"<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xml</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xml</span><span class="token punctuation">></span></span>"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>需要先将xml字符串格式化，再调用toGeoJSON.kml函数:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> dom <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DOMParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span>xmlStr<span class="token punctuation">,</span> <span class="token string">'text/xml'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Cesium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cesium </tag>
            
            <tag> KML </tag>
            
            <tag> Geojson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows Server 2019禁止自动更新</title>
      <link href="/2022/10/20/windows-server-2019-jin-zhi-zi-dong-geng-xin/"/>
      <url>/2022/10/20/windows-server-2019-jin-zhi-zi-dong-geng-xin/</url>
      
        <content type="html"><![CDATA[<p>windows server 2019 调整为手动更新</p><span id="more"></span><p>在cmd中输入sconfig,然后选择”5)Windows更新设置”，之后选择手动更新即可，如图:<img src="/2022/10/20/windows-server-2019-jin-zhi-zi-dong-geng-xin/2022-10-20_201808.jpg" alt="2022-10-20_201808"></p><p>参考文章<a href="https://www.cnblogs.com/yuwentao/p/15708595.html">Windows Server2019&#x2F;2022中禁用自动更新(更改为手动更新)系统</a></p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维 </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python的whl包的版本选择和依赖查询</title>
      <link href="/2022/10/16/python-de-whl-bao-de-ban-ben-xuan-ze-he-yi-lai-cha-xun/"/>
      <url>/2022/10/16/python-de-whl-bao-de-ban-ben-xuan-ze-he-yi-lai-cha-xun/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍如何选择合适的whl包，以及如何查询whl包的依赖。</p><span id="more"></span><h2 id="pip离线安装时如果选择whl包"><a href="#pip离线安装时如果选择whl包" class="headerlink" title="pip离线安装时如果选择whl包"></a>pip离线安装时如果选择whl包</h2><p>这里以pycryptodomex为例<br>先在可以访问互联网的机器上通过pip install pycryptodomex<br>然后查询pycryptodomex,可以找到pycryptodomex-3.15.0.dist-info目录<br>里面找到一个WHEEL文件，记录了版本信息:</p><pre class="line-numbers language-none"><code class="language-none">Wheel-Version: 1.0Generator: bdist_wheel (0.36.2)Root-Is-Purelib: falseTag: cp35-abi3-win_amd64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这样就能确定应该要下载的whl包了</p><h2 id="whl包的依赖查询"><a href="#whl包的依赖查询" class="headerlink" title="whl包的依赖查询"></a>whl包的依赖查询</h2><p>在离线安装whl包，可能会出现有若干依赖没有安装的问题，这时如果能知道这个包的所有依赖，就能下载全部依赖后，再进行安装，这里以requests为例：</p><p>先在一台可以访问互联网的机器上安装requests，然后执行以下命令:</p><pre class="line-numbers language-none"><code class="language-none">pip show requests<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>会出现如下信息：</p><p><img src="/2022/10/16/python-de-whl-bao-de-ban-ben-xuan-ze-he-yi-lai-cha-xun/2022-10-16_194301.jpg"></p><p>这样将这些依赖一起下载后，再去安装requests就可以了。</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Postgresql配置远程连接</title>
      <link href="/2022/10/16/postgresql-pei-zhi-yuan-cheng-lian-jie/"/>
      <url>/2022/10/16/postgresql-pei-zhi-yuan-cheng-lian-jie/</url>
      
        <content type="html"><![CDATA[<p>安装Postgresql后，如果需要通过Navicat等第三方客户端连接时，需要调整在配置文件。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:windows<br>Postgresql:v14</p><h2 id="postgresql配置远程连接"><a href="#postgresql配置远程连接" class="headerlink" title="postgresql配置远程连接"></a>postgresql配置远程连接</h2><p>默认情况下，使用Navicat连接Postgresql,遇到了localhost无法连接的问题: <a href="https://www.cnblogs.com/q149072205/p/15697287.html">链接PostgreSQL报错authentication method 10 not supported解决</a> 的问题，可通过修改pg_hba.conf文件来解决,具体如下:</p><pre class="line-numbers language-none"><code class="language-none"># &quot;local&quot; is for Unix domain socket connections onlylocal   all             all                           trust# IPv4 local connections:host    all             all             127.0.0.1&#x2F;32            trust# IPv6 local connections:host    all             all             ::1&#x2F;128                 trust<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>另如果需要其它ip来访问,如果192.168.10网段的Ip来访问postgresql，可通过增加以下内容来解决：</p><pre class="line-numbers language-none"><code class="language-none">host    all             all             192.168.10.0&#x2F;24         trust<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> PostgreSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typecho博客迁移至hexo</title>
      <link href="/2022/10/16/typecho-bo-ke-qian-yi-zhi-hexo/"/>
      <url>/2022/10/16/typecho-bo-ke-qian-yi-zhi-hexo/</url>
      
        <content type="html"><![CDATA[<p>本文记录typecho博客迁移到Hexo时使用的软件的注意事项。</p><span id="more"></span><p>使用了<a href="https://github.com/g-mero/dealtypecho/releases/tag/1.0.0">dealtypecho</a></p><p>软件界面如下图所示：</p><p><img src="/2022/10/16/typecho-bo-ke-qian-yi-zhi-hexo/2022-10-16_142938.jpg" alt="typecho文章导入"></p><blockquote><p>其中用户名和数据库名反了，使用的时候注意一下。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> Typecho </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/10/16/hello-world/"/>
      <url>/2022/10/16/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>github token 的生成</title>
      <link href="/2022/10/16/github-token-de-sheng-cheng/"/>
      <url>/2022/10/16/github-token-de-sheng-cheng/</url>
      
        <content type="html"><![CDATA[<p>参考 <a href="https://blog.csdn.net/chengwenyang/article/details/120060010">github的token使用方法</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo的基本使用</title>
      <link href="/2022/10/16/hexo-de-ji-ben-shi-yong-md/"/>
      <url>/2022/10/16/hexo-de-ji-ben-shi-yong-md/</url>
      
        <content type="html"><![CDATA[<p>本文记录Hexo安装的基本步骤及遇到的各种问题。</p><span id="more"></span><h2 id="Hexo安装"><a href="#Hexo安装" class="headerlink" title="Hexo安装"></a>Hexo安装</h2><pre class="line-numbers language-none"><code class="language-none">npm install -g hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>初始化</p><pre class="line-numbers language-none"><code class="language-none">hexo init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>此时会选择hexo-generator-category的版本，但可能会不起作用，可直接修改package.json中hexo-generator-category 和hexo-generator-index 为0.1.3，然后执行npm install 命令，否则很多插件无法使用。</p></blockquote><p>配置主题</p><p>进入themes目录，然后下载主题：</p><pre class="line-numbers language-none"><code class="language-none">git clone https:&#x2F;&#x2F;github.com&#x2F;blinkfox&#x2F;hexo-theme-matery<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改hexo根目录中的_config文件,将其theme设为主题的文件名:</p><pre class="line-numbers language-none"><code class="language-none">theme: hexo-theme-matery<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="创建新页面"><a href="#创建新页面" class="headerlink" title="创建新页面"></a>创建新页面</h2><p>参考 <a href="https://yansheng836.github.io/article/7e72998a.html">Hexo新建标签、分类、归档页面</a></p><pre class="line-numbers language-none"><code class="language-none">hexo new page &quot;tags&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后找到&#x2F;source&#x2F;tags&#x2F;index.md，设置type为“tags”</p><pre class="line-numbers language-none"><code class="language-none">title: tagsdate: 2022-10-16 09:09:13type: &quot;tags&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>其它归档、分类页面同上即可</p><h2 id="创建新博客"><a href="#创建新博客" class="headerlink" title="创建新博客"></a>创建新博客</h2><pre class="line-numbers language-none"><code class="language-none">hexo new &quot;新博客&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>标签和分类的语法:</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">tags: [Typecho,博客]categories: [Typecho,博客]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>或</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">tags:<span class="token list punctuation">-</span> 博客<span class="token list punctuation">-</span> Typechocategories:<span class="token list punctuation">-</span> [123]<span class="token list punctuation">-</span> [456]<span class="token list punctuation">-</span> [123, 789]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="生成部署文件及预览"><a href="#生成部署文件及预览" class="headerlink" title="生成部署文件及预览"></a>生成部署文件及预览</h2><h3 id="部署文件的生成"><a href="#部署文件的生成" class="headerlink" title="部署文件的生成"></a>部署文件的生成</h3><pre class="line-numbers language-none"><code class="language-none">hexo g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>生成部署文件，在public目录，可直接通过nginx或iis部署，</p><h3 id="本地预览"><a href="#本地预览" class="headerlink" title="本地预览"></a>本地预览</h3><pre class="line-numbers language-none"><code class="language-none">hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果没有错误，在浏览器中直接输入<a href="http://localhost:4000/">http://localhost:4000</a> 即可访问到。</p><h2 id="将博客部署到github中"><a href="#将博客部署到github中" class="headerlink" title="将博客部署到github中"></a>将博客部署到github中</h2><blockquote><p>提示:可以使用hexo-deployer-git部署，但Hexo1.0在本文写作时不支持此插件，故没有选择，如果hexo-deployer-git插件可以正常安装，可参考<a href="https://zhuanlan.zhihu.com/p/56101093">技术小白搭建个人博客 —— hexo+github</a></p></blockquote><p>直接将public目录上传到github，然后直接访问<a href="https://shenmamuniu.github.io/">https://shenmamuniu.github.io/</a> 即可：</p><pre class="line-numbers language-none"><code class="language-none">git initgit add .git commit -m &quot;first commit&quot;git config user.name &quot;&quot;git config user.email &quot;&quot;git remote add origin xxgit branch -M maingit push -u origin main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里会涉及到登录，可生成一个<a href="https://blog.csdn.net/chengwenyang/article/details/120060010">github token</a></p><h2 id="图片问题"><a href="#图片问题" class="headerlink" title="图片问题"></a>图片问题</h2><p>修改配置文件_config.yml:</p><pre class="line-numbers language-none"><code class="language-none">post_asset_folder: true<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这样在执行hexo new 创建文章时，会创建一个同名的目录，把文章中的图片放到此目录中</p><p>安装插件:</p><pre class="line-numbers language-none"><code class="language-none">npm install hexo-asset-image -- save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果最终找不到图片，图片路径多出io等信息，修改hexo_assets-image中的index.js文件，在第24行：</p><pre class="line-numbers language-none"><code class="language-none">else &#123;    &#x2F;&#x2F; var endPos &#x3D; link.lastIndexOf(&#39;.&#39;);    var endPos&#x3D;link.length-1;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>markdown语法书写<code>(test)[xxx.jpg]</code>，<strong>不需要写相对路径，只需写图片名字.jpg即可</strong> </p><p>参考<a href="https://blog.csdn.net/Qyy2079628327/article/details/114859707">文档</a></p><h2 id="独立域名配置"><a href="#独立域名配置" class="headerlink" title="独立域名配置"></a>独立域名配置</h2><p>参考<a href="https://blog.csdn.net/v1coder/article/details/125109745">文档</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebGL系列之三：ThreeJS webgl or CesiumJS Webgl</title>
      <link href="/2022/08/28/139/"/>
      <url>/2022/08/28/139/</url>
      
        <content type="html"><![CDATA[<p>本文主要是来自cesium论坛的一个回答，问题是CesiumJS的shader是否和ThreejS中的兼容。</p><span id="more"></span><h2 id="Q"><a href="#Q" class="headerlink" title="Q"></a>Q</h2><p>Is shader of CesiumJS compatible with threeJs’s GLSL?</p><h2 id="A"><a href="#A" class="headerlink" title="A:"></a>A:</h2><p>@Marco13<br>The shader code itself is written in GLSL. So you can use all the built-in functionality of GLSL in your vertex- or fragment shader.</p><p>Using “pure” GLSL in WebGL can be a bit cumbersome. Even simple things require a lot of effort and care. That’s why libraries usually introduce structures for simplifying the use of custom shaders.</p><p>You mentioned three.js. You can have a look at an example of how they set up the shader for a ShaderMaterial in one of the examples: You have to say, for example, that the object has vertex colors 1 so that you can use the color in the shader 1. Similarly, values like the modelViewMatrix will automatically be filled with sensible values. If you wanted to do that with plain WebGL, you’d have to use low-level functions like gl.getUniformLocation and gl.uniformMatrix4fv just to set this single matrix! Or for short: three.js is doing a lot of work for you behind the scenes!</p><p>Similarly, the CustomShader of CesiumJS is simplifying the setup for you, so that you can focus on the “core” part that should be customized. And this part is exactly the implementation of the vertexMain or fragmentMain function: CesiumJS is setting up all the attributes and uniforms that are required, and collects them in the VertexInput and FragmentInput structures. These structures are passed to the vertexMain&#x2F;fragmentMain functions, where you can use them to implement custom behavior.</p><p>The following is overly simplified, but it can roughly be imagined like that:</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; Many attributes that are part of the model:attribute float position;attribute float color;attribute float texCoord;...&#x2F;&#x2F; Many uniforms that are part of the rendering setup...void main() &#123;    &#x2F;&#x2F; Collect all attributes in the VertexInput    VertexInput vertexInput;    vertexInput.attributes.positionMC &#x3D; position;    vertexInput.attributes.color &#x3D; color;    vertexInput.attributes.texCoord &#x3D; texCoord;        &#x2F;&#x2F; Pass the attributes to your main function:    vertexMain(vertexInput, ...)&#125;&#x2F;&#x2F;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x2F;&#x2F; You only have to write this part:void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput)&#123;    float customFactor &#x3D; 12.34;    vsOutput.positionMC &#x3D; vsInput.attributes.positionMC * customFactor;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>All the work that is required for setting up the attributes and uniforms with low-level WebGL calls is done by CesiumJS. You can focus on the part below the &#x3D;&#x3D;&#x3D;&#x3D; line in the example.</p><p>Further documentation, for example, for the VertexInput structure, can be found in the <a href="https://github.com/CesiumGS/cesium/tree/main/Documentation/CustomShaderGuide">CustomShaderGuide</a> 6</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>ThreeJS webgl和CesiumJS中的webgl都是更高层级的实现，封装了WebGL API中写法，简化了写法。因此在某些情况下，可能会显得不够用。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://community.cesium.com/t/is-shader-of-cesiumjs-compatible-with-threejss-glsl/17458">Is shader of CesiumJS compatible with threeJs’s GLSL</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 图形图像 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WebGL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebGL系列之二：基础概念</title>
      <link href="/2022/08/28/webgl-xi-lie-zhi-er-ji-chu-gai-nian/"/>
      <url>/2022/08/28/webgl-xi-lie-zhi-er-ji-chu-gai-nian/</url>
      
        <content type="html"><![CDATA[<p>本文来自网站<a href="https://webglfundamentals.org/">webglfundamentals</a>的前三节内容。</p><span id="more"></span><p>本文三个部分：基础概念、工作原理、Shaders和GLSL</p><h2 id="WebGL基础概念"><a href="#WebGL基础概念" class="headerlink" title="WebGL基础概念"></a>WebGL基础概念</h2><p>WebGL通常被认为是3D API，可以用来做一些很酷炫的3D的东西，实际上，它只是一个光栅化引擎，根据提供的点、线、三角形进行图形的绘制。它是在GPU中运行，因此相对来说运行速度会比较快(只要GPU性能够)。</p><p>WebGL的代码有2个部分组成：顶点着色器(vertex shader)和片元着色器(fragment shader)，shader使用一种强类型语言——GLSL语言来完成,一组vertex shader和fragment shader组成Program,一个Web应用中可能会有多个Program.关系大致如图所示：<br><img src="/2022/08/28/webgl-xi-lie-zhi-er-ji-chu-gai-nian/2828327738.png"></p><h3 id="两个着色器"><a href="#两个着色器" class="headerlink" title="两个着色器"></a>两个着色器</h3><h4 id="顶点着色器"><a href="#顶点着色器" class="headerlink" title="顶点着色器"></a>顶点着色器</h4><p>顶点着色器(Vertex shader)负责进行坐标转换，输出顶点的坐标，坐标范围[-1,1]。<br>一个顶点着色器的工作是生成裁剪空间坐标值，通常是以下的形式</p><pre class="line-numbers language-none"><code class="language-none">void main() &#123;   gl_Position &#x3D; doMathToMakeClipspaceCoordinates&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>每个顶点调用一次（顶点）着色器，每次调用都需要设置一个特殊的全局变量<code>gl_Position</code>，该变量的值就是裁减空间坐标值(Clip Space Coordinates)。</p><blockquote><p>注:这里的Clip Space Coordinates的翻译感觉不是很好。</p></blockquote><p>顶点着色器需要的数据，可以通过以下三种方式获得。</p><ol><li>[Attributes 属性](# attributes-) (从缓冲中获取的数据)</li><li>[Uniforms 全局变量](# uniforms-) (在一次绘制中对所有顶点保持一致值)</li><li>[Textures 纹理](# textures-) (从像素或纹理元素中获取的数据)</li></ol><h4 id="片元着色器"><a href="#片元着色器" class="headerlink" title="片元着色器"></a>片元着色器</h4><p>片元着色器(Fragment shader)负责计算颜色，输出像素的颜色。<br>一个片元着色器的工作是为当前光栅化的像素提供颜色值，通常是以下的形式</p><pre class="line-numbers language-none"><code class="language-none">precision mediump float;void main() &#123;   gl_FragColor &#x3D; doMathToMakeAColor;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>每个像素都将调用一次片断着色器，每次调用需要从你设置的特殊全局变量<code>gl_FragColor</code>中获取颜色信息。</p><p>片断着色器所需的数据，可以通过以下三种方式获取：</p><ol><li>[Uniforms 全局变量](# uniforms-) (values that stay the same for every pixel of a single draw call)</li><li>[Textures 纹理](# textures-) (data from pixels&#x2F;texels)</li><li>[Varyings 可变量](# varyings-) (data passed from the vertex shader and interpolated)</li></ol><h3 id="两类着色器中的参数-变量-的关键词"><a href="#两类着色器中的参数-变量-的关键词" class="headerlink" title="两类着色器中的参数(变量)的关键词"></a>两类着色器中的参数(变量)的关键词</h3><h4 id="Attributes-and-Buffers"><a href="#Attributes-and-Buffers" class="headerlink" title="Attributes and Buffers"></a>Attributes and Buffers</h4><p>Buffer是发送到GPU的一些二进制数据序列，通常情况下缓冲数据包括位置，法向量，纹理坐标，顶点颜色值等。<br>你可以存储任何数据。</p><p>Arribute用来指明怎么从缓冲中获取所需数据并将它提供给顶点着色器。</p><p>最常用的方法是缓冲和<strong>属性</strong>，在<a href="webgl-how-it-works.html">工作原理</a><br>中讲到了缓冲和属性，你可以创建缓冲，</p><pre class="line-numbers language-none"><code class="language-none">var buf &#x3D; gl.createBuffer();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>将数据存入缓冲</p><pre class="line-numbers language-none"><code class="language-none">gl.bindBuffer(gl.ARRAY_BUFFER, buf);gl.bufferData(gl.ARRAY_BUFFER, someData, gl.STATIC_DRAW);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>然后初始化的时候，在你制作的（着色）程序中找到属性所在地址</p><pre class="line-numbers language-none"><code class="language-none">var positionLoc &#x3D; gl.getAttribLocation(someShaderProgram, &quot;a_position&quot;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在渲染的时候告诉WebGL怎么从缓冲中获取数据传递给属性</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 开启从缓冲中获取数据gl.enableVertexAttribArray(positionLoc);var numComponents &#x3D; 3;  &#x2F;&#x2F; (x, y, z)var type &#x3D; gl.FLOAT;    &#x2F;&#x2F; 32位浮点数据var normalize &#x3D; false;  &#x2F;&#x2F; 不标准化var offset &#x3D; 0;         &#x2F;&#x2F; 从缓冲起始位置开始获取var stride &#x3D; 0;         &#x2F;&#x2F; 到下一个数据跳多少位内存                        &#x2F;&#x2F; 0 &#x3D; 使用当前的单位个数和单位长度 （ 3 * Float32Array.BYTES_PER_ELEMENT ）gl.vertexAttribPointer(positionLoc, numComponents, type, false, stride, offset);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<a href="webgl-fundamentals.html">WebGL 基础概念</a>中示范了不做任何运算直接将数据传递给<code>gl_Position</code>。</p><pre class="line-numbers language-none"><code class="language-none">attribute vec4 a_position;void main() &#123;   gl_Position &#x3D; a_position;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果缓冲中存的是裁剪空间坐标就没什么问题。</p><p>属性可以用 <code>float</code>, <code>vec2</code>, <code>vec3</code>, <code>vec4</code>, <code>mat2</code>, <code>mat3</code> 和 <code>mat4</code> 数据类型。</p><p>vec4:向量：vec4 a &#x3D; vec4(1, 2, 3, 4);<br>mat2:2x2矩阵</p><h4 id="Uniforms"><a href="#Uniforms" class="headerlink" title="Uniforms"></a>Uniforms</h4><p>全局变量，在着色程序运行前设置</p><h4 id="Textures"><a href="#Textures" class="headerlink" title="Textures"></a>Textures</h4><p>着色程序运行时可随意读取其中的数据，为数组类型，通常里面存放的是图片，当然也可以只放颜色。</p><h4 id="Varyings"><a href="#Varyings" class="headerlink" title="Varyings"></a>Varyings</h4><p>顶点着色器如果需要给片元着色器传递数据，那么可以使用它。<br>为了使用可变量，要在两个着色器中定义同名的可变量。<br>给顶点着色器中可变量设置的值，会作为参考值进行内插，在绘制像素时传给片断着色器的可变量。</p><h2 id="WebGL工作原理"><a href="#WebGL工作原理" class="headerlink" title="WebGL工作原理"></a>WebGL工作原理</h2><p>WebGL在GPU上的工作基本上分为2个部分， 第一部分将顶点坐标转到到Clip space vertices,第二部分就是基于坐标绘制像素。<br>这里有一个简单的例子：<br>假设你正在画三角形，顶点着色器每完成三次顶点处理，WebGL就会用这三个顶点画一个三角形。它计算出这三个顶点对应的像素后，就会光栅化这个三角形，“光栅化”其实就是“用像素画出来”的花哨叫法。对于每一个像素，它会调用你的片断着色器询问你使用什么颜色。你通过给片断着色器的一个特殊变量<code>gl_FragColor</code>设置一个颜色值，实现自定义像素颜色。</p><p>WebGL先获得顶点着色器中计算的三个颜色值，在光栅化三角形时将会根据这三个值进行插值。每一个像素在调用片断着色器时，可变量的值是与之对应的插值。想要给片断着色器传值，我们可以先把值传递给顶点着色器(varyings)然后再传给片断着色器。<br>这里有一张来自OpenGL的图形管线的图，大致的描述了如何从顶点坐标到渲染到屏幕的过程：</p><p><img src="/2022/08/28/webgl-xi-lie-zhi-er-ji-chu-gai-nian/416715407.png"></p><p>可阅读文章:<a href="https://duriansoftware.com/joe/an-intro-to-modern-opengl.-chapter-1:-the-graphics-pipeline">现代OpenGL简介</a></p><h2 id="GLSL"><a href="#GLSL" class="headerlink" title="GLSL"></a>GLSL</h2><h3 id="GLSL简介"><a href="#GLSL简介" class="headerlink" title="GLSL简介"></a>GLSL简介</h3><p>GLSL全称是 Graphics Library Shader Language （图形库着色器语言），是着色器使用的语言。它有一些不同于JavaScript的特性，主要目的是为栅格化图形提供常用的计算功能。所以它内建的数据类型例如<code>vec2</code>, <code>vec3</code>和 <code>vec4</code>分别代表两个值，三个值和四个值，<br>类似的还有<code>mat2</code>, <code>mat3</code> 和 <code>mat4</code> 分别代表 2x2, 3x3 和 4x4 矩阵。<br>你可以做一些运算例如常量和矢量的乘法。</p><pre class="line-numbers language-none"><code class="language-none">vec4 a &#x3D; vec4(1, 2, 3, 4);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>关于矩阵的计算和变换，有专门的库实现，如<a href="https://glmatrix.net/">glmatrix</a>,在此之前，可把线性代数部分熟悉一下。</p><h3 id="如何在js中使用glsl"><a href="#如何在js中使用glsl" class="headerlink" title="如何在js中使用glsl"></a>如何在js中使用glsl</h3><p>大致有两种方法：<br>1、js的script标签改为nojs或顶点片元着色器标记，如：</p><pre class="line-numbers language-none"><code class="language-none">&lt;script id&#x3D;&quot;vertexShader&quot; type&#x3D;&quot;x-shader&#x2F;x-vertex&quot;&gt;&lt;&#x2F;script&gt;&lt;script id&#x3D;&quot;fragmentShader&quot; type&#x3D;&quot;x-shader&#x2F;x-fragment&quot;&gt;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2.直接使用字符串拼接的形式加载</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>WebGL的全部内容就是创建不同的着色器，向着色器提供数据然后调用<code>gl.drawArrays</code>或 <code>gl.drawElements</code>让WebGL调用当前顶点着色器处理每个顶点，调用当前片断着色器渲染每个像素。<br>实际上创建着色器需要为数不多的几行代码，并且在大多数WebGL应用程序中都相似，因此一旦写完几乎可以不再关心它们了。<a href="webgl-boilerplate.html">在这里介绍如何编译GLSL并链接到着色程序</a>。<br>至此，WebGL的基础概念部分就到此结束了，后面的内容大部分都是介绍API相关的，如有兴趣，可继续在<a href="https://webglfundamentals.org/">webglfundamentals</a>学习。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://alisonmarket.lofter.com/post/2b1789_1c808c676">封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 图形图像 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WebGL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebGL系列之一：OpenGL vs. WebGL</title>
      <link href="/2022/08/28/webgl-xi-lie-zhi-yi-opengl-vs.webgl/"/>
      <url>/2022/08/28/webgl-xi-lie-zhi-yi-opengl-vs.webgl/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍WebGL的起源，同OpenGL、OpenGL ES之间的关系。</p><span id="more"></span><h2 id="OpenGL-And-OpenGL-ES"><a href="#OpenGL-And-OpenGL-ES" class="headerlink" title="OpenGL And OpenGL ES"></a>OpenGL And OpenGL ES</h2><p>OpenGL 就是 GPU 驱动 的一套标准接口;<br>OpenGL ES 为嵌入式设备 GPU 驱动（如手机）的标准接口， 全称：OpenGL for Embedded Systems,它是OpenGL的子集。</p><p>OpenGL 是可跨平台使用的 API，移动端使用 OpenGL ES 作为图形 API，苹果在 2014 年推出了 Metal 作为图形 API，但它们的一些专业名词、渲染过程等都是一样的。</p><p>无论是OpenGL、OpenGL ES、Metal的本质都是利用GPU芯片来实现高效的渲染图像，我们可以利用这些API操控GPU去完成我们想做的事,如：<br>1、游戏开发：游戏的场景、人物的渲染，这些都是由引擎去做的。<br>2、音视频开发：视频解码后变成了二进制数据，利用OpenGL将这些数据渲染到屏幕。<br>3、地图开发：地图引擎对地图数据的渲染<br>4、动画开发：实现动画的绘制<br>5、视频处理：视频滤镜开发</p><p>这两者之间最大差别就是<strong>两者应用场景不一样</strong>，一个是计算机，一个是移动或嵌入式设备。<br>这种差别体现在两个方面：<br>1、 <strong>窗口系统不一样。<br><strong>OpenGL ES 是一个平台中立的图形库，在它能够工作之前，需要于一个实际的窗口系统关联起来，这一点 OpenGL 也是一样的。<br>但是 <strong>OpenGL 时代在不同平台上有不同的机制一关联窗口系统，</strong>在 Windows上是wgl，在X-Window上市 xgl ,在 Apple OS 上是 agl 等。<br>而嵌入式市场的平台种类不计其数，单是学习各家手机操作系统的接口就是很大负担了，更不用说致力于支持各种尺寸平台的软件开发者，</strong>所以OpenGL ES 提供了Window Surface的抽象，使得移植工作基本可以局限在重新实现一下建立窗口的过程</strong>。<br>这个窗口工具是 EGL, 全称: <strong>embedded Graphic Interface</strong>,是 <strong>OpenGL ES 和底层 Native 平台 视窗系统之间的接口</strong>。<br>2、功能规模不一样。<br>嵌入式设备和移动设备追求的是高性能，<strong>因此 OpenGL ES 相对OpenGL 删减了一切低效能的操作方式</strong>，有高性能的决不留低效能的，即只求效能不求兼容性(和苹果的作风类似)。</p><h2 id="WebGL"><a href="#WebGL" class="headerlink" title="WebGL"></a>WebGL</h2><p>WebGL，是一项用来<strong>在网页上绘制和渲染复杂三维图形（3D图形），并允许用户与之交互的技术。</strong>随着个人计算机和浏览器的性能越来越强，我们能够在Web上创建越来越精美、越来越复杂的3D图形。从传统意义上来说，为了显示三维图形，开发者需要使用 C 或 C++ 语言，辅以专门的计算机图形库，如OpenGL或Direct3D，来开发一个独立的应用程序。现在<strong>有了 WebGL，我们只需要向已经熟悉的 HTML 和 JS 中添加一些额外的三维图形学的代码</strong>，就可以在网页上显示三维图形了。<strong>WebGL 是内嵌在浏览器中的，不必安装插件和库就可以直接使用它</strong>。</p><h2 id="三者之间的关系"><a href="#三者之间的关系" class="headerlink" title="三者之间的关系"></a>三者之间的关系</h2><p>OpenGL ES 可以说是 OpenGL 为了满足嵌入式设备需求而开发一个特殊版本，是其一个子集；而 <strong>WebGL，是为了网页渲染效果，将 JavaScript 和 OpenGL ES 2.0 结合在一起，通过增加 OpenGL ES 2.0 的一个JavaScript绑定得到</strong>。<br>基本关系如下:<br><img src="/2022/08/28/webgl-xi-lie-zhi-yi-opengl-vs.webgl/2967495361.png"></p><p>在实际应用过程中，前端的 <strong>WebGL 是通过 JS 语句，操作本地的OpenGL的部分接口，</strong>对于移动设备这是操作OpenGL ES的接口，来实现页面的图形的渲染，WebGL只是绑定外面接口的一层，内部的一些核心内容，如着色器，材质，灯光等都是需要借助 GLSL 语法来操作的。</p><p>三者之间的版本关系:</p><p><img src="/2022/08/28/webgl-xi-lie-zhi-yi-opengl-vs.webgl/2524471132.png"></p><h2 id="三者之间的区别"><a href="#三者之间的区别" class="headerlink" title="三者之间的区别"></a>三者之间的区别</h2><p><strong>WebGL 与其他 OpenGL 最大差别就是其可以通过 HTML 脚本本身实现 Web 交互式三维动画的制作，无需任何浏览器插件支持。</strong>至于OpenGL ES和OpenGL之间的区别见本文第一节OpenGL And OpenGL ES。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.jianshu.com/p/8a246e01a534">OpenGL&#x2F;OpenGL ES（一）基础知识</a><br><a href="https://duriansoftware.com/joe/an-intro-to-modern-opengl.-chapter-1:-the-graphics-pipeline">An intro to modern OpenGL. Chapter 1: The Graphics Pipeline</a><br><a href="https://melare.lofter.com/post/1f010e23_1c71032c6">封面</a></p>]]></content>
      
      
      <categories>
          
          <category> 图形图像 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WebGL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用POSTGIS的ST_Value函数查询栅格值</title>
      <link href="/2022/08/22/132/"/>
      <url>/2022/08/22/132/</url>
      
        <content type="html"><![CDATA[<p>之前查询dem值时，一直是在ArcServer发布DEM数据，然后通过调用服务的Identify方法来查询的,但由于ArcServer过于庞大,因此考虑用其它方法来替代，这里使用PostGIS的ST_Value函数来进行栅格的查询。</p><span id="more"></span><h2 id="dem数据导入到postgis"><a href="#dem数据导入到postgis" class="headerlink" title="dem数据导入到postgis"></a>dem数据导入到postgis</h2><pre class="line-numbers language-none"><code class="language-none">raster2pgsql.exe -s 4326 -C E:&#x2F;Data&#x2F;dem&#x2F;江津区_DEM.tif public.zjk | psql.exe -h localhost -p 5432 -U postgres -d dem_test -W<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ST-Value的使用"><a href="#ST-Value的使用" class="headerlink" title="ST_Value的使用"></a>ST_Value的使用</h2><pre class="line-numbers language-none"><code class="language-none">SELECT ST_Value(cqdem.rast,1, ST_SetSRID(ST_MakePoint(107.7,30.09),4326),false, &#39;bilinear&#39;)FROM public.cqdem<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>The allowed values of the resample parameter are “nearest” which performs the default nearest-neighbor resampling, and “bilinear” which performs a bilinear interpolation to estimate the value between pixel centers.</p></blockquote><p>如果需要坐标转换,geomeotry参数改为以下:<br>ST_Transform(ST_SetSRID(ST_MakePoint(lon,lat),4326),3035)</p><h2 id="遗留的问题"><a href="#遗留的问题" class="headerlink" title="遗留的问题"></a>遗留的问题</h2><p>1、当DEM数据计比较大时，可能会无法导入;<br>2、有的DEM数据即便使用了blinear插值，还是只能查询到整数的结果；</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://qastack.cn/gis/14960/postgis-raster-value-of-a-lat-lon-point">1、纬度&#x2F;经度点的PostGIS栅格值</a><br><a href="http://postgis.net/docs/RT_ST_Value.html">2、ST_Value</a><br><a href="https://lyla7784.lofter.com/post/30a15a3d_1c8923399">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 空间数据库 </tag>
            
            <tag> PostGIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python实现将Markdown转PDF</title>
      <link href="/2022/08/22/131/"/>
      <url>/2022/08/22/131/</url>
      
        <content type="html"><![CDATA[<p>由于Markdown在移动端读取稍微困难，因此存在将markdown文件转为PDF文档的需要。首先将markdown文件转为html,然后再用工具将html转为pdf文件。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:windows<br>Python:3.9</p><h2 id="文件遍历"><a href="#文件遍历" class="headerlink" title="文件遍历"></a>文件遍历</h2><pre class="line-numbers language-none"><code class="language-none"># md文件路径original_path &#x3D; u&#39;xxx&#x2F;xxx&#39; # 输出路径saved_path &#x3D; u&#39;xxx&#x2F;xxx&#39;for root,dirs,files in os.walk(original_path):    # for dir in dirs:    #     print(os.path.join(root,dir))            for file in files:        if file.endswith(&#39;md&#39;):            input&#x3D;os.path.join(root,file)            file &#x3D; file[:-2] + &#39;pdf&#39;            dirName&#x3D;&#39;&#39;            # 处理多级目录的情况            if root&#x3D;&#x3D;original_path:                dirName&#x3D;root.replace(original_path,&#39;&#39;)            else:                dirName&#x3D;root.replace(original_path+&#39;\\&#39;,&#39;&#39;)            # print(dirName)            dirOpt &#x3D; os.path.join(saved_path, dirName)            if not os.path.exists(dirOpt):                # 相比mkdir,此方法可创建多级目录                os.makedirs(dirOpt)            output&#x3D;os.path.join(dirOpt,file)            if not os.path.exists(output):                cvtMd2Pdf(input&#x3D;input,output&#x3D;output)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="markdown转pdf"><a href="#markdown转pdf" class="headerlink" title="markdown转pdf"></a>markdown转pdf</h2><pre class="line-numbers language-none"><code class="language-none">import pdfkitfrom markdown import markdownimport osdef cvtMd2Pdf(input,output):    with open(input, encoding&#x3D;&#39;utf-8&#39;) as f:        text &#x3D; f.read()    html &#x3D; markdown(text, output_format&#x3D;&#39;html&#39;,extensions&#x3D;[&#39;tables&#39;])  # MarkDown转HTML    htmltopdf &#x3D; r&#39;C:\\Program Files\\wkhtmltopdf\\bin\\wkhtmltopdf.exe&#39;    configuration &#x3D; pdfkit.configuration(wkhtmltopdf&#x3D;htmltopdf)    pdfkit.from_string(html, output_path&#x3D;output, configuration&#x3D;configuration, options&#x3D;&#123;&#39;encoding&#39;: &#39;utf-8&#39;&#125;)  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="缺点和不足"><a href="#缺点和不足" class="headerlink" title="缺点和不足"></a>缺点和不足</h2><p>1、存在某些文件转换失败的问题<br>2、转换效率不高</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.cnblogs.com/yibeimingyue/p/14678667.html?ivk_sa=1024320u">1、python遍历某个文件夹下的所有子文件夹及文件</a><br><a href="https://www.jb51.net/article/231989.htm">2、Python实战之markdown转pdf(包含公式转换)</a><br><a href="https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>局域网生成https证书</title>
      <link href="/2022/07/10/130/"/>
      <url>/2022/07/10/130/</url>
      
        <content type="html"><![CDATA[<p>通过mkcert生成证书,为局域网网站添加https支持。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:windows<br>mkcert:<a href="https://github.com/FiloSottile/mkcert">1.4.1</a><br>Nginx:1.20.2</p><h2 id="安装根证书到服务器"><a href="#安装根证书到服务器" class="headerlink" title="安装根证书到服务器"></a>安装根证书到服务器</h2><p>将下载的mkcert-v1.4.1-windows-amd64.exe重命名为mkcert,执行以下命令：</p><pre class="line-numbers language-none"><code class="language-none">mkcert -install<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>卸载<br>mkcert -uninstall</p></blockquote><h2 id="为应用服务器生成ssl证书"><a href="#为应用服务器生成ssl证书" class="headerlink" title="为应用服务器生成ssl证书"></a>为应用服务器生成ssl证书</h2><pre class="line-numbers language-none"><code class="language-none">mkcert -pkcs12 192.168.10.106 &#x2F;&#x2F;生成p12格式的正式iis可以用，默认密码为：“changeit”<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果需要为Nginx生成证书，可通过以下命令：</p><pre class="line-numbers language-none"><code class="language-none">mkcert 127.0.0.1 localhost &#x2F;&#x2F;后面还可以继续空格添加其他域名或IP地址，默认是pem格式<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此时会生成x.pme和x-key.pem两个文件，然后再Nginx配置：</p><p>Nginx ssl配置:</p><pre class="line-numbers language-none"><code class="language-none">listen 443 ssl;ssl_certificate   ..&#x2F;cert&#x2F;192.168.10.106.pem;ssl_certificate_key  ..&#x2F;cert&#x2F;192.168.10.106-key.pem;ssl_session_timeout 5m;ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;ssl_protocols TLSv1 TLSv1.1 TLSv1.2;ssl_prefer_server_ciphers on;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="生成客户端证书"><a href="#生成客户端证书" class="headerlink" title="生成客户端证书"></a>生成客户端证书</h2><pre class="line-numbers language-none"><code class="language-none">mkcert -pkcs12 -client 192.168.10.123&#x2F;&#x2F;生成p12格式客户端证书，win用户可以直接导入，默认密码为：“changeit”<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>直接安装即可。</p><blockquote><p>pem格式<br>mkcert -client 192.168.10.123 &#x2F;&#x2F;客户端证书，默认是pem格式</p></blockquote><h2 id="Nginx端口占用问题"><a href="#Nginx端口占用问题" class="headerlink" title="Nginx端口占用问题"></a>Nginx端口占用问题</h2><p>如遇到以下问题:<br>nginx: [emerg] bind() to 0.0.0.0:443 failed (10013: An attempt was made to access a socket in a way<br>按以下命令找到对应的进程,直接杀死即可：</p><pre class="line-numbers language-none"><code class="language-none">netstat -aon|findstr &quot;443&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://huadou145.lofter.com/post/205d4db3_1c81c6e8f">1、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> 应用安全 </tag>
            
            <tag> 运维 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C# 使用Topshelf安装windows服务</title>
      <link href="/2022/06/22/129/"/>
      <url>/2022/06/22/129/</url>
      
        <content type="html"><![CDATA[<p>最近在使用c# 控制台程序接收tcp数据时，经常运行一段时间后服务中断,需要和之前运行jar包一样，按下ctrl+c程序才会恢复,因此想到.net中将控制台程序转到后台运行,将其安装为windows服务。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:win10<br>IDE:vs2019<br>.NET版本:4.5.2<br>Topshelf:4.0.3</p><h2 id="Topshelf的安装"><a href="#Topshelf的安装" class="headerlink" title="Topshelf的安装"></a>Topshelf的安装</h2><p>通过visual studio的nuget包管理器安装topshelf包,支持的最低版本为.net framework4.5.2。</p><h2 id="Topshelf的使用"><a href="#Topshelf的使用" class="headerlink" title="Topshelf的使用"></a>Topshelf的使用</h2><p>创建一个控制台程序,添加如下内容:</p><pre class="line-numbers language-none"><code class="language-none">HostFactory.Run(x &#x3D;&gt; &#123;    x.Service&lt;TaskService&gt;();    x.RunAsLocalSystem();    x.SetDescription(description);    x.SetDisplayName(displayName);    x.SetServiceName(serviceName);&#125;);            Console.ReadKey();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加TaskService类:</p><pre class="line-numbers language-none"><code class="language-none">public class AISService : ServiceControl&#123;    public bool Start(HostControl hostControl)    &#123;            &#125;    public bool Stop(HostControl hostControl)    &#123;        &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加完之后，生成项目。</p><h2 id="服务安装和卸载"><a href="#服务安装和卸载" class="headerlink" title="服务安装和卸载"></a>服务安装和卸载</h2><p>在cmd窗口中，输入以下命令安装:</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;xxx.exe install<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>卸载：</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;xxx.exe uninstall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="c-程序以管理员身份运行程序"><a href="#c-程序以管理员身份运行程序" class="headerlink" title="c# 程序以管理员身份运行程序"></a>c# 程序以管理员身份运行程序</h2><p>添加应用程序清单文件，即app.manifest,将requestedExecutionLevel部分改为以下内容:</p><pre class="line-numbers language-none"><code class="language-none">&lt;requestedExecutionLevel  level&#x3D;&quot;requireAdministrator&quot; uiAccess&#x3D;&quot;false&quot; &#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://alisonmarket.lofter.com/post/2b1789_1c7361bf1#">1、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c# networkStream运行一段时候后连接丢失</title>
      <link href="/2022/06/21/128/"/>
      <url>/2022/06/21/128/</url>
      
        <content type="html"><![CDATA[<p>c# 在使用接收tcpserver中的数据时,经常运行一段时间后出现假死的状态，无法再接收数据，也没有报错信息，通过设置readTimeout来重新连接tcpserver实现数据的继续接收。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>应用环境：.net framework4.0<br>os:win10</p><h2 id="设置ReadTimeout参数"><a href="#设置ReadTimeout参数" class="headerlink" title="设置ReadTimeout参数"></a>设置ReadTimeout参数</h2><p>在读取网络流中的数据时，总是运行10分钟后连接就丢失，无法读取到数据了，可通过设置ReadTimeout参数，在指定的时间内如果读取不到网络流时,会报如下错误：</p><pre class="line-numbers language-none"><code class="language-none">无法从传输连接中读取数据: 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此时进入异常处理函数中，重新连接即可。</p><pre class="line-numbers language-none"><code class="language-none">try&#123;    tcpClient &#x3D; new TcpClient();    tcpClient.Connect(System.Net.IPAddress.Parse(this.ip), this.port);    networkStream &#x3D; tcpClient.GetStream();    networkStream.ReadTimeout &#x3D; 10000;&#125;catch(Exception ex)&#123;    &#x2F;&#x2F;重新连接逻辑代码&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.csdn.net/v6543210/article/details/85016784">1、C# 中NetworkStream类Read函数导致程序死机的问题</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8a36320">2、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C# Thread启动多线程</title>
      <link href="/2022/06/21/127/"/>
      <url>/2022/06/21/127/</url>
      
        <content type="html"><![CDATA[<p>仅对c# 中Thread类的使用做简单记录，至于使用多线程对应用程序性能带来的影响不在本文研究范围内，但在某些情况下多线程确实对程序的性能有很大的影响，还需结合具体的情况使用。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>开发环境:vs2010+.net framework4.0<br>OS:win10</p><h2 id="ThreadStart不带参数"><a href="#ThreadStart不带参数" class="headerlink" title="ThreadStart不带参数"></a>ThreadStart不带参数</h2><pre class="line-numbers language-none"><code class="language-none">Thread t &#x3D; new Thread(ConnectToServer,0);t.Start();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>其中ConnectToServer为函数名称</p></blockquote><h2 id="ThreadStart带一个参数"><a href="#ThreadStart带一个参数" class="headerlink" title="ThreadStart带一个参数"></a>ThreadStart带一个参数</h2><pre class="line-numbers language-none"><code class="language-none">Thread t2 &#x3D; new Thread(new ParameterizedThreadStart(InsertDb));t2.Start(reJson);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>这里函数的参数为object类型</p></blockquote><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.csdn.net/gubaofu/article/details/104648916">1、C# Thread启动线程时传递参数</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c84a2eba">2.封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows下jar包部署的web应用经常卡死无响应</title>
      <link href="/2022/06/21/126/"/>
      <url>/2022/06/21/126/</url>
      
        <content type="html"><![CDATA[<p>在windwos下运行java web应用时，总是出现程序中断的情况，控制台也没有错误输出,通过按ctrl+c就恢复正常,linux下却没有遇到到这种问题,通过使用javaw启动java应用程序来解决此问题。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS：windows</p><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>当在windows系统运行jar包服务时，使用doc窗口直接通过java -jar xxx.jar带来的两个弊端：</p><p>1、一个doc窗口只能运行一个服务，如果需要另外部署其他服务，需要再开一个doc窗口<br>2、服务会出现假死状态，网络、端口是通的，就是访问一直出现超时的问题</p><h2 id="jar包是不是卡死-接口无响应"><a href="#jar包是不是卡死-接口无响应" class="headerlink" title="jar包是不是卡死,接口无响应"></a>jar包是不是卡死,接口无响应</h2><p>可将Jar包的执行命令调整为:</p><pre class="line-numbers language-none"><code class="language-none">javaw -jar xx.jar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="windows-tomcat配置后台启动"><a href="#windows-tomcat配置后台启动" class="headerlink" title="windows tomcat配置后台启动"></a>windows tomcat配置后台启动</h2><p><a href="win10%E4%B8%8Btomcat%E5%90%8E%E5%8F%B0%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F">Tomcat后台启动</a>：<br>进入bin目录,打开setclasspath.bat文件,找到如下内容</p><pre class="line-numbers language-none"><code class="language-none">set_RUNJAVA&#x3D;&quot;%JRE_HOME%\bin\java&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>将其修改为:</p><pre class="line-numbers language-none"><code class="language-none">set_RUNJAVA&#x3D;&quot;%JRE_HOME%\bin\javaw&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后启动tomcat即可,此时cmd窗口不会再有输出，关闭即可。</p><h2 id="java、javaw、javaws的区别"><a href="#java、javaw、javaws的区别" class="headerlink" title="java、javaw、javaws的区别"></a>java、javaw、javaws的区别</h2><p>一句话总结:<br>java.exe用于启动window console控制台程序;<br>javaw.exe用于启动 GUI程序,而不会出现黑窗;<br>javaws.exe用于web程序。<br>具体可参考文末的链接2。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.csdn.net/millery22/article/details/123611593">1、windows环境下使用java -jar命令运行jar包出现假死问题</a><br><a href="https://www.jb51.net/article/189754.htm">2、java和 javaw 及 javaws的区别解析</a><br><a href="https://javapapers.com/core-java/java-vs-javaw-vs-javaws/">3、java vs javaw vs javaws</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c71e6ba8">4. 封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用javascript-obfuscator混淆js代码</title>
      <link href="/2022/06/16/125/"/>
      <url>/2022/06/16/125/</url>
      
        <content type="html"><![CDATA[<p>本文介绍代码js代码混淆工具javascript-obfuscator的基本使用。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:win7<br>NodeJS:12.22</p><h2 id="安装javascript-obfuscator"><a href="#安装javascript-obfuscator" class="headerlink" title="安装javascript-obfuscator"></a>安装javascript-obfuscator</h2><p>全局安装:</p><pre class="line-numbers language-none"><code class="language-none">npm install -g javascript-obfuscator<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>注:javascript-obfuscator对nodejs版本有要求,大版本支持12、14及以上;<br>win7需要安装nodejs 12.22</p></blockquote><h2 id="javascript-obfuscator的使用"><a href="#javascript-obfuscator的使用" class="headerlink" title="javascript-obfuscator的使用"></a>javascript-obfuscator的使用</h2><h3 id="对单个文件进行混淆"><a href="#对单个文件进行混淆" class="headerlink" title="对单个文件进行混淆"></a>对单个文件进行混淆</h3><pre class="line-numbers language-none"><code class="language-none">javascript-obfuscator xx.js --output xx.min.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="对整个文件加进行混淆"><a href="#对整个文件加进行混淆" class="headerlink" title="对整个文件加进行混淆"></a>对整个文件加进行混淆</h3><pre class="line-numbers language-none"><code class="language-none">javascript-obfuscator .&#x2F;xxx --output .&#x2F;xxxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>具体可参考<a href="https://github.com/javascript-obfuscator/javascript-obfuscator">javascript-obfuscator</a></p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://huadou145.lofter.com/post/205d4db3_1c7474e60">1、Cover</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代码混淆 </tag>
            
            <tag> 应用安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中获取前一天的时间</title>
      <link href="/2022/06/13/124/"/>
      <url>/2022/06/13/124/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍python中的时间差函数</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:win10<br>Python:3.9</p><h2 id="datetime获取当前时间"><a href="#datetime获取当前时间" class="headerlink" title="datetime获取当前时间"></a>datetime获取当前时间</h2><pre class="line-numbers language-none"><code class="language-none">import datetimedt&#x3D;datetime.datetime.now()uptime&#x3D;dt.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)print(uptime)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="timedelta"><a href="#timedelta" class="headerlink" title="timedelta"></a>timedelta</h2><p>timedelta有以下几个参数:<br>days&#x3D;0,seconds&#x3D;0,microseconds&#x3D;0,milliseconds&#x3D;0,minutes&#x3D;0,hours&#x3D;0,weeks&#x3D;0<br>可根据需要获取到前1天,前1分钟的的时间，如下获取到前10分钟的时间：</p><pre class="line-numbers language-none"><code class="language-none">dt&#x3D;datetime.datetime.now()yes_time &#x3D; dt + datetime.timedelta(minutes&#x3D;-10)uptime&#x3D;yes_time.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)print(uptime)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">1、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python查询mariadb数据库总是查到缓存的问题</title>
      <link href="/2022/06/13/123/"/>
      <url>/2022/06/13/123/</url>
      
        <content type="html"><![CDATA[<p>Python中操作Mariadb有多个包，这里用了mariadb和pymysql两种包，大体一致，可能mariadb这个包的部分类的函数没有pymysql那么丰富。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:win10<br>Mariadb(数据库软件):10.6<br>Python:3.9<br>PyMySQL:1.0.2<br>mariadb:1.0.11</p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>这里使用了tornado发布了一个服务，用来查询数据库中某个表的记录数，因为是实时数据展示，所以我这里查询还是比较快，但当我数据有更新时，这里返回的还是同一个值:</p><pre class="line-numbers language-none"><code class="language-none">import mariadbconn&#x3D; mariadb.connect(user&#x3D;&quot;xx&quot;, host&#x3D;&quot;localhost&quot;, database&#x3D;&quot;xxx&quot;, password&#x3D;&quot;xxx&quot;)class AisCountHandler(tornado.web.RequestHandler):    def post(self):        querySql&#x3D;&quot;select count(*) from jtb&quot;        cursor&#x3D; conn.cursor(buffered&#x3D;False)        cursor.execute(querySql)        result&#x3D;cursor.fetchone()[0]        self.write(str(result))    def options(self):        self.set_status(204)        self.finish()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="使用reset函数重置连接"><a href="#使用reset函数重置连接" class="headerlink" title="使用reset函数重置连接"></a>使用reset函数重置连接</h2><p>由于mariadb中的cursor这里没有close函数,因此猜测是连接的问题，因此在self.write前面调用重置连接函数即可：</p><pre class="line-numbers language-none"><code class="language-none">conn.reset()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>关于[Connection.reset()](<a href="https://mariadb-corporation.github.io/mariadb-connector-python/connection.html?highlight=connection#">https://mariadb-corporation.github.io/mariadb-connector-python/connection.html?highlight=connection#</a> mariadb.connections.Connection)<br>   Resets the current connection and clears session state and pending results. Open cursors will become invalid and cannot be used anymore.</p></blockquote><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">1、封面来源</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python使用pika操作RabbitMQ</title>
      <link href="/2022/06/13/122/"/>
      <url>/2022/06/13/122/</url>
      
        <content type="html"><![CDATA[<p>本文对pika的使用中遇到的几个问题做了简单的介绍：具体包括长连接、消息确认、连接断开的处理等。</p><span id="more"></span><h2 id="应用版本"><a href="#应用版本" class="headerlink" title="应用版本"></a>应用版本</h2><p>OS:win10<br>Python:3.9<br>Pika:1.2.1<br>RabbitMQ:3.10.5</p><h2 id="为什么要用消息队列"><a href="#为什么要用消息队列" class="headerlink" title="为什么要用消息队列"></a>为什么要用消息队列</h2><p>直接写入数据库效率比较低，时间稍微长一点，就会导致接收到的数据无法被及时处理。</p><h2 id="为什么要使用RabbitMQ"><a href="#为什么要使用RabbitMQ" class="headerlink" title="为什么要使用RabbitMQ"></a>为什么要使用RabbitMQ</h2><p>相比ActiveMQ、RocketMQ、Kafka,更喜欢RabbitMQ的文档,且有可视化界面，学习成本低。</p><h2 id="pika操作RabbitMQ"><a href="#pika操作RabbitMQ" class="headerlink" title="pika操作RabbitMQ"></a>pika操作RabbitMQ</h2><p><a href="https://www.rabbitmq.com/getstarted.html">RabbitMQ Tutorials</a>对RabbitMQ有非常详细的讲解，如果有比较深入的应用，可以具体了解，本文仅介绍基本使用以及几个比较重要的参数。</p><h3 id="生产者"><a href="#生产者" class="headerlink" title="生产者"></a>生产者</h3><p>这里以简单的代码为例，仅对其中几个重要的参数进行说明</p><pre class="line-numbers language-none"><code class="language-none">import pikatry:    connection &#x3D; pika.BlockingConnection(pika.ConnectionParameters(host&#x3D;&#39;localhost&#39;,heartbeat&#x3D;0))    channel &#x3D; connection.channel()    channel.queue_declare(queue&#x3D;&#39;hello&#39;,durable&#x3D;True)    channel.basic_publish(exchange&#x3D;&#39;&#39;,                        routing_key&#x3D;&#39;hello&#39;,                        body&#x3D;self.request.body,                        properties&#x3D;pika.BasicProperties(                            delivery_mode &#x3D; 2, # make message persistent                        ))    channel.close()    connection.close()except:    print(&quot;连接异常&quot;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>几个参数:<br>connection:heartbeat：心跳监测,0时为一直保持连接<br>channel:durable:是否持久化,即使Rabbitmq意外关闭时依旧可以恢复，同时还需要设置delivery_mode&#x3D;2</p></blockquote><h3 id="消费者"><a href="#消费者" class="headerlink" title="消费者"></a>消费者</h3><p>这里主要设置auto_ack为false,表示消息只有得到了确认之后才算消费完成，如果没有得到确认，还会收到此消息</p><pre class="line-numbers language-none"><code class="language-none">connection &#x3D; pika.BlockingConnection(pika.ConnectionParameters(host&#x3D;&#39;localhost&#39;))channel &#x3D; connection.channel()channel.queue_declare(queue&#x3D;&#39;hello&#39;)def callback(ch, method, properties, body):    print(&quot; [x] Received %r&quot; % body)    ch.basic_ack(delivery_tag &#x3D; method.delivery_tag)channel.basic_consume(queue&#x3D;&#39;hello&#39;, on_message_callback&#x3D;callback, auto_ack&#x3D;False)channel.start_consuming()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="关于连接断开的问题"><a href="#关于连接断开的问题" class="headerlink" title="关于连接断开的问题"></a>关于连接断开的问题</h3><p>在遇到网络中断的情况下，需要能够重新连接，<a href="https://pypi.org/project/pika/">pika的介绍页面</a>提供了2中方法：1种使用while循环，第二种是使用retry组件，具体如下:</p><h3 id="使用While循环"><a href="#使用While循环" class="headerlink" title="使用While循环"></a>使用While循环</h3><pre class="line-numbers language-none"><code class="language-none">import pikawhile True:    try:        connection &#x3D; pika.BlockingConnection()        channel &#x3D; connection.channel()        channel.basic_consume(&#39;test&#39;, on_message_callback)        channel.start_consuming()    # Don&#39;t recover if connection was closed by broker    except pika.exceptions.ConnectionClosedByBroker:        break    # Don&#39;t recover on channel errors    except pika.exceptions.AMQPChannelError:        break    # Recover on all other connection errors    except pika.exceptions.AMQPConnectionError:        continue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="使用retry"><a href="#使用retry" class="headerlink" title="使用retry"></a>使用retry</h3><pre class="line-numbers language-none"><code class="language-none">from retry import retry@retry(pika.exceptions.AMQPConnectionError, delay&#x3D;5, jitter&#x3D;(1, 3))def consume():    connection &#x3D; pika.BlockingConnection()    channel &#x3D; connection.channel()    channel.basic_consume(&#39;test&#39;, on_message_callback)    try:        channel.start_consuming()    # Don&#39;t recover connections closed by server    except pika.exceptions.ConnectionClosedByBroker:        pass        consume()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://melare.lofter.com/post/1f010e23_1c71032c6">1、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 消息队列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于PostGIS的等值线分析服务发布</title>
      <link href="/2022/05/30/121/"/>
      <url>/2022/05/30/121/</url>
      
        <content type="html"><![CDATA[<p>在用Cesium原生的等高线工具时，由于地形存在分级，不同级别下的地形的精度不同，因此生成的等高线也在时刻发生变化，且无法知道高程，给用户造成了一定的困惑。正好PostGIS3.2中提供了ST_Contour函数可生成等高线，本文即利用ST_Contour函数来生成等值线。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>PostGIS:3.2.1</p><p>Postgresql:14.3</p><p>OS:win10</p><p>python:3.9</p><h2 id="地形导入PostGIS数据库"><a href="#地形导入PostGIS数据库" class="headerlink" title="地形导入PostGIS数据库"></a>地形导入PostGIS数据库</h2><p>QGIS只提供矢量数据的导入，并未提供栅格数据的导入功能，这里可使用PostGIS安装目录下的raster2pgsql程序进行导入，命令如下：</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;raster2pgsql.exe -s 4326 -C E:&#x2F;Data&#x2F;dem&#x2F;江津区_DEM.tif public.dem | .&#x2F;psql.exe -h localhost -p 5432 -U postgres -d chongqing -W<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>关于参数说明，可通过以下命令查看</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;raster2pgsql.exe<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>提示:不能使用SuperMap IDesktop导入栅格数据，导入后的格式不太一样，会导致后面的ST_Contour函数无法使用。</p></blockquote><h2 id="使用ST-Contour函数"><a href="#使用ST-Contour函数" class="headerlink" title="使用ST_Contour函数"></a>使用ST_Contour函数</h2><p>使用如下sql语句进行查询:</p><pre class="line-numbers language-none"><code class="language-none">WITH c AS (SELECT (ST_Contour(rast, 1, fixed_levels &#x3D;&gt; ARRAY[1000.0, 1200.0, 1300.0])).*FROM public.&quot;dem&quot; WHERE rid &#x3D; 1)SELECT id, value,st_astext(geom)FROM c order by value asc;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ST_Contour函数的<a href="http://www.postgis.net/docs/manual-3.2/RT_ST_Contour.html">参数说明</a>:</p><table><thead><tr><th>参数名</th><th>说明</th></tr></thead><tbody><tr><td>level_interval</td><td>等值线间隔</td></tr><tr><td>fixed_levels</td><td>取固定的高程值</td></tr></tbody></table><h2 id="Python连接PostGIS提供REST服务"><a href="#Python连接PostGIS提供REST服务" class="headerlink" title="Python连接PostGIS提供REST服务"></a>Python连接PostGIS提供REST服务</h2><p>这里使用<a href="https://pypi.org/project/psycopg2/">psycopg2</a>连接postgis数据库,使用tornado提供REST服务。</p><p>安装psycopg2及tornado:</p><pre class="line-numbers language-none"><code class="language-none">pip install psycopg2 -i https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;pip install tornado -i https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>也可以下载whl文件离线安装:</p><pre class="line-numbers language-none"><code class="language-none">pip install xx.whl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>psycopg2的使用可<a href="https://www.cnpython.com/qa/83354">参考</a>,代码如下：</p><pre class="line-numbers language-none"><code class="language-none">import psycopg2conn &#x3D; psycopg2.connect(database&#x3D;&#39;postgis&#39;, user&#x3D;&#39;postgres&#39;)curs &#x3D; conn.cursor()# Find the distance within 1 km of point-of-interestpoi &#x3D; (-124.3, 53.2)  # longitude, latitude# Table &#39;my_points&#39; has a geography column &#39;geog&#39;curs.execute(&quot;&quot;&quot;\SELECT gid, ST_AsGeoJSON(geog), ST_Distance(geog, poi)FROM my_points, (SELECT ST_MakePoint(%s, %s)::geography AS poi) AS fWHERE ST_DWithin(geog, poi, 1000);&quot;&quot;&quot;, poi)for row in curs.fetchall():    print(row)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>tornado的使用：</p><pre class="line-numbers language-none"><code class="language-none">import tornado.ioloopimport tornado.webfrom tornado import ioloop, web, websocket, httpclientimport tornado.genfrom tornado.concurrent import run_on_executorfrom concurrent.futures import ThreadPoolExecutorimport tornado.httpserverclass IndexHandler(tornado.web.RequestHandler):    def get(self):    self.write(&#123;            &quot;data&quot;:result        &#125;)    def post(self):        lngMax&#x3D; float(self.get_argument(&#39;lngMax&#39;))        self.write(&#123;            &quot;data&quot;:result        &#125;)            def options(self):        self.set_status(204)        self.finish()class Application(tornado.web.Application):    def __init__(self):        handlers &#x3D; [            (r&#39;&#x2F;gisfunc&#x2F;rest&#x2F;contour&#39;, IndexHandler)        ]        tornado.web.Application.__init__(self, handlers,autoreload&#x3D;False, debug&#x3D;False)if __name__ &#x3D;&#x3D; &quot;__main__&quot;:    app &#x3D; Application()    app.listen(8866)      tornado.ioloop.IOLoop.current().start()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样前端就可以通过调用发布的REST服务进行等高线的绘制。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>这种方法在查询速度和准确性上相比其它方法都有明显的提升，但线段之间的平滑度不够，后续还需要在这方面进行优化。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://lyla7784.lofter.com/post/30a15a3d_1c8923399">1、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> PostGIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Geoserver+Postgis发布服务</title>
      <link href="/2021/10/08/geoserver-postgis-fa-bu-fu-wu/"/>
      <url>/2021/10/08/geoserver-postgis-fa-bu-fu-wu/</url>
      
        <content type="html"><![CDATA[<p>本文通过qgis+postgis+geoserver实现矢量数据的存储与数据共享。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:win8 x64<br>PostGIS:3.1.4<br>Postgresql:10.18.2<br>Geoserver:2.19.2<br>Tomcat:8.5.71<br>JDK:1.8.131<br>QGIS:3.16.11</p><h2 id="Postgresql和Postgis"><a href="#Postgresql和Postgis" class="headerlink" title="Postgresql和Postgis"></a>Postgresql和Postgis</h2><p>Postgresql为开源的关系型数据库，Postgis为在此基础上开发的支持空间数据存储与计算的扩展工具，为Postgresql提供了空间数据存储与计算的能力。</p><p>postgis对postgresql的版本支持可以参考此处<a href="https://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS">链接</a>,具体如下：<br><img src="/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1968459782.png" alt="postgis支持版本说明"></p><p>本文使用的是PostGIS版本为3.1.4,Postgresql版本为10.18.2.</p><h3 id="Postgresql数据库安装及初始化"><a href="#Postgresql数据库安装及初始化" class="headerlink" title="Postgresql数据库安装及初始化"></a>Postgresql数据库安装及初始化</h3><p>安装过程根据提示进行即可，安装完成之后，数据库初始化：</p><pre class="line-numbers language-none"><code class="language-none">C:\Program Files\PostgreSQL\10\bin\initdb.exe -D C:\pgdata -E UTF8 --locale&#x3D;Chinese<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>数据库启动：</p><pre class="line-numbers language-none"><code class="language-none">C:\Program Files\PostgreSQL\10\bin\pg_ctl.exe start -w -D C:\pgdata<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Postgis安装"><a href="#Postgis安装" class="headerlink" title="Postgis安装"></a>Postgis安装</h3><p>这里最好下载二进制安装包:postgis-bundle-pg10x64-setup-3.1.4-1.exe,根据提示进行安装就就好了，安装过程中会提示创建一个空间数据库postgis_31_sample。</p><h3 id="pgAdmin创建空间数据库"><a href="#pgAdmin创建空间数据库" class="headerlink" title="pgAdmin创建空间数据库"></a>pgAdmin创建空间数据库</h3><p>创建完数据库添加一个叫postgis的扩展就可以了支持存储空间数据了，如下图:<br><img src="/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1165327728.png"></p><h2 id="QGIS向postgis中导入矢量数据"><a href="#QGIS向postgis中导入矢量数据" class="headerlink" title="QGIS向postgis中导入矢量数据"></a>QGIS向postgis中导入矢量数据</h2><p>首先在右侧的Browser创建Postgis的连接：<br><img src="/2021/10/08/geoserver-postgis-fa-bu-fu-wu/586084083.png"><br>假定你已经在QGIS中加载了一个shapefile文件。<br>点击QGIS工具条的Database-&gt;Database Manager,打开下图所示界面：<br><img src="/2021/10/08/geoserver-postgis-fa-bu-fu-wu/4294453525.png"><br>找到刚刚创建的postgis数据库连接，并选中数据库，然后点击Import Layer即可，根据提示进行操作。</p><h2 id="geoserver连接postgis并发布图层服务"><a href="#geoserver连接postgis并发布图层服务" class="headerlink" title="geoserver连接postgis并发布图层服务"></a>geoserver连接postgis并发布图层服务</h2><p>1、 添加新的数据源，选择PostGIS,输入数据库连接信息；<br>2、 添加图层，设置图层信息发布即可</p><blockquote><p>注:geoserver默认用户名和密码:admin&#x2F;geoserver</p></blockquote><h2 id="tomcat控制台中文乱码"><a href="#tomcat控制台中文乱码" class="headerlink" title="tomcat控制台中文乱码"></a>tomcat控制台中文乱码</h2><p>windows默认编码集GBK,使用startup.bat启动tomcat时，从logging.properties读取到的编码为UTF-8,导致了乱码,将logging.properties中的以下属性调整为GBK即可:</p><pre class="line-numbers language-none"><code class="language-none">java.util.logging.ConsoleHandler.encoding &#x3D; GBK<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://blog.csdn.net/super712/article/details/89639583">1、windows下tomcat8控制台出现中文乱码问题</a><br><a href="https://www.cnblogs.com/gispathfinder/p/9286642.html">2、PostGIS安装</a><br><a href="https://blog.csdn.net/ljg124034929/article/details/70142420">3、GeoServer+PostGIS发布图层</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">4、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> geoserver </tag>
            
            <tag> PostgreSQL </tag>
            
            <tag> PostGIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Skyline BS加载本地影像数据</title>
      <link href="/2021/09/30/skyline-bs-jia-zai-ben-di-ying-xiang-shu-ju/"/>
      <url>/2021/09/30/skyline-bs-jia-zai-ben-di-ying-xiang-shu-ju/</url>
      
        <content type="html"><![CDATA[<p>一般情况下，我们会把数据做成Fly文件的形式在skyline平台加载，但有时也会有直接加载影像数据和文本数据的需求，本文主要为影像数据的加载说明。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>QGIS:3.16.6<br>Skyline:6.6.1<br>OS:windows server 2008 r2</p><h2 id="加载影像数据"><a href="#加载影像数据" class="headerlink" title="加载影像数据"></a>加载影像数据</h2><h3 id="CreateImageryLayer方法说明"><a href="#CreateImageryLayer方法说明" class="headerlink" title="CreateImageryLayer方法说明"></a>CreateImageryLayer方法说明</h3><p>skyline bs中有一个CreateImageryLayer方法，支持加载本地的影像数据，参数如下：<br><img src="/2021/09/30/skyline-bs-jia-zai-ben-di-ying-xiang-shu-ju/2e6f4a34b3edb207e1c4752f6f825e4b.png"><br>这里的影像数据只能使用用户本地的，不支持服务器的。</p><p>另外对于数据格式也有一定的要求,需要将tif格式的数据转为img格式的。</p><h3 id="QGIS将tif转为img格式"><a href="#QGIS将tif转为img格式" class="headerlink" title="QGIS将tif转为img格式"></a>QGIS将tif转为img格式</h3><p>输出模式这里选择：Rendered image,否则会是灰度图,配置如下：<br><img src="/2021/09/30/skyline-bs-jia-zai-ben-di-ying-xiang-shu-ju/1088210689.png"><br>然后就可以使用CreateImageryLayer方法在bs中加载了。</p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://huadou145.lofter.com/post/205d4db3_1c81c6e8f">1、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GIS </tag>
            
            <tag> Skyline </tag>
            
            <tag> 三维 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Echarts折线图之平滑设置及MarkPoint配置</title>
      <link href="/2021/09/30/echarts-zhe-xian-tu-zhi-ping-hua-she-zhi-ji-markpoint-pei-zhi/"/>
      <url>/2021/09/30/echarts-zhe-xian-tu-zhi-ping-hua-she-zhi-ji-markpoint-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>本文主要通过对echarts的几个属性设置，使echarts的折线图展示效果更好。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS: windows server 2008<br>Echarts:5.2</p><h2 id="折线平滑设置"><a href="#折线平滑设置" class="headerlink" title="折线平滑设置"></a>折线平滑设置</h2><p>设置smooth属性为true，如下:</p><pre class="line-numbers language-none"><code class="language-none">series: [    &#123;      name: &#39;Lowest&#39;,      type: &#39;line&#39;,      data: [1, -2, 2, 5, 3, 2, 0],      smooth:true    &#125;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="空数据连接"><a href="#空数据连接" class="headerlink" title="空数据连接"></a>空数据连接</h2><p>当数据中有空数据时，折线图可能会断掉，如下:<br><img src="/2021/09/30/echarts-zhe-xian-tu-zhi-ping-hua-she-zhi-ji-markpoint-pei-zhi/220754231.png"><br>将connectNulls设置为true即可：<br><img src="/2021/09/30/echarts-zhe-xian-tu-zhi-ping-hua-she-zhi-ji-markpoint-pei-zhi/418628742.png"></p><pre class="line-numbers language-none"><code class="language-none">series: [    &#123;      name: &#39;Lowest&#39;,      type: &#39;line&#39;,      data: [1, -2, 2, 5, 3, 2, 0],      smooth:true,      connectNulls:true    &#125;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="添加最大、最小值、平均线"><a href="#添加最大、最小值、平均线" class="headerlink" title="添加最大、最小值、平均线"></a>添加最大、最小值、平均线</h2><pre class="line-numbers language-none"><code class="language-none">series: [    &#123;      name: &#39;Highest&#39;,      type: &#39;line&#39;,      data: [10, 11, null, 11, 12, 12, 9],      connectNulls:true,      markPoint: &#123;        data: [          &#123; type: &#39;max&#39;, name: &#39;Max&#39; &#125;,          &#123; type: &#39;min&#39;, name: &#39;Min&#39; &#125;        ]      &#125;,      markLine: &#123;        data: [&#123; type: &#39;average&#39;, name: &#39;Avg&#39; &#125;]      &#125;    &#125;,<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://echarts.apache.org/examples/zh/editor.html?c=line-marker">1、Echarts折线图示例</a><br><a href="https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb">2、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Echarts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决优麒麟20.04应用更新后移动应用环境无法打开的问题</title>
      <link href="/2021/09/22/110/"/>
      <url>/2021/09/22/110/</url>
      
        <content type="html"><![CDATA[<p>优麒麟每次更新之后移动应用环境都无法打开，可以重新安装头文件包来解决。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:优麒麟20.04</p><h2 id="头文件的安装"><a href="#头文件的安装" class="headerlink" title="头文件的安装"></a>头文件的安装</h2><p>系统更新时，大概对内核进行了修改，因此需要重新安装头文件包来进行修复，如下：</p><pre class="line-numbers language-none"><code class="language-none">sudo apt install linux-headers-&#96;uname -r&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.ubuntukylin.com/ukylin/forum.php?mod=viewthread&tid=194309&highlight=%EF%BF%BD%C6%B6%EF%BF%BD%D3%A6%EF%BF%BD%EF%BF%BD">1、优麒麟 20.04 LTS Pro（0620更新版本），麒麟移动应用环境上线</a><br><a href="https://alisonmarket.lofter.com/post/2b1789_1c808c676">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArcServer发布数据量很大的服务卡死的解决方案</title>
      <link href="/2021/08/30/109/"/>
      <url>/2021/08/30/109/</url>
      
        <content type="html"><![CDATA[<p>在发布服务到ArcServer中时，由于数据量太大，有10+g，再加上服务器性能不是很好，很容易造成假死的状态。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS: win server 2016<br>ArcGIS:10.2</p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>在发布服务时，发现c盘的空间在不断的变小，这是因为没有将数据源注册到ArcServer服务器，导致每次发布都会把数据拷贝到c盘的一个staging目录，如果数据量比较大，再加上服务器性能不够时，就会出现ArcMap假死的情况。这里通过将数据源注册到ArcServer，避免了数量的拷贝过程，因此发布过程就变得很快了。</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>在发布时，有Analyse操作，如果提示了Data source is not registerd with the server…,可以双击此项警告以将数据源注册到ArcServer中去，再重新分析、发布就可以了。</p><h2 id="数据源注册vs不注册"><a href="#数据源注册vs不注册" class="headerlink" title="数据源注册vs不注册"></a>数据源注册vs不注册</h2><p>以下是数据源注册和不注册到ArcServer的区别:</p><table><thead><tr><th align="left">项目</th><th align="left">注册</th><th align="left">不注册</th></tr></thead><tbody><tr><td align="left">发布速度</td><td align="left">非常快</td><td align="left">数据量大时很慢</td></tr><tr><td align="left">数据同步更新</td><td align="left">是</td><td align="left">否</td></tr><tr><td align="left">数据浏览速度</td><td align="left">不切图时相对较慢</td><td align="left">相对较快</td></tr></tbody></table><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/DayDreamEveryWhere/p/6830545.html">1、ArcGIS Server缓存清理</a><br><a href="https://www.cnblogs.com/zmbhfly/p/9548175.html">2、ArcGIS10.1如何将数据库注册到ARCSERVER服务器</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c84a2eba">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ArcServer </tag>
            
            <tag> ArcGIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to Install python or pip offline.</title>
      <link href="/2021/08/24/108/"/>
      <url>/2021/08/24/108/</url>
      
        <content type="html"><![CDATA[<p>This article is about how to install python on linux system and how to install pip package offline.Hope it will help you.</p><span id="more"></span><h2 id="Applicaton-Enviroment"><a href="#Applicaton-Enviroment" class="headerlink" title="Applicaton Enviroment"></a>Applicaton Enviroment</h2><p>OS:centos7.8<br>python:3.9</p><h2 id="Install-python"><a href="#Install-python" class="headerlink" title="Install python"></a>Install python</h2><h3 id="Basic-Enviorment"><a href="#Basic-Enviorment" class="headerlink" title="Basic Enviorment"></a>Basic Enviorment</h3><p>When python goes to 3.7 or later,it needs libffi-devel installed in advanced.You can excute command like this:</p><pre class="line-numbers language-none"><code class="language-none">yum install libffi-devel<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>You can also install it offline if you couldn’t access the internet.Find the rpm package and excute like this:</p><pre class="line-numbers language-none"><code class="language-none">rpm -ivh libffi-3.0.5-3.2.AXS4.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Maybe you will meet an error about dependency,then you can add this the end of last command like this:</p><pre class="line-numbers language-none"><code class="language-none">rpm -ivh libffi-3.0.5-3.2.AXS4.x86_64.rpm --nodeps --force <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>If you don’t have gcc installed,you should install it too.You can reference the passage[1]or[6].</p></blockquote><h3 id="Start-install"><a href="#Start-install" class="headerlink" title="Start install"></a>Start install</h3><p><strong>Unzip your python install package,then excute commands like this:</strong></p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;python3  makemake install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>Create soft link for python3 and pip3</strong></p><pre class="line-numbers language-none"><code class="language-none">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;python3 &#x2F;usr&#x2F;bin&#x2F;python3ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;pip3 &#x2F;usr&#x2F;bin&#x2F;pip3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>Add python path to system environment variables.</strong><br>Open &#x2F;etc&#x2F;profile the add the following code to its end line:</p><pre class="line-numbers language-none"><code class="language-none">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Install-pip-package-offline"><a href="#Install-pip-package-offline" class="headerlink" title="Install pip package offline"></a>Install pip package offline</h2><p>You can download pip package on this website:<a href="https://pypi.org/.Find">https://pypi.org/.Find</a> the package you want then unzip it.Use the following command to install:</p><pre class="line-numbers language-none"><code class="language-none">pip3 install tornado-6.1&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Maybe you would meet some new problem when you install python or pip offline.Hope you can get new idea from the next charpter’s links. Good luck!</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.lightmao.cn/2021/05/07/98/">1、升级Nginx的Openssl版本</a><br><a href="https://www.cnblogs.com/ming-4/p/11700663.html">2、安装rpm包时提示错误：依赖检测失败的解决方法 </a><br><a href="https://blog.csdn.net/qq_42353939/article/details/94609591">3、Python安装报错：”ModuleNotFoundError:No module named _ctypes“ 的解决方案 </a><br><a href="https://www.cnblogs.com/guo2733/p/11459144.html">4、linux下安装python </a><br><a href="https://www.cnblogs.com/zhaoxd07/p/5190560.html">5、linux安装tornado </a><br><a href="https://blog.csdn.net/qq_36416904/article/details/79316972">6、No module named ‘ctypes’</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7474e60">7、Cover</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArcGIS DEM高程放大</title>
      <link href="/2021/08/12/106/"/>
      <url>/2021/08/12/106/</url>
      
        <content type="html"><![CDATA[<p>在对DEM数据进行可视化的时候，如果我们的地形起伏较小，那为了有更好的显示效果，我们通过会对地形起伏放大处理。</p><span id="more"></span><h2 id="基本环境"><a href="#基本环境" class="headerlink" title="基本环境"></a>基本环境</h2><p>软件：win10+ArcMap10.6<br>数据：某区域DEM数据</p><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><p>把DEM中的像素点的值进行放大处理处理，这里统一乘以x倍：</p><p>在ArcMap中，找到SpatialAnalystTools-&gt;Math-&gt;Times,然后输入栅格及放大的倍数即可。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://melare.lofter.com/post/1f010e23_1c71032c6">1、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ArcGIS </tag>
            
            <tag> DEM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>html+vue+elmentui实现组件动态切换</title>
      <link href="/2021/06/25/105/"/>
      <url>/2021/06/25/105/</url>
      
        <content type="html"><![CDATA[<p>最近要为运行在ie8上的老系统整理一个配置管理的界面，主要是对系统配置进行修改，前端使用的是html+vue，服务端采用的是asp.net。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:win10<br>开发环境：.net framework 4.0</p><h2 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h2><p>不能打包，需要选择能够直接修改更新的方案，因此前端只能使用html,后端考虑到现有的环境就是windows，因此直接使用asp.net website开发，实现快速更新。</p><h2 id="创建vue组件"><a href="#创建vue组件" class="headerlink" title="创建vue组件"></a>创建vue组件</h2><p>这里创建一个组件，config.vue</p><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;...&lt;&#x2F;template&gt;&lt;script&gt;module.exports&#x3D; &#123;  name: &quot;ConfigPanel&quot;,  data: function () &#123;  &#125;  ...&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="引入组件"><a href="#引入组件" class="headerlink" title="引入组件"></a>引入组件</h2><p>这里使用httpVueLoader在html中加载组件，先导入httpVueLoader:</p><pre class="line-numbers language-none"><code class="language-none">&lt;script type&#x3D;&quot;text&#x2F;javaScript&quot; src&#x3D;&quot;.&#x2F;http-vue-loader.js&quot;&gt;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>引入组件：</p><pre class="line-numbers language-none"><code class="language-none">components: &#123;            &#39;config&#39;:httpVueLoader(&#39;.&#x2F;components&#x2F;config.vue&#39;)&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>使用组件</p><pre class="line-numbers language-none"><code class="language-none">&lt;config&gt;&lt;&#x2F;config&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="动态切换组件"><a href="#动态切换组件" class="headerlink" title="动态切换组件"></a>动态切换组件</h2><p>使用component，动态修改comName的值即可，如下：</p><pre class="line-numbers language-none"><code class="language-none">&lt;componet :is&#x3D;&quot;comName&quot;&gt;&lt;&#x2F;componet&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在结合element-ui中的导航菜单，就可以实现一个简单的配置管理界面啦。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.npmjs.com/package/http-vue-loader">1、http-vue-loader</a><br><a href="https://www.cnblogs.com/kinoko-1009/p/10589371.html">2、Vue–动态组件实现组件切换</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8a36320">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASP.NET </tag>
            
            <tag> VUE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用webpack对代码压缩混淆</title>
      <link href="/2021/06/02/103/"/>
      <url>/2021/06/02/103/</url>
      
        <content type="html"><![CDATA[<p>本文对webpack的基本使用作简单的介绍，从js、css的打包，到代码的混淆，希望对初步学习webpack的你有帮助。</p><span id="more"></span><h2 id="软件版本"><a href="#软件版本" class="headerlink" title="软件版本"></a>软件版本</h2><p>webpack 5.38.1<br>webpack-cli 4.7.0<br>node:v14.17.0</p><h2 id="webpack的安装"><a href="#webpack的安装" class="headerlink" title="webpack的安装"></a>webpack的安装</h2><pre class="line-numbers language-none"><code class="language-none">npm install webpack webpack-cli -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="对单个js文件进行压缩"><a href="#对单个js文件进行压缩" class="headerlink" title="对单个js文件进行压缩"></a>对单个js文件进行压缩</h2><p>创建一个test.js文件，添加如下内容:</p><pre class="line-numbers language-none"><code class="language-none">document.write(&#39;It works from runoob2.js&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建一个index.html,内容如下:</p><pre class="line-numbers language-none"><code class="language-none">&lt;html&gt;    &lt;head&gt;        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;        &lt;title&gt;Hello world&lt;&#x2F;title&gt;        &lt;script src&#x3D;&quot;.&#x2F;dist&#x2F;main.js&quot;&gt;&lt;&#x2F;script&gt;    &lt;&#x2F;head&gt;    &lt;body&gt;    &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用webpack对test.js进行压缩: </p><pre class="line-numbers language-none"><code class="language-none">webpack .&#x2F;test.js --mode producation<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开index.html文件，查看test.js文件压缩后，里面的内容是否被成功调用。</p><h2 id="对多个js文件进行压缩"><a href="#对多个js文件进行压缩" class="headerlink" title="对多个js文件进行压缩"></a>对多个js文件进行压缩</h2><p>同样的，我们创建test2.js,内容如下:</p><pre class="line-numbers language-none"><code class="language-none">module.exports &#x3D; &quot;It works from runoob2.js.&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>并将test.js中的内容修改为如下：</p><pre class="line-numbers language-none"><code class="language-none">document.write(require(&quot;.&#x2F;test2.js&quot;));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打包</p><pre class="line-numbers language-none"><code class="language-none">webpack .&#x2F;test.js .&#x2F;test2.js --mode porducation<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>再次访问index.html，查看是否正常</p><h2 id="调用js中的函数"><a href="#调用js中的函数" class="headerlink" title="调用js中的函数"></a>调用js中的函数</h2><p>接下来，我们创建test3.js，里面添加一个函数，然后在index.html中调用.<br>test3.js内容如下:</p><pre class="line-numbers language-none"><code class="language-none">window.clearSgline &#x3D; function  () &#123;    console.log(&quot;test function &quot;)&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>提示：如果不这么写，index.html中调用不到，可参考文末链接</p></blockquote><p>在index.html中调用函数clearSgline,如下：</p><pre class="line-numbers language-none"><code class="language-none">&lt;body&gt;    window.onload&#x3D;function()&#123;        clearSgline();    &#125;&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改test.js文件，引入test3.js,如下:</p><pre class="line-numbers language-none"><code class="language-none">require(&#39;.&#x2F;test3.js&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打包:</p><pre class="line-numbers language-none"><code class="language-none">webpack .&#x2F;test.js .&#x2F;test2.js .&#x2F;test3.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在浏览器中查看index.html,观察函数是否被成功调用</p><h2 id="webpack打包css文件"><a href="#webpack打包css文件" class="headerlink" title="webpack打包css文件"></a>webpack打包css文件</h2><p>Webpack 本身只能处理 JavaScript 模块，如果要处理其他类型的文件，就需要使用 loader 进行转换。</p><p>安装css-loader和style-loader</p><pre class="line-numbers language-none"><code class="language-none">npm install css-loader style-loader --save-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>首先创建一个样式文件style.css，如下：</p><pre class="line-numbers language-none"><code class="language-none">body&#123;    background:yellowgreen;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>修改test.js文件，添加如下内容:</p><pre class="line-numbers language-none"><code class="language-none">require(&quot;!style-loader!css-loader!.&#x2F;style.css&quot;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>require CSS 文件的时候都要写 loader 前缀 !style-loader!css-loader!，当然我们可以根据模块类型（扩展名）来自动绑定需要的 loader</p><blockquote><p>到这里，其实可以发现test.js好似所有js和css的入口</p></blockquote><p>打包,</p><pre class="line-numbers language-none"><code class="language-none">webpack .&#x2F;test.js .&#x2F;test2.js .&#x2F;test3.js  --mode development<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>或者，在打包时指定需要的loader，修改test.js中style.css的引用，如下：</p><pre class="line-numbers language-none"><code class="language-none">require(&quot;.&#x2F;style.css&quot;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在打包时，加入对应的loader</p><pre class="line-numbers language-none"><code class="language-none">webpack .&#x2F;test.js .&#x2F;test2.js .&#x2F;test3.js  --mode development --module-bind &#39;css&#x3D;style-loader!css-loader&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="webpack配置文件的使用"><a href="#webpack配置文件的使用" class="headerlink" title="webpack配置文件的使用"></a>webpack配置文件的使用</h2><p>创建一个webpack.config.js,打包时就会直接使用它了，webpack.config.js内容如下：</p><pre class="line-numbers language-none"><code class="language-none">const path &#x3D;require(&#39;path&#39;);module.exports &#x3D; &#123;    entry: &quot;.&#x2F;test.js&quot;,    mode: &#39;production&#39;,    output: &#123;        path: path.join(__dirname,&#39;dist&#39;),        filename: &quot;bundle.js&quot;    &#125;,    module: &#123;        rules: [            &#123;                 test: &#x2F;\.css$&#x2F;,                use: [&#39;style-loader&#39;,&#39;css-loader&#39;] ,            &#125;        ]    &#125;&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>打包时使用以下命令即可：</p><pre class="line-numbers language-none"><code class="language-none">webpack <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="webpack代码混淆"><a href="#webpack代码混淆" class="headerlink" title="webpack代码混淆"></a>webpack代码混淆</h2><p>如果不想让其它人轻易的看到自己的代码，可以通过web-obfuscator插件对代码进行混淆。<br>安装：</p><pre class="line-numbers language-none"><code class="language-none">npm install --save-dev javascript-obfuscator webpack-obfuscator<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改webpack.config.js,如下：</p><pre class="line-numbers language-none"><code class="language-none">var WebpackObfuscator &#x3D; require(&#39;webpack-obfuscator&#39;);&#x2F;&#x2F; ...&#x2F;&#x2F; webpack plugins arrayplugins: [    new WebpackObfuscator (&#123;        rotateStringArray: true    &#125;, [&#39;excluded_bundle_name.js&#39;])]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>其中数组中的excluded_bundle_name.js为需要排除的文件<br>如果觉得混淆到此种程度还不够，那还可以添加更多的参数,具体有那些参数，在你安装完javascript-obfuscator之后，可以在其README.md文件中找到，或者参考文末提供的文章链接。</p></blockquote><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.runoob.com/w3cnote/webpack-tutorial.html">1、Webpack 入门教程</a><br><a href="https://segmentfault.com/q/1010000012739169/a-1020000012739755">2、webpack 打包后如何调用JS自定义函数？</a><br><a href="webpack%E5%AE%89%E8%A3%85css-loader,style-loader%E5%BF%83%E5%BE%97">3、webpack.config.js配置</a><br><a href="https://www.cnblogs.com/dragonir/archive/2021/02/25/14445767.html">4、vue项目配置 webpack-obfuscator 进行代码加密混淆</a><br><a href="https://www.npmjs.com/package/webpack-obfuscator">5、webpack代码混淆</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c71e6ba8">6、 封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJS </tag>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android ImageView加载gif图片</title>
      <link href="/2021/05/28/102/"/>
      <url>/2021/05/28/102/</url>
      
        <content type="html"><![CDATA[<p>默认情况下，ImageView中gif图片不能播放，通过glide来实现ImageView展示gif图片。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS：优麒麟20.04<br>Android Studio:4.2.1</p><h2 id="添加glide包"><a href="#添加glide包" class="headerlink" title="添加glide包"></a>添加glide包</h2><p>在build.gradle中添加glide,版本可从maven中查询：</p><pre class="line-numbers language-none"><code class="language-none">implementation group: &#39;com.github.bumptech.glide&#39;, name: &#39;glide&#39;, version: &#39;4.12.0&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ImageView中加载图片"><a href="#ImageView中加载图片" class="headerlink" title="ImageView中加载图片"></a>ImageView中加载图片</h2><pre class="line-numbers language-none"><code class="language-none">ImageView view&#x3D; (ImageView) findViewById(R.id.welcome_gif);Glide.with(this).load(R.drawable.loading).into(view);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这样，就能在ImageView中正常显示gif了。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/lyw-hunnu/p/12151807.html">1.Android studio 使用 ImageView 加载 gif 文件</a><br><a href="https://lyla7784.lofter.com/post/30a15a3d_1c8923399">2、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 移动端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Gif </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux为Android Studio创建快捷方式</title>
      <link href="/2021/05/26/101/"/>
      <url>/2021/05/26/101/</url>
      
        <content type="html"><![CDATA[<p>Linux下安装完AndroidStudio后没有自动创建桌面快捷方式，本文为AndroidSt udio创建桌面快捷方式的过程作简单记录。</p><span id="more"></span><h2 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h2><p>OS: 优麒麟20.04<br>AndroidStudio:4.2.1</p><h2 id="创建desktop文件"><a href="#创建desktop文件" class="headerlink" title="创建desktop文件"></a>创建desktop文件</h2><p>创建文件</p><pre class="line-numbers language-none"><code class="language-none">sudo touch 添加如下内容：&#x2F;usr&#x2F;share&#x2F;applications&#x2F;android_studio.desktop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>添加如下内容：</p><pre class="line-numbers language-none"><code class="language-none">[Desktop Entry]Type&#x3D;ApplicationName&#x3D;Android StudioExec&#x3D;&quot;&#x2F;opt&#x2F;android-studio&#x2F;bin&#x2F;studio.sh&quot; %fIcon&#x3D;&#x2F;opt&#x2F;android-studio&#x2F;bin&#x2F;studio.pngCategories&#x3D;development;IDE;Terminal&#x3D;falseStartupNotify&#x3D;trueStartupWMClass&#x3D;jetbrains-android-studio<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>其中&#x2F;opt&#x2F;android-studio 替换为你自己的android studio安装路径</p></blockquote><h2 id="增加可执行权限"><a href="#增加可执行权限" class="headerlink" title="增加可执行权限"></a>增加可执行权限</h2><pre class="line-numbers language-none"><code class="language-none">chmod +X &#x2F;usr&#x2F;share&#x2F;applications&#x2F;android_studio.desktop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建文件的快捷方式到桌面即可。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/lanma/p/5079702.html">1、ubuntu中在Launcher上添加Android Studio的运行图标</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">2、封面来源</a></p>]]></content>
      
      
      <categories>
          
          <category> 移动端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nexus管理员密码重置</title>
      <link href="/2021/05/21/100/"/>
      <url>/2021/05/21/100/</url>
      
        <content type="html"><![CDATA[<p>Nexus是一个强大的包管理管理，可以用它来搭建自己的maven、npm、nuget等私服。本文主要记录对Nexus管理员密码进行重置的过程。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS:Ubuntu 16.04<br>Nexus:3.25.0-03</p><h2 id="密码重置"><a href="#密码重置" class="headerlink" title="密码重置"></a>密码重置</h2><p>找到 sonatype-work&#x2F;nexus3&#x2F;db&#x2F;security&#x2F;user.pcl文件</p><pre class="line-numbers language-none"><code class="language-none">find &#x2F; -name user.pcl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>找到文件的如下地方：</p><pre class="line-numbers language-none"><code class="language-none">admin^ZAdministrator^HUser^Lactive&amp;tianya@zifangdt.com&lt;8c&gt;^B$shiro1$SHA-512$1024$NE+wqQq&#x2F;TmjZMvfI7ENh&#x2F;g&#x3D;&#x3D;$V4yPw8T64UQ6GfJfxYq2hLsVrBY8D1v+bktfOxGdt4b&#x2F;9BthpWPNUy&#x2F;CBk6V9iA0nHpzYzJFWO8v&#x2F;tZFtES8CA&#x3D;&#x3D;^Aÿÿÿÿÿÿÿÿÿþÿÿ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>把$和^之间的内容替换^Aÿÿÿÿÿÿÿÿÿþ成上面第二行的内容，修改后的密码为amdin123,用户名admin</p><blockquote><p>Tips:需要重启nexus</p></blockquote><h2 id="密码重置之后引起的数据库只读"><a href="#密码重置之后引起的数据库只读" class="headerlink" title="密码重置之后引起的数据库只读"></a>密码重置之后引起的数据库只读</h2><p>重置完密码之后，再次修改密码发现出现了以下问题：</p><pre class="line-numbers language-none"><code class="language-none">[&#39;user.pcl&#39; :1;], storage is switched to &#39;read only&#39; mode<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>user所在的security数据库变成了只读,此时需要把此数据库删除再新建，具体过程如下：</p><h3 id="备份数据库"><a href="#备份数据库" class="headerlink" title="备份数据库"></a>备份数据库</h3><pre class="line-numbers language-none"><code class="language-none">.&#x2F;nexus stopcp -r &#x2F;opt&#x2F;nexus&#x2F;sonatype-work&#x2F;nexus3&#x2F;db&#x2F;security &#x2F;opt&#x2F;nexus&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="数据库删除及恢复"><a href="#数据库删除及恢复" class="headerlink" title="数据库删除及恢复"></a>数据库删除及恢复</h3><p>到Nexus安装目录下&#x2F;lib&#x2F;support下，运行nexus-orient-console.jar</p><pre class="line-numbers language-none"><code class="language-none">java -jar nexus-orient-console.jar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后连接出错的数据库</p><pre class="line-numbers language-none"><code class="language-none">orientdb&gt; connect PLOCAL:&#x2F;opt&#x2F;nexus&#x2F;sonatype-work&#x2F;nexus3&#x2F;db&#x2F;security admin admin# 导出orientdb &#123;db&#x3D;security&#125;&gt; EXPORT DATABASE &#x2F;opt&#x2F;backup# 关闭连接orientdb &#123;db&#x3D;security&#125;&gt; DISCONNECT# 删除出问题的库orientdb&gt; DROP DATABASE PLOCAL:&#x2F;opt&#x2F;nexus&#x2F;sonatype-work&#x2F;nexus3&#x2F;db&#x2F;security admin admin# 重新创建出问题的库orientdb&gt; CREATE DATABASE PLOCAL:&#x2F;opt&#x2F;nexus&#x2F;sonatype-work&#x2F;nexus3&#x2F;db&#x2F;security admin admin# 导入orientdb &#123;db&#x3D;security&#125;&gt; IMPORT DATABASE &#x2F;backup&#x2F;backup.json.gz# 关闭连接orientdb &#123;db&#x3D;security&#125;&gt; DISCONNECT# 退出控制台orientdb&gt; EXIT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>重启nexus即可：</p><pre class="line-numbers language-none"><code class="language-none">nohup .&#x2F;nexus run &gt;nexus.out 2&gt;&amp;1 &amp;or.&#x2F;nexus start<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.51cto.com/ywliyq/2451936">1、nexus3.2重置admin密码</a><br><a href="https://blog.lightmao.cn/2020/07/24/67/">2、Nexus搭建Maven私服</a><br><a href="https://blog.csdn.net/mutian6655/article/details/112758278">3、Nexus因异常重启导致OrientDB数据库变为只读的问题修复</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c81c6e8f">4、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nexus </tag>
            
            <tag> 私服 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue组件的基本使用</title>
      <link href="/2021/05/21/99/"/>
      <url>/2021/05/21/99/</url>
      
        <content type="html"><![CDATA[<p>最近看代码时发现根据名称找不到组件的定义位置，因此就找了下vue组件的命名规范，大致就是组件声明及在脚本中按Pascal命名，在dom中按照kebab-case的方式引入即可。</p><span id="more"></span><h2 id="组件的命名"><a href="#组件的命名" class="headerlink" title="组件的命名"></a>组件的命名</h2><p>组件名称一般使用PascalCase命名方法，即每个单词的首字母大写，如下:Sm3dMeasure,在script中使用的时候，均按照这个命名来写。</p><p>但在template节点下引用的时候，则使用kebab-case，即每个单词之间用-来连接。如下：</p><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;    &lt;sm3d-measure&gt;&lt;&#x2F;sm3d-measure&gt;&lt;&#x2F;tempalte&gt;import Sm3dMeasure from &#39;@&#x2F;componets&#x2F;Measure&#x2F;Sm3dMeasure&#39;...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>关于命名更详细的说明可参考[Vue.js风格指南](<a href="https://cn.vuejs.org/v2/style-guide/#">https://cn.vuejs.org/v2/style-guide/#</a> %E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%90%8D%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90)</p></blockquote><h2 id="组件的使用"><a href="#组件的使用" class="headerlink" title="组件的使用"></a>组件的使用</h2><h3 id="组件的导入"><a href="#组件的导入" class="headerlink" title="组件的导入"></a>组件的导入</h3><pre class="line-numbers language-none"><code class="language-none">import Sm3dMeasure from &#39;@&#x2F;components&#x2F;Measure&#x2F;Sm2dMeasure.vue&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>其中@ 符号代表的是src目录,也可以使用.&#x2F;表示同级目录,..&#x2F;表示上级目录<br>这里的Sm3dMeasure可以看做是组件Sm2dMeasure的名字,可以和Sm2dMeasure.vue中定义的name属性不一致;</p></blockquote><h3 id="使用组件"><a href="#使用组件" class="headerlink" title="使用组件"></a>使用组件</h3><pre class="line-numbers language-none"><code class="language-none">componets:&#123;    Sm3dMeasure&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="在template下引入"><a href="#在template下引入" class="headerlink" title="在template下引入"></a>在template下引入</h3><pre class="line-numbers language-none"><code class="language-none">&lt;sm3d-measure&gt;&lt;&#x2F;sm3d-measure&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>注意此处使用kebab-case命名法</p></blockquote><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/e0yu/p/10795176.html">1、vue—组件引入及使用的几种方式</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">2. 封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>升级Nginx的Openssl版本</title>
      <link href="/2021/05/07/98/"/>
      <url>/2021/05/07/98/</url>
      
        <content type="html"><![CDATA[<p>叮咚，你家的系统又有漏洞了，这次是openssl相关的漏洞：CVE-2016-8610，本次记录漏洞修复过程，主要为升级opnessl至最新版。</p><span id="more"></span><h2 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置"></a>应用配置</h2><p>Nginx:1.18.0<br>Openssl:1.1.1k<br>OS:Asianux SP4</p><h2 id="升级Openssl版本"><a href="#升级Openssl版本" class="headerlink" title="升级Openssl版本"></a>升级Openssl版本</h2><h3 id="g-的安装"><a href="#g-的安装" class="headerlink" title="g++的安装"></a>g++的安装</h3><p>从源码编译Openssl需要g++,因此可以先看系统有没有安装g++:</p><pre class="line-numbers language-none"><code class="language-none">g++ -v<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果没有安装，需要安装g++,安装g++涉及到的库大概有10+，因此要有一定的耐心,可参考：</p><pre class="line-numbers language-none"><code class="language-none">rpm -ivh kernel-headers-2.6.32-431.20.3.el6.x86_64.rpmrpm -ivh glibc-headers-2.12-1.132.AXS4.2.x86_64.rpmrpm -ivh glibc-devel-2.12-1.132.AXS4.2.x86_64.rpmrpm -ivh mpfr-2.4.1-6.AXS4.x86_64.rpmrpm -ivh ppl-0.10.2-11.AXS4.x86_64.rpmrpm -ivh cloog-ppl-0.15.7-1.2.AXS4.x86_64.rpmrpm -ivh cpp-4.4.7-4.AXS4.x86_64.rpmrpm -ivh libgomp-4.4.7-4.AXS4.x86_64.rpmrpm -ivh gcc-4.4.7-4.AXS4.x86_64.rpmrpm -ivh libstdc++-devel-4.4.7-4.AXS4.x86_64.rpmrpm -ivh libstdc++-4.4.7-4.AXS4.x86_64.rpmrpm -ivh gcc-c++-4.4.7-4.AXS4.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>查看gcc版本：</p><pre class="line-numbers language-none"><code class="language-none">gcc -v<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="openssl的升级"><a href="#openssl的升级" class="headerlink" title="openssl的升级"></a>openssl的升级</h3><p>下载openssl的<a href="https://www.openssl.org/source/">最新版本</a>，这里下载的是1.1.1k<br>解压及进入目录:</p><pre class="line-numbers language-none"><code class="language-none">tar -zxvf openssl-1.1.1k.tar.gzcd openssl-1.1.1k<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>配置、编译、安装：</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;config --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;openssl --openssldir&#x3D;&#x2F;usr&#x2F;local&#x2F;openssl no-ssl2makemake install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>修改环境变量</p><pre class="line-numbers language-none"><code class="language-none">vi &#x2F;etc&#x2F;profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>末尾添加如下内容:</p><pre class="line-numbers language-none"><code class="language-none">export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;openssl&#x2F;bin:$PATHexport LD_LIBRARY_PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;openssl&#x2F;libexport LC_ALL&#x3D;&quot;en_US.UTF-8&quot;export LDFLAGS&#x3D;&quot;-L&#x2F;usr&#x2F;local&#x2F;openssl&#x2F;lib -Wl,-rpath,&#x2F;usr&#x2F;local&#x2F;openssl&#x2F;lib&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>保存并使环境变量刷新</p><pre class="line-numbers language-none"><code class="language-none">source &#x2F;etc&#x2F;profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>检查openssl版本</p><pre class="line-numbers language-none"><code class="language-none">openssl version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="重新安装Nginx"><a href="#重新安装Nginx" class="headerlink" title="重新安装Nginx"></a>重新安装Nginx</h2><blockquote><p>需要先停止在运行的Nginx</p></blockquote><p>查看已安装Nginx的配置：</p><pre class="line-numbers language-none"><code class="language-none">nginx -V<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置:</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configure --without-http_rewrite_module --with-http_ssl_module --with-openssl&#x3D;&#x2F;home&#x2F;user&#x2F;soft&#x2F;openssl-1.1.1k<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中with-openssl的参数值为openssl的源码地址<br>编译及安装:</p><pre class="line-numbers language-none"><code class="language-none">make&amp;make install<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此时再执行以下命令即可看到Nginx使用的Openssl版本</p><pre class="line-numbers language-none"><code class="language-none">nginx -V<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/music-liang/p/11888672.html">1、编译和安装openssl</a><br><a href="https://www.cnblogs.com/levcon/p/13409531.html">2、nginx升级并且使用最新版本openssl</a><br><a href="https://alisonmarket.lofter.com/post/2b1789_1c808c676">3、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> 安全 </tag>
            
            <tag> Openssl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>消息队列之RabbitMQ的基本使用-基于Python</title>
      <link href="/2021/04/30/97/"/>
      <url>/2021/04/30/97/</url>
      
        <content type="html"><![CDATA[<p>本文主要对RabbitMQ的几个概念以及基本使用作小结。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS:ubuntu+centos<br>Pika:1.2.0<br>python:3.7</p><h2 id="RabbitMQ的安装及配置"><a href="#RabbitMQ的安装及配置" class="headerlink" title="RabbitMQ的安装及配置"></a>RabbitMQ的安装及配置</h2><h3 id="centos8安装rabbitmq"><a href="#centos8安装rabbitmq" class="headerlink" title="centos8安装rabbitmq"></a>centos8安装rabbitmq</h3><pre class="line-numbers language-none"><code class="language-none">rpm -ivh erlang-23.1.4-1.el8.x86_64.rpmrpm -ivh socat-1.7.3.3-2.el8.x86_64.rpmrpm -ivh rabbitmq-server-3.8.9-1.el8.noarch.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="rabbitmq的启动"><a href="#rabbitmq的启动" class="headerlink" title="rabbitmq的启动"></a>rabbitmq的启动</h3><pre class="line-numbers language-none"><code class="language-none"># 开机启动chkconfig rabbitmq-server on&#x2F;sbin&#x2F;service rabbitmq-server start&#x2F;sbin&#x2F;service rabbitmq-server stoprabbitmq-plugins enable rabbitmq_management<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>放开15672端口：</p><pre class="line-numbers language-none"><code class="language-none">firewall-cmd --zone&#x3D;public --add-port&#x3D;15672&#x2F;tcp --permanentfirewall-cmd --reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这样就可以通过<a href="http://xx:15672来访问rabbitmq的管理界面了，默认用户名和密码：guest/guest，默认只能本地登录。">http://xx:15672来访问rabbitmq的管理界面了，默认用户名和密码：guest/guest，默认只能本地登录。</a></p><h3 id="添加用户并设置远程登录"><a href="#添加用户并设置远程登录" class="headerlink" title="添加用户并设置远程登录"></a>添加用户并设置远程登录</h3><pre class="line-numbers language-none"><code class="language-none">rabbitmqctl add_user test test123rabbitmqctl set_user_tags test administrator<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="RabbitMQ的几个基本概念"><a href="#RabbitMQ的几个基本概念" class="headerlink" title="RabbitMQ的几个基本概念"></a>RabbitMQ的几个基本概念</h2><p>生产者：发送消息<br>消费者：接收消息<br>队列：类似一个临时存储空间，存储消息的<br>Exchange:类似快递员，生产者都会把消息发送它，再由它发送到某个队列</p><h2 id="RabbitMQ的几种消息模型"><a href="#RabbitMQ的几种消息模型" class="headerlink" title="RabbitMQ的几种消息模型"></a>RabbitMQ的几种消息模型</h2><p>简单来说，就2类，一类是1条消息只能发送给1个人的，另一类是同一条消息会发送给多个人的订阅模型。<br><strong>one-to-one:</strong></p><blockquote><p>通常情况下，为了加快业务的处理速度，我们会用多个消费者来处理队列中的消息,这种就可以完全避免信息的重复处理</p></blockquote><p><strong>one-to-many:</strong></p><blockquote><p>这种我们称之为订阅模型，又包含多种类型，我们根据exchange_type进行区分<br>其对应的exchange_type有：fanout、direct、topic，这几个类型的区别在于消息过滤的灵活性。<br>其中：<br>fanout无法过滤消息，消费者只能拿到绑定的exchange的全部消息；<br>direct：可以根据关键字过滤，如日志的响应级别info、warn、error,只能拿其中一类或几类<br>topic:最为灵活，有*和# 两个特殊字符，前者匹配一个单词，后者匹配所有，即只要符合这个规则的消息都可以拿来。</p></blockquote><p>另外需要注意的是订阅模型中，拿不到历史消息，只能拿到实时消息。</p><h2 id="RabbitMQ的使用"><a href="#RabbitMQ的使用" class="headerlink" title="RabbitMQ的使用"></a>RabbitMQ的使用</h2><h3 id="临时队列"><a href="#临时队列" class="headerlink" title="临时队列"></a>临时队列</h3><pre class="line-numbers language-none"><code class="language-none">result &#x3D; channel.queue_declare(queue&#x3D;&#39;&#39;, exclusive&#x3D;True)queue_name &#x3D; result.method.queue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这里，exclusive为关闭连接之后就删除此队列</p><h3 id="消息持久化"><a href="#消息持久化" class="headerlink" title="消息持久化"></a>消息持久化</h3><pre class="line-numbers language-none"><code class="language-none">channel.queue_declare(queue&#x3D;&#39;hello&#39;, durable&#x3D;True)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>除此之外，在发布消息的时候，还需设置delivery_mode&#x3D;2</p><pre class="line-numbers language-none"><code class="language-none">channel.basic_publish(exchange&#x3D;&#39;&#39;,                      routing_key&#x3D;self.queue,                      body&#x3D;msg,                      properties&#x3D;pika.BasicProperties(                         delivery_mode &#x3D; 2, # make message persistent                      ))&#96;&#96;&#96;                     这样如果rabbitmq服务出现问题，重启后消息还会恢复,此种模式不适用于订阅模式。###  basic_qos通过设置prefech_count属性可以设置一次性从队列中拿到的消息个数。The client can request that messages be sent in advance so that when the client finishes processing a message, the following message is already held locally, rather than needing to be sent down the channel. Prefetching gives a performance improvement.###  应答确认机制默认情况下，auto\_ack属性为true，即自动回复确认消息，如果需要自定义回复时机，需要将auto\_ack的属性为false,然后在on\_message_callback中添加如下内容以回复确认：<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ch.basic_ack(delivery_tag &#x3D; method.delivery_tag)</p><pre class="line-numbers language-none"><code class="language-none">###  路由模式(routing)之绑定多个类型的消息一个队列可以同时绑定多个类别的消息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>channel.queue_bind(exchange&#x3D;self.exchange_name, queue&#x3D;queue_name,routing_key&#x3D;’info’)</p><p>channel.queue_bind(exchange&#x3D;self.exchange_name, queue&#x3D;queue_name,routing_key&#x3D;’error’)</p><pre class="line-numbers language-none"><code class="language-none">###  路由模式之Topic模式为了解决路由模式不够灵活的问题，提出了Topic模式,类似于标签，用句号隔开，如：baidu.com,google.com等这里有２个特殊的字符：&gt; * (star) can substitute for exactly one word.&gt; \# (hash) can substitute for zero or more words.其中\# 匹配所有，*代表一个单词##  python中使用rabbitmq###   pip安装pika下载pika包离线安装<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>pip3 install pika-1.1.0&#x2F;</p><pre class="line-numbers language-none"><code class="language-none">或在线安装：<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>pip install pika&#x3D;&#x3D;1.2.0</p><p>&#96;&#96;&#96;</p><blockquote><p>pip安裝指定版本的包<br>&#x3D;&#x3D;,&gt;&#x3D;,&lt;&#x3D;,&gt;,&lt;</p></blockquote><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/baiyifengyun/p/12446494.html">1、centos8安装RabbitMQ</a><br><a href="https://www.cnblogs.com/gongshun/p/10694659.html">2、RabbitMQ添加新用户并支持远程访问</a><br><a href="https://www.cnblogs.com/ithushuai/p/12443460.html">3、RabbitMQ使用详解</a><br><a href="https://lyla7784.lofter.com/post/30a15a3d_1c8923399">4、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 消息队列 </tag>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx結合http-flv模塊搭建視頻推流服務</title>
      <link href="/2021/04/27/96/"/>
      <url>/2021/04/27/96/</url>
      
        <content type="html"><![CDATA[<p>明明之前在centos上使用Nginx搭建視頻推流服務很順利，結果在Ubuntu上差點翻車，於是把遇到的問題簡單記錄一下。</p><span id="more"></span><h2 id="應用環境"><a href="#應用環境" class="headerlink" title="應用環境"></a>應用環境</h2><p>OS:Ubuntu 18.04<br>Nginx:1.20.0<br>http-flv:1.2.9</p><h2 id="Nginx配置"><a href="#Nginx配置" class="headerlink" title="Nginx配置"></a>Nginx配置</h2><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configure --add-module&#x3D;nginx-http-flv-module-1.2.9<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可能會提示缺少zlib、pcre、openssl：<br>對於zlib，這裏直接在其官網上下載zlib-1.2.11.tar.gz進行安裝</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configuremakemake install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>至於openssl,可通過以下命令安裝:</p><pre class="line-numbers language-none"><code class="language-none">apt install opensslapt install libssl-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>由於視頻推流不需要依賴pcre模塊的http-rewrite模塊，因此:</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configure --add-module&#x3D;nginx-http-flv-module-1.2.9 --without-http_rewrite_module<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>這裏也附上centos下這幾個包的安裝：<br>yum install zlib zlib-devel<br>yum install pcre pcre-devel<br>yum install openssl openssl-devel </p></blockquote><h2 id="Nginx安裝"><a href="#Nginx安裝" class="headerlink" title="Nginx安裝"></a>Nginx安裝</h2><p>執行以下命令進行安裝：</p><pre class="line-numbers language-none"><code class="language-none">makemake install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>這樣Nginx1.20就被安裝在了&#x2F;usr&#x2F;local&#x2F;nginx下，如果之前有安裝舊版本的Nginx，且Nginx是通過apt進行安裝的，需要把&#x2F;usr&#x2F;sbin下面的nginx刪掉或改爲其它名字，然後修改環境變量：<br>vi &#x2F;etc&#x2F;profile<br>添加如下內容：</p><pre class="line-numbers language-none"><code class="language-none">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>執行以下命令更新：</p><pre class="line-numbers language-none"><code class="language-none">source &#x2F;etc&#x2F;profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此時可以通過nginx -v查看Nginx是否生效。</p><h2 id="配置rtmp"><a href="#配置rtmp" class="headerlink" title="配置rtmp"></a>配置rtmp</h2><p>在http-flv模塊的<a href="https://github.com/winshining/nginx-http-flv-module">github</a>上，有關於rtmp的詳細配置，可以直接參考。</p><blockquote><p>另：如果你不想這麼麻煩，那麼也可以使用<a href="https://monibuca.com/">Monibuca</a>來部署視頻流服務器。</p></blockquote><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb">1、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> RTMP </tag>
            
            <tag> 推流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript正则表达式的使用</title>
      <link href="/2021/04/22/95/"/>
      <url>/2021/04/22/95/</url>
      
        <content type="html"><![CDATA[<p>使用Javascript中的正则大表达式对行政区划代码进行判断，确定是省级还是市级行政区划。</p><span id="more"></span><h2 id="正则表达式的语法"><a href="#正则表达式的语法" class="headerlink" title="正则表达式的语法"></a>正则表达式的语法</h2><h3 id="常用的元字符"><a href="#常用的元字符" class="headerlink" title="常用的元字符"></a>常用的元字符</h3><table><thead><tr><th align="left">代码</th><th align="left">说明</th><th align="center">反义代码</th></tr></thead><tbody><tr><td align="left">[0-9]</td><td align="left">匹配0~9中的任一数字</td><td align="center">&#x2F;</td></tr><tr><td align="left">[A-Z]</td><td align="left">匹配A~Z中的任一字母</td><td align="center">&#x2F;</td></tr><tr><td align="left">.</td><td align="left">匹配除换行符以外的任意字符，可以匹配中文字符</td><td align="center">&#x2F;</td></tr><tr><td align="left">\w</td><td align="left">字母、数字、下划线，相当于[A-Za-z0-9_]</td><td align="center">\W</td></tr><tr><td align="left">\d</td><td align="left">数字</td><td align="center">\D</td></tr><tr><td align="left">\s</td><td align="left">匹配任意的空白符，包括空格、制表符、换页符等</td><td align="center">\S</td></tr><tr><td align="left">^</td><td align="left">字符串的开始</td><td align="center">&#x2F;</td></tr><tr><td align="left">$</td><td align="left">字符串的结束</td><td align="center">&#x2F;</td></tr></tbody></table><h3 id="常用的限定符"><a href="#常用的限定符" class="headerlink" title="常用的限定符"></a>常用的限定符</h3><table><thead><tr><th align="left">代码</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">*</td><td align="left">重复0次或多次</td></tr><tr><td align="left">+</td><td align="left">1次或多次</td></tr><tr><td align="left">?</td><td align="left">0次或一次</td></tr><tr><td align="left">{n}</td><td align="left">n次</td></tr><tr><td align="left">{n,}</td><td align="left">重复n次或更多次</td></tr><tr><td align="left">{n,m}</td><td align="left">重复n次或m次</td></tr><tr><td align="left">()</td><td align="left">分组</td></tr></tbody></table><blockquote><p> <strong>提示：</strong> |  表示或</p></blockquote><h2 id="Javascript中正则表达式的使用"><a href="#Javascript中正则表达式的使用" class="headerlink" title="Javascript中正则表达式的使用"></a>Javascript中正则表达式的使用</h2><p>在 JavaScript 中，RegExp 对象是一个预定义了属性和方法的正则表达式对象。</p><h3 id="test"><a href="#test" class="headerlink" title="test()"></a>test()</h3><p>用于检查字符串中是否含有符合给定正则的对象，返回结果为true or false。<br>如下这里是判断行政区划代码是省或市</p><pre class="line-numbers language-none"><code class="language-none">var patt1&#x3D;new RegExp(&quot;0000&quot;);document.write(patt1.test(&quot;441000&quot;)); &#x2F;&#x2F;falsevar patt2&#x3D;new RegExp(&quot;[0-9]&#123;2&#125;((0[1-9])|[1-9][0-9])00&quot;);document.write(patt2.test(&quot;210100&quot;)); &#x2F;&#x2F;true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="exec"><a href="#exec" class="headerlink" title="exec()"></a>exec()</h3><p>获取正则匹配结果，返回结果为数组类型，没有匹配范围null。</p><pre class="line-numbers language-none"><code class="language-none">var patt1&#x3D;new RegExp(&quot;0000&quot;);document.write(patt1.exec(&quot;441000&quot;)+&quot;&lt;br&#x2F;&gt;&quot;); &#x2F;&#x2F;falsevar patt2&#x3D;new RegExp(&quot;[0-9]&#123;2&#125;((0[1-9])|[1-9][0-9])00&quot;);document.write(patt2.exec(&quot;210100&quot;)); &#x2F;&#x2F;truevar patt2&#x3D;new RegExp(&quot;[0-9]&#123;2&#125;((0[1-9])|[1-9][0-9])00&quot;);document.write(patt2.exec(&quot;211000&quot;)); &#x2F;&#x2F;true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出结果为：</p><pre class="line-numbers language-none"><code class="language-none">null210100,01,01210100,10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>其中正则表达式里面的（）标记一个子表达式的开始和结束位置，如果匹配到（）里面的内容，都会作为匹配结果中的一个对象。可以好好体会210100和211000这两个不同的输出结果。</p></blockquote><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.runoob.com/regexp/regexp-syntax.html">1、正则表达式 - 语法</a><br><a href="https://www.runoob.com/js/js-regexp.html">2、JavaScript 正则表达式</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle设置密码永不过期</title>
      <link href="/2021/04/21/94/"/>
      <url>/2021/04/21/94/</url>
      
        <content type="html"><![CDATA[<p>Oracle数据库的密码默认半年有效，过了时间再重启数据库可能就会连不上数据，为了方便使用故调整为密码永不过期。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Oracle:11g r2<br>OS:win server 2016</p><h2 id="设置密码永不过期"><a href="#设置密码永不过期" class="headerlink" title="设置密码永不过期"></a>设置密码永不过期</h2><p>1、查看用户的proifle是哪个，一般是default：</p><pre class="line-numbers language-none"><code class="language-none">SELECT username,PROFILE FROM dba_users;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2、查看指定概要文件（如default）的密码有效期设置：</p><pre class="line-numbers language-none"><code class="language-none">SELECT * FROM dba_profiles s WHERE s.profile&#x3D;&#39;DEFAULT&#39; AND resource_name&#x3D;&#39;PASSWORD_LIFE_TIME&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3、将密码有效期由默认的180天修改成“无限制”：</p><pre class="line-numbers language-none"><code class="language-none">ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>注意：</strong>此操作无需重启数据库;<br>如果用户密码已经过期，那么还需要重新设置一次密码，</p></blockquote><h2 id="解锁用户之后用户又被锁"><a href="#解锁用户之后用户又被锁" class="headerlink" title="解锁用户之后用户又被锁"></a>解锁用户之后用户又被锁</h2><p>这个情况发生下修改用户密码之后，这是因为此时有连接使用了旧的密码，而用户在登陆失败次数超过一定数目时会被锁定，因此如果出现解锁用户之后很快用户又被锁定，可以检查下有没有应用在一直使用了旧的密码连接数据库。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/kingwei55555/p/12127854.html">1、修改oracle用户密码永不过期</a><br><a href="https://jingyan.baidu.com/article/046a7b3ec43042f9c27fa937.html">2、Oracle 用户解锁之后总被锁住</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8f12e12">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安全 </tag>
            
            <tag> 数据库 </tag>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins自动打包NodeJS项目</title>
      <link href="/2021/04/20/93/"/>
      <url>/2021/04/20/93/</url>
      
        <content type="html"><![CDATA[<p>随着越来越多的前后端分离项目的落地，对于前端项目的自动化部署能力也随之而来。本文通过Jenkins+Git实现了前端项目的自动构建。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>Centos:7<br>Jenkins:容器安装<br>Node:14.16</p><h2 id="在Jenkins容器中安装NodeJS"><a href="#在Jenkins容器中安装NodeJS" class="headerlink" title="在Jenkins容器中安装NodeJS"></a>在Jenkins容器中安装NodeJS</h2><p>直接下载最新的NodeJS安装包，然后将其复制到jenkins容器中或主机中映射到jenkins容器中的那个目录。<br>解压nodejs(这里下载到的node为xz格式的)</p><pre class="line-numbers language-none"><code class="language-none">xz -d node-v14.16.1-linux-x64.tar.xztar -xvf node-v14.16.1-linux-x64.tar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>配置NodeJS环境变量</p><pre class="line-numbers language-none"><code class="language-none">export NODE_HOME&#x3D;&#x2F;xxx&#x2F;node-v14.16.1-linux-x64export PATH&#x3D;$PATH:$NODE_HOME&#x2F;binexport NODE_PATH&#x3D;$NODE_HOME&#x2F;lib&#x2F;node_modules<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>Tips</strong>：root账户登录jenkins容器：</p><pre class="line-numbers language-none"><code class="language-none">docker exec -ti -u root ContainerId &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后确认以下命令能够正确输出node和npm的版本</p><pre class="line-numbers language-none"><code class="language-none">node -vnpm -v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="Jenkins-Job配置"><a href="#Jenkins-Job配置" class="headerlink" title="Jenkins Job配置"></a>Jenkins Job配置</h2><h3 id="Jenkins配置NodeJS"><a href="#Jenkins配置NodeJS" class="headerlink" title="Jenkins配置NodeJS"></a>Jenkins配置NodeJS</h3><p>登录你的Jenkins,管理Jenkins-&gt;Global Tool Configuration中,配置NodeJS的目录。</p><h3 id="创建Job"><a href="#创建Job" class="headerlink" title="创建Job"></a>创建Job</h3><p>创建一个Freestyle Project，然后输入对应的参数，在构建环境那里勾选Provide Node&amp;npm 设置一个NodeJS的配置名称。<br>构建步骤：新增执行shell，命令如下：</p><pre class="line-numbers language-none"><code class="language-none">npm installnpm run build<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>保存之后，可以立即构建测试一下</p><h2 id="在Git中配置自动部署"><a href="#在Git中配置自动部署" class="headerlink" title="在Git中配置自动部署"></a>在Git中配置自动部署</h2><p>添加web钩子，地址如下：</p><pre class="line-numbers language-none"><code class="language-none">http:&#x2F;&#x2F;jenkins-location&#x2F;gogs-webhook&#x2F;?job&#x3D;jobname<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后测试一下，应该就可以每次合并代码的时候就会自动打包项目了。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.jianshu.com/p/14e356cf8bb4">1、Jenkins+Gogs搭建自动化部署平台</a><br><a href="https://www.cnblogs.com/vipzhou/p/7890016.html">2、jenkins学习之自动打包构建nodejs应用</a><br><a href="https://melare.lofter.com/post/1f010e23_1c71032c6">3、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Docker </tag>
            
            <tag> NodeJS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Npm全局安装VS本地安装、生产依赖VS开发依赖等概念</title>
      <link href="/2021/04/20/92/"/>
      <url>/2021/04/20/92/</url>
      
        <content type="html"><![CDATA[<p>nodejs、npm、vue等概念已经出现了很久，之前只是简单的使用，对其中的一些概念感觉有些模糊，本文就几个似识非识的概念一一明确。</p><span id="more"></span><h2 id="Npm是什么"><a href="#Npm是什么" class="headerlink" title="Npm是什么"></a>Npm是什么</h2><p>Npm是一个Javascript包管理工具,通过它我们可以下载项目所需要的各种Javascript类库，而无需互相拷贝，当然yarn也可以帮我们做这些事情。</p><h2 id="全局安装与本地安装"><a href="#全局安装与本地安装" class="headerlink" title="全局安装与本地安装"></a>全局安装与本地安装</h2><p>全局安装：</p><pre class="line-numbers language-none"><code class="language-none">npm install package_name -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当我们直接在terminal中使用包的命令时，需要全局安装，如vue-cli、docsify等工具，对于Jquery、element-ui等，我们只需要在当前项目中使用，那这种就不需要全局安装，此时在项目所在目录下执行以下命令即可：</p><pre class="line-numbers language-none"><code class="language-none">npm install element-ui --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="生产依赖与开发依赖"><a href="#生产依赖与开发依赖" class="headerlink" title="生产依赖与开发依赖"></a>生产依赖与开发依赖</h2><p>生产依赖即生产环境中所用到的依赖；开发依赖即开发环境中用到的依赖。因此究竟是安装为开发依赖还是生产依赖就是判断这个包我们在生产环境中是否用到。</p><h3 id="安装生产依赖："><a href="#安装生产依赖：" class="headerlink" title="安装生产依赖："></a>安装生产依赖：</h3><pre class="line-numbers language-none"><code class="language-none">npm install element-ui --saveornpm i element-ui -S<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>此后在package.json中的dependencies节点中就可以看到这个包。</p><h3 id="安装开发依赖："><a href="#安装开发依赖：" class="headerlink" title="安装开发依赖："></a>安装开发依赖：</h3><pre class="line-numbers language-none"><code class="language-none">npm install gulp-htmlmin --save-devornpm i gulp-htmlmin -D<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>假如我们用gulp对html进行压缩，我们通常会用到一个插件gulp-htmlmin。我们只希望它把html压缩完就ok了，并不希望它融入我们的项目代码中，即只存在于开发环境，因此把他归类为”开发依赖”，此后在package.json中的devependencies节点中就会看到这个包。</p><h2 id="package-json与package-lock-json"><a href="#package-json与package-lock-json" class="headerlink" title="package.json与package-lock.json"></a>package.json与package-lock.json</h2><p>package.json文件记录的是安装的软件的大版本，即每次npm install的时候都会根据这个文件里面的大版本去安装最新的版本。<br>而package-lock.json则锁定小版本，因此如果想要保证团队所有人用的软件的版本一致，就需要将package-lock.json分发给所有人。</p><p>额外的：npm安装指定版本的软件包命令：</p><pre class="line-numbers language-none"><code class="language-none">npm i element-ui@x.x.x --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/wjlbk/p/12633404.html">1、npm(你怕吗) 全局安装与本地安装、开发依赖和生产依赖</a><br><a href="https://www.cnblogs.com/web-record/p/10904907.html">2、npm安装时-S -D作用及区别</a><br><a href="https://www.cnblogs.com/tangjiao/p/9603677.html">3、package.json和package-lock.json的区别</a><br><a href="https://alisonmarket.lofter.com/post/2b1789_1c7361bf1#">4、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJS </tag>
            
            <tag> VUE </tag>
            
            <tag> NPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python矩阵和字符串的互相转换</title>
      <link href="/2021/04/20/91/"/>
      <url>/2021/04/20/91/</url>
      
        <content type="html"><![CDATA[<p>为了保存图像的特征数据，需要将特征矩阵进行保存及还原。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS：ubuntu18.04<br>Python:3.7</p><h2 id="矩阵转字符串"><a href="#矩阵转字符串" class="headerlink" title="矩阵转字符串"></a>矩阵转字符串</h2><pre class="line-numbers language-none"><code class="language-none">def matrix_to_str(mat):    return mat.tostring()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="tuple转字符串"><a href="#tuple转字符串" class="headerlink" title="tuple转字符串"></a>tuple转字符串</h2><p>矩阵的shape的数据类型为tuple，因此需要将其转为字符串</p><pre class="line-numbers language-none"><code class="language-none">def tuple_to_str(shape):    return shape.__str__()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="字符串转tuple"><a href="#字符串转tuple" class="headerlink" title="字符串转tuple"></a>字符串转tuple</h2><pre class="line-numbers language-none"><code class="language-none">def str_to_tuple(str):    return tuple(eval(str))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="字符串转矩阵"><a href="#字符串转矩阵" class="headerlink" title="字符串转矩阵"></a>字符串转矩阵</h2><pre class="line-numbers language-none"><code class="language-none">def str_to_matrix(str,shape):    return np.frombuffer(str,dtype&#x3D;np.float32).reshape(shape)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.jb51.net/article/78541.htm">1、Python字符串、元组、列表、字典互相转换的方法</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7474e60">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Numpy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7安装MariaDB</title>
      <link href="/2021/04/20/90/"/>
      <url>/2021/04/20/90/</url>
      
        <content type="html"><![CDATA[<p>最近在做数据迁移，顺便把mysql替换为mariadb.</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS:centos 7.6<br>Mariadb：10.5.9</p><p><strong>提示</strong>:关于mariadb的安装，网上有太多乱七八糟的教程了，最好的办法还是参考mariadb官网文档。</p><h2 id="软件下载"><a href="#软件下载" class="headerlink" title="软件下载"></a>软件下载</h2><pre class="line-numbers language-none"><code class="language-none">wget https:&#x2F;&#x2F;mirrors.cloud.tencent.com&#x2F;mariadb&#x2F;mariadb-10.5.9&#x2F;bintar-linux-systemd-x86_64&#x2F;mariadb-10.5.9-linux-systemd-x86_64.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="删除已安装的mysql-or-mariadb"><a href="#删除已安装的mysql-or-mariadb" class="headerlink" title="删除已安装的mysql or mariadb"></a>删除已安装的mysql or mariadb</h2><p>这里不仅需要移除mariadb，如果有mysql,也要移除</p><pre class="line-numbers language-none"><code class="language-none">rpm -qa | grep mariadbrpm -ev mariadb-libs-5.5.68-1.el7.x86_64 --nodepsfind &#x2F; -name mysql # 删除查询出来的文件夹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="创建用户和组"><a href="#创建用户和组" class="headerlink" title="创建用户和组"></a>创建用户和组</h2><pre class="line-numbers language-none"><code class="language-none">groupadd mysqluseradd -r -g mysql mysqlchown -R mysql:mysql &#x2F;usr&#x2F;local&#x2F;mysql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="创建数据目录"><a href="#创建数据目录" class="headerlink" title="创建数据目录"></a>创建数据目录</h2><pre class="line-numbers language-none"><code class="language-none">chown -R mysql:mysql &#x2F;opt&#x2F;data&#x2F;mariadb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="配置数据库的配置文件"><a href="#配置数据库的配置文件" class="headerlink" title="配置数据库的配置文件"></a>配置数据库的配置文件</h2><p>mariadb默认使用的配置文件&#x2F;etc&#x2F;my.cnf</p><pre class="line-numbers language-none"><code class="language-none">[client]port &#x3D; 3306socket &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysqld.sock# The MySQL server[mysqld]port &#x3D; 3306socket &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;mysqld.sockdatadir &#x3D; &#x2F;opt&#x2F;data&#x2F;mariadbskip-external-lockingskip-name-resolveback_log &#x3D; 50max_connections &#x3D; 2048max_connect_errors &#x3D; 1000table_open_cache &#x3D; 1024open_files_limit &#x3D; 16384max_allowed_packet &#x3D; 16Mread_buffer_size &#x3D; 8Mread_rnd_buffer_size &#x3D; 32Msort_buffer_size &#x3D; 2Mjoin_buffer_size &#x3D; 2Mthread_cache_size &#x3D; 64query_cache_size &#x3D; 64Mquery_cache_limit &#x3D; 4Mslow_query_log &#x3D; 1long_query_time &#x3D; 2lower_case_table_names &#x3D; 1innodb_file_per_table &#x3D; 1max_allowed_packet &#x3D; 1Gserver-id &#x3D; 1log-bin &#x3D; mysql-binexpire_logs_days &#x3D; 7binlog_format &#x3D; ROWinnodb_data_file_path &#x3D; ibdata1:12M:autoextendinnodb_buffer_pool_size &#x3D; 2Ginnodb_write_io_threads &#x3D; 12innodb_read_io_threads &#x3D; 8innodb_thread_concurrency &#x3D; 16innodb_flush_log_at_trx_commit &#x3D; 2innodb_log_buffer_size &#x3D; 16Minnodb_log_file_size &#x3D; 170Minnodb_lock_wait_timeout &#x3D; 60<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="数据库初始化"><a href="#数据库初始化" class="headerlink" title="数据库初始化"></a>数据库初始化</h2><pre class="line-numbers language-none"><code class="language-none">.&#x2F;scripts&#x2F;mysql_install_db --user&#x3D;mysql# 启动.&#x2F;bin&#x2F;mysqld_safe --user&#x3D;mysql &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="配置开机启动"><a href="#配置开机启动" class="headerlink" title="配置开机启动"></a>配置开机启动</h2><pre class="line-numbers language-none"><code class="language-none">cp &#x2F;usr&#x2F;local&#x2F;msyql&#x2F;support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysqlchmod 755 &#x2F;etc&#x2F;init.d&#x2F;mysqlchkconfig --add mysqlchkconfig --level 345 mysql on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><pre class="line-numbers language-none"><code class="language-none">export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin:$PATH<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>service mysql start&#x2F;restart</p><h2 id="设置用户"><a href="#设置用户" class="headerlink" title="设置用户"></a>设置用户</h2><pre class="line-numbers language-none"><code class="language-none">mysql&gt;grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;root&#39; WITH GRANT OPTION;;mysql&gt;flush privileges;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这里注意添加with grant option，通过update会提示没有权限.<br>到这一步，就可以通过mysql client连接数据库了。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://cloud.tencent.com/developer/article/1720967">1、CentOS7挂载新数据盘的完整步骤</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MariaDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx列出文件目录</title>
      <link href="/2021/04/19/89/"/>
      <url>/2021/04/19/89/</url>
      
        <content type="html"><![CDATA[<p>之前在linux中一直使用Nginx做Ftp服务器，但一直没做目录浏览，这在文件传输时还要提前知道文件名，十分不便，本文记录如何开启Nginx目录浏览。</p><span id="more"></span><h2 id="应用环境"><a href="#应用环境" class="headerlink" title="应用环境"></a>应用环境</h2><p>OS: ubuntu18.04<br>Nginx: 1.14</p><h2 id="Nginx开启目录浏览"><a href="#Nginx开启目录浏览" class="headerlink" title="Nginx开启目录浏览"></a>Nginx开启目录浏览</h2><p>在配置文件的location节点中加入以下内容:</p><pre class="line-numbers language-none"><code class="language-none">location &#x2F;rs &#123;    autoindex on; # 开启目录列出    autoindex_exact_size on;  # 以MB为单位默认BYTE    autoindex_localtime on;  # 本地时间显示默认GMT    ...&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样通过访问： <a href="http://ip:port/rs">http://ip:port/rs</a> 就能直接看到文件列表啦。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.rootop.org/pages/2906.html">1、开启Nginx目录文件列表</a><br><a href="https://shiyuhei10456.lofter.com/post/3126465a_1c76bf4d6">2、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>隐藏ArcGIS Server服务目录中的服务</title>
      <link href="/2021/04/19/88/"/>
      <url>/2021/04/19/88/</url>
      
        <content type="html"><![CDATA[<p>默认情况下，在知道一个ArcServer的服务地址之后，就可以访问到所有公开的服务列表，本文通过修改服务的属性来隐藏服务地址，以增加应用的安全性。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>ArcServer:10.2</p><h2 id="修改服务属性"><a href="#修改服务属性" class="headerlink" title="修改服务属性"></a>修改服务属性</h2><p>登录以下地址：<br><a href="http://gisserver.domain.com:6080/arcgis/admin">http://gisserver.domain.com:6080/arcgis/admin</a><br>选中服务，并滑动到底部，可以看到编辑服务， 然后将 “deprecated”: “true”, 添加到服务配置的第一行，如下：</p><pre class="line-numbers language-none"><code class="language-none">&#123; &quot;deprecated&quot;: &quot;true&quot;, &quot;serviceName&quot;: &quot;FireHydrants&quot;, &quot;type&quot;: &quot;MapServer&quot;, ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>保存重启服务。<br>这样我们访问：<a href="http://gisserver.domain.com:6080/arcgis/rest/services">http://gisserver.domain.com:6080/arcgis/rest/services</a> 就看不到公开的服务列表啦。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://enterprise.arcgis.com/zh-cn/server/10.4/administer/windows/hiding-a-service-in-the-arcgis-server-services-directory.htm">1、隐藏 ArcGIS Server 服务目录中的服务</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c71e6ba8">2. 封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ArcGIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>应用安全之隐藏Web服务器信息</title>
      <link href="/2021/04/01/87/"/>
      <url>/2021/04/01/87/</url>
      
        <content type="html"><![CDATA[<p>最近在漏洞扫描报告中提出了这样一个问题”可通过HTTP获取远端WWW服务信息”,本文对修复过程作记录。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS:Asianux Server 4<br>Nginx:1.18.0</p><h2 id="获取web服务器的信息"><a href="#获取web服务器的信息" class="headerlink" title="获取web服务器的信息"></a>获取web服务器的信息</h2><pre class="line-numbers language-none"><code class="language-none">curl -I ip:port<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可以输入如下信息：</p><pre class="line-numbers language-none"><code class="language-none">HTTP&#x2F;1.1 200 OKServer: Nginx&#x2F;1.18.0Date: Thu, 01 Apr 2021 08:40:07 GMTContent-Type: text&#x2F;htmlContent-Length: 307Last-Modified: Wed, 12 Jun 2019 03:14:19 GMTConnection: keep-aliveETag: &quot;5d006e0b-133&quot;Accept-Ranges: bytes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="重新编译Nginx以屏蔽Nginx信息"><a href="#重新编译Nginx以屏蔽Nginx信息" class="headerlink" title="重新编译Nginx以屏蔽Nginx信息"></a>重新编译Nginx以屏蔽Nginx信息</h2><p>找到Nginx安装包中src&#x2F;http&#x2F;ngx_http_header_filter_module.c,修改以下内容：</p><pre class="line-numbers language-none"><code class="language-none">static u_char ngx_http_server_string[] &#x3D; &quot;Server: unknown&quot; CRLF;static u_char ngx_http_server_full_string[] &#x3D; &quot;Server: unknown &quot; CRLF;static u_char ngx_http_server_build_string[] &#x3D; &quot;Server: unknown&quot; CRLF;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>重新编译安装nginx:</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configure --without-http_rewrite_module --with-http_ssl_modulemakemake install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>运行Nginx后再次执行”curl -I ip:port” 就会发现nginx信息已被替换为unknown;</p><p>对于win版本的Nginx，目前只找到如何隐藏版本号,在nginx配置文件中http节点下添加如下内容即可：</p><pre class="line-numbers language-none"><code class="language-none">server_tokens off;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="关于Tomcat"><a href="#关于Tomcat" class="headerlink" title="关于Tomcat"></a>关于Tomcat</h2><p>目前Tomcat的最新版本9.0.44中已经看不到这个信息，因此可以暂时忽略。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.csdn.net/huangbaokang/article/details/88235386">1、详细记录一次Tomcat服务器和Nginx服务器的缺省banner的修改全过程</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c84a2eba">2.封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS安装Mysql审计插件</title>
      <link href="/2021/03/19/86/"/>
      <url>/2021/03/19/86/</url>
      
        <content type="html"><![CDATA[<p>由于安全测评，要为Mysql数据库安装审计插件，由于最开始选择的时mcafee的审计插件，导致走了很多弯路，这里对审计插件的安装过程做个记录。</p><span id="more"></span><h2 id="软件版本"><a href="#软件版本" class="headerlink" title="软件版本"></a>软件版本</h2><p>Mysql: 5.7.32社区版<br>Centos:7<br>MariaDB: 10.5</p><h2 id="审计插件"><a href="#审计插件" class="headerlink" title="审计插件"></a>审计插件</h2><p>为Mysql社区版本提供审计的插件主要有三个 McAfee MySQL Audit Plugin、Percona Audit Log Plugin、MariaDB Audit Plugin。关于mcafee的插件安装可以参考文后链接，安装复杂且最终安装失败，因此最后选择了mariadb的审计插件，除了最后修改mysql配置时关于审计的配置没有卸载[mysqld]下导致audit插件不起作用，整个过程还是比较顺利的。</p><h2 id="安装server-audit-so"><a href="#安装server-audit-so" class="headerlink" title="安装server_audit.so"></a>安装server_audit.so</h2><h3 id="审计插件配置"><a href="#审计插件配置" class="headerlink" title="审计插件配置"></a>审计插件配置</h3><p>下载MariaDB的安装包，在lib&#x2F;plugin中拿到server_audit.so文件，将其放到mysql的plugin目录下。</p><p>修改Mysql的配置文件：</p><pre class="line-numbers language-none"><code class="language-none"># 在[mysqld]标签下添加：server_audit_logging&#x3D;ONserver_audit_file_path&#x3D;&#x2F;var&#x2F;log&#x2F;mariadb&#x2F;server_audit111.logserver_audit&#x3D;FORCE_PLUS_PERMANENT  # 防止审计插件被卸载server_audit_file_rotate_size&#x3D;1Gserver_audit_file_rotations&#x3D;10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>**注意:**一定要写在mysqld下面哦</p><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>重启mysql数据库并登录安装插件</p><pre class="line-numbers language-none"><code class="language-none">mysql&gt;install plugin server_audit soname &#39;server_audit.so&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看审计是否开启"><a href="#查看审计是否开启" class="headerlink" title="查看审计是否开启"></a>查看审计是否开启</h3><pre class="line-numbers language-none"><code class="language-none">mysql&gt; show variables like &#39;%audit%&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果server_audit_logging的属性值为ON则表明开启。</p><p>接下来，应该就能看到server_audit.log文件中内容了。</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>还是maria好啊！！！</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="http://blog.itpub.net/31441024/viewspace-2213103">1、MySQL5.7审计功能windows系统</a><br><a href="https://www.isolves.com/it/sjk/MYSQL/2020-05-13/17830.html">2、MySQL 安装 MariaDB Audit Plugin 插件，实现审计日志输出</a><br><a href="https://lyla7784.lofter.com/post/30a15a3d_1c8923399">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Excel隔行提取数据与隔行写入数据</title>
      <link href="/2021/03/17/84/"/>
      <url>/2021/03/17/84/</url>
      
        <content type="html"><![CDATA[<p>本文通过对Excel数据的隔行提取，并结合隔行插入实现数据的对齐，为以后数据统计提供基础。</p><span id="more"></span><h2 id="隔行提取数据"><a href="#隔行提取数据" class="headerlink" title="隔行提取数据"></a>隔行提取数据</h2><p>使用函数：OFFSET(A1,ROW(A1),0)<br>其中C1表示引用的单元格，row返回引用单元格的行数，row（A1）*2表示获取A1单元格下的第row（A1）*2个单元格。</p><p>如下表中的数据：需要提取到隔行的金额，这样就可以只提取到金额了：</p><p>A     | B<br>——– |<br>床常见品牌: 集美装饰、王氏豪庭、雅兰|<br>12,000|<br>衣柜常见品牌: 原始原素、ogsweet、源氏木语|<br>24,000|<br>床头柜常见品牌: 芝华仕、Kartell、安肯家居|<br>3,000|<br>化妆台常见品牌: 北培、梵思美居、王氏豪庭|</p><h2 id="隔行插入空行"><a href="#隔行插入空行" class="headerlink" title="隔行插入空行"></a>隔行插入空行</h2><p>创建新列(1-N)，并按顺序排列,行数和待处理数据的行数相同；<br>复制新列的数据，放在新列的n+1行；<br>选中待插入空行数据，然后点击自定义排序，选择新列，确认即可。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://m.wang1314.com/doc/webapp/topic/21102567.html">1、Excel隔行插入空行的几种小技巧</a><br><a href="https://jingyan.baidu.com/article/c1a3101eae8ca7de656deb06.html">2、Excel 隔行提取数值</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">3、封面图源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Excel </tag>
            
            <tag> Office </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArcMap制图相关</title>
      <link href="/2021/03/11/83/"/>
      <url>/2021/03/11/83/</url>
      
        <content type="html"><![CDATA[<p>太难了，几年没有使用ArcMap了，又要做水文分析，又要进行数据处理，居然还要制图，那，来吧…</p><span id="more"></span><h2 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h2><p>OS：win10 x64<br>ArcGIS:10.2</p><h2 id="Layout-View"><a href="#Layout-View" class="headerlink" title="Layout View"></a>Layout View</h2><p>从Data View改到Layout View,ArcMap底部。</p><h2 id="布局视图是横向的怎么办"><a href="#布局视图是横向的怎么办" class="headerlink" title="布局视图是横向的怎么办"></a>布局视图是横向的怎么办</h2><p>在Layout View中空白处右键，点击<strong>Page and Print Setup</strong>,find <strong>Paper and Page properties</strong>,then set <strong>Orientation</strong> to Landscape.</p><h2 id="图例样式怎么设置"><a href="#图例样式怎么设置" class="headerlink" title="图例样式怎么设置"></a>图例样式怎么设置</h2><p>插入图例之后，双击图例，打开Legend Properties</p><h3 id="图例-Label"><a href="#图例-Label" class="headerlink" title="图例+Label"></a>图例+Label</h3><p>切换至Items处，点击Style,选择图例+Label</p><h3 id="图例标题"><a href="#图例标题" class="headerlink" title="图例标题"></a>图例标题</h3><p>切换至General,设置Title即可。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://jingyan.baidu.com/article/b0b63dbfa340bd0b4930707f.html">1、ArcGIS布局视图怎么设置为横向</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">2、封面来源</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ArcMap水文分析-提取河网和流域</title>
      <link href="/2021/03/11/82/"/>
      <url>/2021/03/11/82/</url>
      
        <content type="html"><![CDATA[<p>本文记录了使用ArcMap对DEM数据进行水文分析，提取河网和流域的过程，对栅格和矢量数据的切割也略有涉及。</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>ArcGIS:10.2<br>OS:Win10 x64</p><h2 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h2><p>原始数据是从地理空间数据云中下载到的30m dem<br>水文分析不支持个人地理数据库</p><h3 id="DEM数据切割-Optional"><a href="#DEM数据切割-Optional" class="headerlink" title="DEM数据切割(Optional)"></a>DEM数据切割(Optional)</h3><p>Spatial Analyst Tools-&gt;Extraction-&gt;Extract By mask</p><h3 id="对DEM数据进行拼接-Optional"><a href="#对DEM数据进行拼接-Optional" class="headerlink" title="对DEM数据进行拼接(Optional)"></a>对DEM数据进行拼接(Optional)</h3><p>Data Management tools-&gt;Raster-&gt;Raster Dataset-&gt;Mosaic</p><h3 id="为栅格数据创建属性表-Optional"><a href="#为栅格数据创建属性表-Optional" class="headerlink" title="为栅格数据创建属性表(Optional)"></a>为栅格数据创建属性表(Optional)</h3><p>Data Management tools-&gt;Raster-&gt;Raster Properties-&gt;Build Raster Attribute Table<br><strong>提示：</strong>在进行水文分析时，如果中途生成的栅格数据没有属性表，后续操作可能会有NoData的错误，如果遇到，可以创建属性表。</p><h2 id="DEM填坑"><a href="#DEM填坑" class="headerlink" title="DEM填坑"></a>DEM填坑</h2><p>Spatial Analyst Tools——&gt;Hydrology-&gt;Flow Direction<br>处理结果如果是黑白的1-255的,那么说明DEM数据需要进行填坑处理，否则进行下一步</p><h3 id="sink"><a href="#sink" class="headerlink" title="sink"></a>sink</h3><p>输入：flowdir<br>结果：sink</p><h3 id="watershed"><a href="#watershed" class="headerlink" title="watershed"></a>watershed</h3><p>输入：</p><pre><code>input flow direction raster:flowdirinput raster or feature pour point data:sink</code></pre><p>结果：sinkshed</p><p>这一步是通过watershed工具推算出哪些区域的水会流到这些坑里</p><h3 id="zonal-statistics"><a href="#zonal-statistics" class="headerlink" title="zonal statistics"></a>zonal statistics</h3><p>输入：</p><p>input raster or feature zone data: sinkshed</p><p>zone field: Value</p><p>Input value raster: dem</p><p>statistics type: minimum</p><p>输出：sink_min</p><p>通过区域统计得到“坑”的流域内高程的最低值</p><h3 id="zonal-fill"><a href="#zonal-fill" class="headerlink" title="zonal fill"></a>zonal fill</h3><p>输入：</p><p>input zone raster:sinkshed</p><p>input weight raster:dem</p><p>输出：</p><p>sink_max</p><p>使用区域填充的结果是沿着“坑”流域的边界，也就是分水岭，把整个流域填平。这样就获得了“坑”流域的最高高程</p><h3 id="raster-calculator"><a href="#raster-calculator" class="headerlink" title="raster calculator"></a>raster calculator</h3><p>输入：</p><p>sink_max - sink_min</p><p>输出：</p><p>sink_depth</p><p>这步没什么好说的，大值减小值得到“坑”的最大深度</p><h3 id="fill"><a href="#fill" class="headerlink" title="fill"></a>fill</h3><p>输入：</p><p>input surface raster: dem</p><p>Z limit: sink_depth(max)</p><p>输出：filldem</p><p>Z limit中要填sink_depth中的上限值，我这里就是510。</p><h3 id="flow-direction"><a href="#flow-direction" class="headerlink" title="flow direction"></a>flow direction</h3><p>输入：filldem</p><p>输出：fill_dir</p><p>如果这次的输出和之前一样，那么请重新开始填坑。</p><h2 id="计算径流量"><a href="#计算径流量" class="headerlink" title="计算径流量"></a>计算径流量</h2><p>flow accumulation<br>输入：fill_dir</p><p>输出：accu</p><h2 id="提取河网"><a href="#提取河网" class="headerlink" title="提取河网"></a>提取河网</h2><p>Spatial Analyst Tools-&gt;Map Algebra-&gt;Raster Calculator</p><p>Con(accu&gt;X,1)<br>其中X为径流量，此值越大，河网越稀疏</p><p>输出：河网</p><h2 id="Stream-Link-amp-Stream-Order"><a href="#Stream-Link-amp-Stream-Order" class="headerlink" title="Stream Link &amp;Stream Order"></a>Stream Link &amp;Stream Order</h2><p>连接及分级</p><h2 id="Stream-To-Feature"><a href="#Stream-To-Feature" class="headerlink" title="Stream To Feature"></a>Stream To Feature</h2><p>将河网转为Polyline<br>对河网分级设色：在矢量河网图层中的属性对话框中，Symbology-&gt;Quantities-&gt;Graduated colors.</p><h2 id="流域提取"><a href="#流域提取" class="headerlink" title="流域提取"></a>流域提取</h2><p>使用watershed</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.jianshu.com/p/371b81b3e24b">1、简明Arcgis流域提取方法</a><br><a href="https://www.cnblogs.com/crazytao/p/8108829.html">2、arcgis水文分析</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c81c6e8f">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ArcGIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArcMap计算栅格数据的面积</title>
      <link href="/2021/03/09/81/"/>
      <url>/2021/03/09/81/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录使用ArcMap对某区域土壤数据面积的统计过程。</p><span id="more"></span><h2 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h2><p>GIS软件：ArcGIS 10.6<br>OS:win10</p><h2 id="将栅格数据导入数据库"><a href="#将栅格数据导入数据库" class="headerlink" title="将栅格数据导入数据库"></a>将栅格数据导入数据库</h2><p>首先再ArcCatalog中创建一个PersonGeodatabase或FileGeoDatabase，然后将栅格数据导入到数据库中。</p><h2 id="定义投影"><a href="#定义投影" class="headerlink" title="定义投影"></a>定义投影</h2><p>ArcToolbox—DataManagementTools—Projections andTransformations—Raster—Project Raster</p><h2 id="对数据进行重分类-Optional"><a href="#对数据进行重分类-Optional" class="headerlink" title="对数据进行重分类(Optional)"></a>对数据进行重分类(Optional)</h2><p>首先，如果需要，可以连接外部数据表,在Toc窗口，选中图层,Join and relates,进行属性数据关联；<br>关联完成之后，可以对数据进行重分类ArcToolbox-&gt;Spatial Analyst Tools-&gt;Reclass-&gt;Reclassify,这样就可以将有相同属性的数据合并。</p><h2 id="计算面积"><a href="#计算面积" class="headerlink" title="计算面积"></a>计算面积</h2><p>查看图层属性，找到cellsize,并记录下来；<br>然后打开属性表,添加字段Area,并打开字段计算器，使用Count*cellsize&#x2F;1000&#x2F;1000,这样计算出来的结果就是平方公里。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.sohu.com/a/289205642_488161">1、使用ArcGIS统计栅格数据面积 </a><br><a href="https://alisonmarket.lofter.com/post/2b1789_1c808c676">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ArcGIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于TDEngine的轨迹数据存储及数据利用</title>
      <link href="/2021/01/17/80/"/>
      <url>/2021/01/17/80/</url>
      
        <content type="html"><![CDATA[<p>本文对TDEngine超级表及其python connector的使用做了简单的记录。</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>OS:centos 8.2<br>TDEngine版本：2.0.7.0</p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>随着轨迹数据的越来越多，现有Oracle数据无论是从性能还是从可维护性的角度都不足支撑现有系统的运行。通过对现有时序数据的评估，最终使用TDEngine对轨迹数据进行存储。</p><h2 id="TDEngine的安装及启动"><a href="#TDEngine的安装及启动" class="headerlink" title="TDEngine的安装及启动"></a>TDEngine的安装及启动</h2><h3 id="配置FQDN"><a href="#配置FQDN" class="headerlink" title="配置FQDN"></a>配置FQDN</h3><p>当前版本连接TDEngine都是通过FQDN进行的，因此如果后续想要通过各种驱动访问tdengine,必须要配置这个属性。<br>修改&#x2F;etc&#x2F;hostname配置主机名<br>修改&#x2F;etc&#x2F;hosts配置主机名和ip地址的关系<br>修改完毕之后如果能ping通主机名，则表示配置完成。</p><h3 id="安装及启动命令"><a href="#安装及启动命令" class="headerlink" title="安装及启动命令"></a>安装及启动命令</h3><pre class="line-numbers language-none"><code class="language-none">rpm -ivh TDengine-server-2.0.7.0-Linux-x64.rpmsystemctl start taosdsystemctl stop taosdsystemctl status taosd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="卸载TDEngine"><a href="#卸载TDEngine" class="headerlink" title="卸载TDEngine"></a>卸载TDEngine</h3><pre class="line-numbers language-none"><code class="language-none">rpm -e tdengine<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="TDEngine中的SQL语法"><a href="#TDEngine中的SQL语法" class="headerlink" title="TDEngine中的SQL语法"></a>TDEngine中的SQL语法</h2><p>连接tdengine</p><pre class="line-numbers language-none"><code class="language-none">taos -h hostname<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="数据库创建"><a href="#数据库创建" class="headerlink" title="数据库创建"></a>数据库创建</h3><pre class="line-numbers language-none"><code class="language-none">create database if not exists ship_track keep 3650 precision &quot;us&quot;;use ship_track;drop database if exists ship_track;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>[keep] 数据存储的天数，最长为10年，过期数据会自动删除<br>[precision]时间的精度,默认为毫秒，这里取微秒</p><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><p>TDEngine中有超级表的概念，即对于同一类的数据我们可以把他们存储到一个超级表中，然后每个设备的数据再存储到超级表下的子表，这样在针对单个子表进行查询时会极大的挺高查询的效率。</p><p>超级表有一个tags属性,TAGS 列名不能与其他列名相同,这里我们指定的是设备编号，如下：</p><pre class="line-numbers language-none"><code class="language-none">create table if not exists S_SHIPS(UPDATETIME TIMESTAMP,SHIPNAME BINARY(50),LNG DOUBLE,LAT DOUBLE,CS BINARY(20),MESSAGETEXT BINARY(4000)) tags(USERID BINARY(20));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建子表</p><pre class="line-numbers language-none"><code class="language-none">CREATE TABLE IF NOT EXISTS tb_name USING S_SHIPS TAGS (tag_value1, ...);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="数据写入"><a href="#数据写入" class="headerlink" title="数据写入"></a>数据写入</h3><pre class="line-numbers language-none"><code class="language-none">INSERT INTO tb_name VALUES (field_value, ...);INSERT INTO tb_name (field1_name, ...) VALUES (field1_value, ...)-- 可以在写入时创建超级表的子表INSERT INTO tb_name using S_SHIPS tags(xx) VALUES(field1_value, ...)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><p>查询超级表下的子表数量：</p><pre class="line-numbers language-none"><code class="language-none">select count(TBNAME) from S_SHIPS;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这里的TBNAME是一个关键字，可用于统计分析。<br>根据时间间隔查询数据：</p><pre class="line-numbers language-none"><code class="language-none">select AVG(lng) from t985000989 interval(30s);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>interval单位： a(毫秒)、s(秒)、 m(分)、h(小时)、d(天)、w(周)。 </p><h2 id="使用Python写入及查询taos数据"><a href="#使用Python写入及查询taos数据" class="headerlink" title="使用Python写入及查询taos数据"></a>使用Python写入及查询taos数据</h2><h3 id="安装python-connector"><a href="#安装python-connector" class="headerlink" title="安装python-connector"></a>安装python-connector</h3><pre class="line-numbers language-none"><code class="language-none">pip3 install &#x2F;usr&#x2F;local&#x2F;taos&#x2F;connector&#x2F;python&#x2F;linux&#x2F;python3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="数据写入-1"><a href="#数据写入-1" class="headerlink" title="数据写入"></a>数据写入</h3><pre class="line-numbers language-none"><code class="language-none">import taos import datetimeconn &#x3D; taos.connect(host&#x3D;&quot;test&quot;, user&#x3D;&quot;root&quot;, password&#x3D;&quot;taosdata&quot;, config&#x3D;&quot;&#x2F;etc&#x2F;taos&quot;)dt&#x3D;datetime.datetime.now()insertsql&#x3D;&#39;insert into t &#39;c1 &#x3D; conn.cursor()c1.execute(&#39;use dbaseName&#39;)c1.execute(insertSql)c1.close()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><pre class="line-numbers language-none"><code class="language-none">import taos import jsonconn &#x3D; taos.connect(host&#x3D;&quot;test&quot;, user&#x3D;&quot;root&quot;, password&#x3D;&quot;taosdata&quot;, config&#x3D;&quot;&#x2F;etc&#x2F;taos&quot;)querySql&#x3D;&#39;&#39;c1 &#x3D; conn.cursor()c1.execute(&#39;use dbaseName&#39;)c1.execute(querySql)ships&#x3D;[]for data in c1:    ship&#x3D;&#123;&#125;    ship[&quot;mmsi&quot;]&#x3D;data[0]    ship[&quot;count&quot;]&#x3D;data[1]    ships.append(ship)shipsStr&#x3D;json.dumps(ships)c1.close()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.jianshu.com/p/066677035940">1、保姆级演示一分钟搞定TDengine的下载安装</a><br><a href="https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb">2、Cover</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GIS </tag>
            
            <tag> 大数据 </tag>
            
            <tag> 时序数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle数据库小结</title>
      <link href="/2021/01/17/79/"/>
      <url>/2021/01/17/79/</url>
      
        <content type="html"><![CDATA[<p>最近在维护一个oracle数据库的项目，本文把遇到的一些问题做了一个小结。</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>OS: win server 2016</p><p>Oracle:11g</p><h2 id="数据库连接问题"><a href="#数据库连接问题" class="headerlink" title="数据库连接问题"></a>数据库连接问题</h2><p>Oracle数据库与其它数据库（如mysql、sql server等）最大的区别可能就是必须要安装oracle客户端，通过其Net Manager配置网络服务名。但如果是Java则可以使用thin进行连接，而不需要安装oracle客户端。[1]</p><h2 id="表空间-tablespace"><a href="#表空间-tablespace" class="headerlink" title="表空间(tablespace)"></a>表空间(tablespace)</h2><p>Oracle数据库被划分成称作表空间的逻辑区域，形成Oracle数据库的逻辑结构，类似与其他关系型数据的database的概念，用来存储如表、视图、索引等信息。一个数据库实例可以有多个表空间，一个表空间可以有多个数据文件，一个数据文件的最大大小32GB,当超过32G时，需要为表空间添加数据文件。</p><p>注：关于对表空间的相关操作可以通过Toad来进行。</p><h3 id="创建表空间"><a href="#创建表空间" class="headerlink" title="创建表空间"></a>创建表空间</h3><p>这里创建了一个大小200M的、可自动扩展的、最大大小没有限制(32G)的表空间：</p><pre class="line-numbers language-none"><code class="language-none">create tablespace GMAP datafile &#39;D:\xx\xx.dbf&#39; size 200M AUTOEXTEND ON NEXT 5M MAXSIZE UNLIMITED;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="新增数据文件"><a href="#新增数据文件" class="headerlink" title="新增数据文件"></a>新增数据文件</h3><p>当表空间的数据文件达到32G时，表空间的大小无法自动增加，可以通过新增数据文件的方式继续向表空间中写入数据。</p><pre class="line-numbers language-none"><code class="language-none">ALTER TABLESPACE app_data ADD DATAFILE&#39;D:\xx.DBF&#39; SIZE 50MAUTOEXTEND ON NEXT 5M MAXSIZE 100M; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="临时表空间"><a href="#临时表空间" class="headerlink" title="临时表空间"></a>临时表空间</h2><p>临时表空间用来管理数据库排序操作以及用于存储临时表、中间排序结果等临时对象,当ORACLE里需要用到SORT的时候，并且当PGA中sort_area_size大小不够时，将会把数据放入临时表空间里进行排序。像数据库中一些操作： CREATE INDEX、 ANALYZE、SELECT DISTINCT、ORDER BY、GROUP BY、 UNION ALL、 INTERSECT、MINUS、SORT-MERGE JOINS、HASH JOIN等都可能会用到临时表空间。当操作完成后，系统会自动清理临时表空间中的临时对象，自动释放临时段。这里的释放只是标记为空闲、可以重用，其实实质占用的磁盘空间并没有真正释放。这也是临时表空间有时会不断增大的原因。[2]</p><p>当我们进行部分查询或者创建索引的时候，会遇到ora-01652无法通过128(在表空间temp中)扩展temp段的错误，这个就是提示我们临时表空间爆了，可以通过更换临时表空间解决。</p><h3 id="创建临时表空间"><a href="#创建临时表空间" class="headerlink" title="创建临时表空间"></a>创建临时表空间</h3><pre class="line-numbers language-none"><code class="language-none">create temporary tablespace temp02 tempfile &#39;E:\xxx.DBF&#39; size 1024M autoextend on;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="修改默认临时表空间"><a href="#修改默认临时表空间" class="headerlink" title="修改默认临时表空间"></a>修改默认临时表空间</h3><pre class="line-numbers language-none"><code class="language-none">-- 查看临时表空间SELECT USERNAME,TEMPORARY_TABLESPACE FROM DBA_USERS;-- 更换临时表空间alter database default temporary tablespace temp02;-- 删除旧的临时表空间drop tablespace temp including contents and datafiles;-- 确认是否删除select tablespace_name from dba_tablespaces; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="管理员账户无法登陆"><a href="#管理员账户无法登陆" class="headerlink" title="管理员账户无法登陆"></a>管理员账户无法登陆</h2><p>重置密码文件PWDorcl2.ora</p><pre class="line-numbers language-none"><code class="language-none">orapwd file&#x3D;C:\app\xx\product\11.2.0\dbhome_1\database\PWDorcl2.ora password&#x3D;admin entries&#x3D;40 force&#x3D;y;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>使用dba账户登陆，给用户授权</p><pre class="line-numbers language-none"><code class="language-none">sqlplus &#x2F;nologconn sys&#x2F;admin as sysdba<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="监听日志文件达到4G-导致数据库无法连接-4"><a href="#监听日志文件达到4G-导致数据库无法连接-4" class="headerlink" title="监听日志文件达到4G,导致数据库无法连接[4]"></a>监听日志文件达到4G,导致数据库无法连接[4]</h2><p>listener的日至文件位于：</p><pre class="line-numbers language-none"><code class="language-none">app\Administrator\diag\tnslsnr\pc-name\listener\trace\listener.log<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当此文件的大小超过4G时，windows下就无法连接了，可通过清空此文件或者关闭监听器日志,命令如下：</p><pre class="line-numbers language-none"><code class="language-none">lsnrctl set log_status off      lsnrctl set log_status on  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>清空日志的时候需要关闭日至，即off命令。</p><h2 id="数据导入及导出"><a href="#数据导入及导出" class="headerlink" title="数据导入及导出"></a>数据导入及导出</h2><h3 id="导出-exp"><a href="#导出-exp" class="headerlink" title="导出(exp)"></a>导出(exp)</h3><pre class="line-numbers language-none"><code class="language-none">exp user&#x2F;pwd@localhost:1521&#x2F;orcl owner&#x3D;user rows&#x3D;y indexes&#x3D;n compress&#x3D;n buffer&#x3D;500000000 file&#x3D;xx.dmp log&#x3D;xx.log<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h3><pre class="line-numbers language-none"><code class="language-none">imp user&#x2F;pwd@localhost&#x2F;orcl file&#x3D;xx.dmp full&#x3D;y ignore&#x3D;y<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/arxive/p/10147641.html">1、连接ORACLE数据库，是不是必须要安装oracle客户端的运行时</a><br><a href="https://www.cnblogs.com/zhangyingai/p/7082594.html">2、ORACLE临时表空间总结</a><br><a href="https://www.cnblogs.com/sunnor/p/7097998.html">3、关于Oracle使用管理员账号登录失败的问题</a><br><a href="http://blog.itpub.net/29578568/viewspace-2140148/">4、oracle 监听日志文件达到4G，导致监听报错的解决方法 </a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7474e60">5、Cover</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux磁盘挂载</title>
      <link href="/2021/01/17/78/"/>
      <url>/2021/01/17/78/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录linux磁盘挂载相关命令。</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>OS:Manjaro 20.01&amp;Win10双系统</p><h2 id="确定要挂载的分区信息"><a href="#确定要挂载的分区信息" class="headerlink" title="确定要挂载的分区信息"></a>确定要挂载的分区信息</h2><h3 id="lsblk"><a href="#lsblk" class="headerlink" title="lsblk"></a>lsblk</h3><p>作用：确定分区的位置及空间</p><h3 id="ls-l-x2F-dev-x2F-disk-x2F-by-uuid"><a href="#ls-l-x2F-dev-x2F-disk-x2F-by-uuid" class="headerlink" title="ls -l &#x2F;dev&#x2F;disk&#x2F;by-uuid"></a>ls -l &#x2F;dev&#x2F;disk&#x2F;by-uuid</h3><p>作用：确定分区的UUID</p><h2 id="临时挂载"><a href="#临时挂载" class="headerlink" title="临时挂载"></a>临时挂载</h2><p>使用mount命令临时挂载：</p><pre class="line-numbers language-none"><code class="language-none">mkdir &#x2F;exstoremount &#x2F;dev&#x2F;vdb &#x2F;exstore<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="永久挂载"><a href="#永久挂载" class="headerlink" title="永久挂载"></a>永久挂载</h2><p>编辑&#x2F;etc&#x2F;fstab文件</p><pre class="line-numbers language-none"><code class="language-none">UUID&#x3D;xx                     &#x2F;media&#x2F;Documents  ntfs defaults 0 0  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中&#x2F;media&#x2F;Documents为挂载点，也就是以后通过这个位置访问此分区。</p><p>重新加载fstab文件的内容：</p><pre class="line-numbers language-none"><code class="language-none">mount -a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>或者重启：</p><pre class="line-numbers language-none"><code class="language-none">shutdown -r now<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="关闭win10的快速启动"><a href="#关闭win10的快速启动" class="headerlink" title="关闭win10的快速启动"></a>关闭win10的快速启动</h2><p>如果是win10+manjaro双系统，在从win10进入manjaro时，可能会出现挂载的硬盘无法写入，此时需要重新进入win10关闭快速启动，执行以下命令即可：</p><pre class="line-numbers language-none"><code class="language-none">powercfg &#x2F;h off<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="http://blog.chinaunix.net/uid-28458801-id-5789504.html">1、linux的mount -a命令</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8a36320">2.封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Manjaro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10下使用xrdp远程连接ubuntu18.04</title>
      <link href="/2021/01/04/77/"/>
      <url>/2021/01/04/77/</url>
      
        <content type="html"><![CDATA[<p>之前使用vnc方式及桌面共享远程ubuntu18.04时，光标位置移动很慢，并且还是一个小远点，效果非常不好，这里使用win10的xrdp方式远程ubuntu18.04,效果还不错。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>ubuntu:18.04</p><h2 id="安装xrdp"><a href="#安装xrdp" class="headerlink" title="安装xrdp"></a>安装xrdp</h2><pre class="line-numbers language-none"><code class="language-none">sudo apt install xrdp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改配置：</p><pre class="line-numbers language-none"><code class="language-none">sudo vim &#x2F;etc&#x2F;xrdp&#x2F;startwm.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>把最下面的test和exec两行注释掉，添加一行</p><pre class="line-numbers language-none"><code class="language-none">gnome-session<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>重启ubuntu,不登陆</p><h2 id="win10远程连接ubuntu"><a href="#win10远程连接ubuntu" class="headerlink" title="win10远程连接ubuntu"></a>win10远程连接ubuntu</h2><p>打开远程桌面，输入ubuntu的ip地址，然后输入用户名和密码即可。<br>此时我们可能只能看到一个青色背景，什么都没有，稍等几分钟会看到一个错误的提示。<br>执行以下命令解决：</p><pre class="line-numbers language-none"><code class="language-none">sudo apt-get install xorgxrdp  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此时重新连接时就会看到ubuntu的背景的，会提示几次授权修改主机的颜色设置什么的，都可以cancel掉，然后即可登陆成功</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://zhuanlan.zhihu.com/p/40937988">1、xrdp方式windows 10连接ubuntu 18.04</a><br><a href="http://link.zhihu.com/?target=http://c-nergy.be/blog/?p=13390">2、Issues with xRDP and Ubuntu 18.04.2 – How to fix it</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RDP </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos8的一些基本配置</title>
      <link href="/2020/11/28/76/"/>
      <url>/2020/11/28/76/</url>
      
        <content type="html"><![CDATA[<p>最近在搞centos8，把其常用操作及配置做个简单的记录，包括静态ip配置、gui的安装、防火墙配置、vnc配置等。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>os: centos8.2</p><h2 id="配置静态IP"><a href="#配置静态IP" class="headerlink" title="配置静态IP"></a>配置静态IP</h2><pre class="line-numbers language-none"><code class="language-none">&#x2F;etc&#x2F;sysconfig&#x2F;network-scriptsvi ifcfg-ens160<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这里en(ethernet)后面可能是其它值，具体如下：</p><blockquote><p>o:主板板载网卡，集成的是设备索引号</p><p>p:独立网卡，PCI网卡</p><p>s:热插拔网卡，usb之类的扩展槽索引号</p><p>后面的数字：MAC地址+主板信息计算得出的唯一序号</p></blockquote><p>修改以下内容：</p><pre class="line-numbers language-none"><code class="language-none"># 设置静态IPBOOTPROTO&#x3D;&quot;static&quot;# 开机启动ONBOOT&#x3D;&quot;yes&quot;# 设置IP地址PREFIX&#x3D;24IPADDR&#x3D;192.168.1.80GATEWAY&#x3D;192.168.1.1NETMASK&#x3D;255.255.255.0DNS1&#x3D;192.168.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>重启网卡</p><pre class="line-numbers language-none"><code class="language-none">nmcli c reload ens160<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="GUI界面安装"><a href="#GUI界面安装" class="headerlink" title="GUI界面安装"></a>GUI界面安装</h2><p>这里如果使用的centos8.2 dvd版的安装镜像安装时，可以直接选择安装图形界面的，如果没有安装可以执行以下命令配置</p><pre class="line-numbers language-none"><code class="language-none">yum groupinstall &quot;Server with GUI&quot; -ysystemctl get-defaultsystemctl set-default graphical.targetreboot<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="VNC-Server安装及配置"><a href="#VNC-Server安装及配置" class="headerlink" title="VNC Server安装及配置"></a>VNC Server安装及配置</h2><p>执行以下命令安装</p><pre class="line-numbers language-none"><code class="language-none">yum groupinstall &quot;X Window System&quot;yum install gnome-classic-session gnome-terminal nautilus-open-terminal control-center liberation-mono-fontsunlink &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;default.targetln -sf &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;graphical.target &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;default.targetreboot # 重启机器yum install tigervnc-server -ycp &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;vncserver@.service &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;vncserver@:1.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改配置文件,这里以test用户为例：</p><pre class="line-numbers language-none"><code class="language-none">vim &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;vncserver@:1.service添加User&#x3D;test并将里面的&lt;User&gt;替换为test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>修改完成之后</p><pre class="line-numbers language-none"><code class="language-none">systemctl daemon-reload# 设置密码vncpasswd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>启动及重启命令</p><pre class="line-numbers language-none"><code class="language-none">systemctl enable vncserver@:1.service # 设置开机启动systemctl start vncserver@:1.service # 启动vnc会话服务systemctl status vncserver@:1.service # 查看nvc会话服务状态systemctl stop vncserver@:1.service # 关闭nvc会话服务<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>接下来就可以通过vnc viewer远程连接centos8的图形界面了。</p><h2 id="防火墙配置"><a href="#防火墙配置" class="headerlink" title="防火墙配置"></a>防火墙配置</h2><p>centos8安装完成之后，防火墙默认是启动的，可以通过以下命令对防火墙进行控制</p><pre class="line-numbers language-none"><code class="language-none"># 查看防火墙状态systemctl status firewalld.service# 停止systemctl stop firewalld.servicefirewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanent   # 开放80端口firewall-cmd --zone&#x3D;public --remove-port&#x3D;80&#x2F;tcp --permanent # 删除开放的80端口firewall-cmd --reload   # 配置立即生效# 查看已经开放的端口firewall-cmd --zone&#x3D;public --list-ports<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="硬盘扩容"><a href="#硬盘扩容" class="headerlink" title="硬盘扩容"></a>硬盘扩容</h2><p>首先给硬盘分配空间，然后使用gparted对分区扩容</p><h2 id="安装gparted"><a href="#安装gparted" class="headerlink" title="安装gparted"></a>安装gparted</h2><p>可以使用gparted.iso，也可以在系统内安装gparted应用，系统内安装gparted应用可通过以下命令：</p><pre class="line-numbers language-none"><code class="language-none">sudo yum install epel-releasesudo yum install gparted<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>安装完成之后通过gparted修改分区大小，然后扩容逻辑分区大小：</p><pre class="line-numbers language-none"><code class="language-none"># 查看逻辑分区名：df -h# 扩容，这里+2G指添加的容量lvextend -L +2G &#x2F;dev&#x2F;mapper&#x2F;cl-rootxfs_growfs &#x2F;dev&#x2F;mapper&#x2F;cl-root# 查看各个分区容量lsblk<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.jianshu.com/p/5fc492060e70">1、网卡不叫eth0，而叫ens33、ens160、eno1 or enp0s</a></p><p><a href="https://www.cnblogs.com/whereGo/p/13486157.html">2、CentOS8安装图形界面</a></p><p><a href="https://www.cnblogs.com/bumengru/p/10244207.html">3、Windows远程连接CentOS图形化界面 - 如梦幽香 - 博客园 (cnblogs.com)</a> </p><p><a href="https://www.cnblogs.com/DavonC/p/12707728.html">4、centOS 6.8下使用Gparted进行分区扩容</a></p><p><a href="https://alisonmarket.lofter.com/post/2b1789_1c7361bf1#">5、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JQuery的Deferred对象获取多个耗时操作的结果</title>
      <link href="/2020/11/18/75/"/>
      <url>/2020/11/18/75/</url>
      
        <content type="html"><![CDATA[<p>最近在做涉及到多个图层的空间查询时，由于前端要对多个查询结果进行整合后处理，之前的写法是添加好几个flag，但还是没有做好控制，偶然看到了Jquery的Deferred，这里对其使用做简单的总结</p><span id="more"></span><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>OS: win10 x64<br>JQuery: 1.9.1<br>Browser: IE8</p><h2 id="Deferred对象简介"><a href="#Deferred对象简介" class="headerlink" title="Deferred对象简介"></a>Deferred对象简介</h2><p>Deferred对象是jQuery1.5开始引入的对象，用来弥补jQuery在回调函数方面功能不足的情况。Deferred对象有以下几种状态：  </p><blockquote><p>resolved: 已完成 , 调用此方法后，表示当前Deferred对象已经执行完成，会调用到done()<br>reject: 失败，会调用到fail()</p></blockquote><p>$.Deferred对象的几个操作：</p><blockquote><p>$.when()：为多个操作指定回调<br>deferred.then(): done和fail的结合</p></blockquote><h2 id="ajax的链式写法"><a href="#ajax的链式写法" class="headerlink" title="ajax的链式写法"></a>ajax的链式写法</h2><pre class="line-numbers language-none"><code class="language-none">$.ajax(&#39;test.html&#39;).done(function()&#123; &#125;).fail(function()&#123; &#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中：done()相当与success(),fail相当于error()。</p><h2 id="等待多个操作的返回结果"><a href="#等待多个操作的返回结果" class="headerlink" title="等待多个操作的返回结果"></a>等待多个操作的返回结果</h2><p>如果是这几个操作是确定，那我们直接使用$.when().done就可以了，如下：</p><pre class="line-numbers language-none"><code class="language-none">var d1 &#x3D; $.Deferred();var d2 &#x3D; $.Deferred();var d3 &#x3D; $.Deferred();function async1() &#123;d1.resolve(&quot;Fish&quot;);&#125;function async2() &#123;d2.resolve(&quot;Pizza&quot;);&#125;function async3() &#123;d3.resolve(&quot;Chicken&quot;);&#125;$.when(d1, d2,d3).done(function (v1, v2,v3) &#123;console.log(v1 + v2 +v3+ &#39;已完成&#39;);&#125;);async1();async2();async3();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里的v1，v2,v3就是deferred对象在调用resolve函数时的参数。</p><h2 id="等待未知数量的请求的返回结果"><a href="#等待未知数量的请求的返回结果" class="headerlink" title="等待未知数量的请求的返回结果"></a>等待未知数量的请求的返回结果</h2><p>对于有些循环的请求，只能通过数组的方式创建Deferred对象的场景，可以使用$.when().apply,如下：</p><pre class="line-numbers language-none"><code class="language-none">var defArr&#x3D;[];defArr[0]&#x3D;$.Deferred();...$.when.apply($,defArr).then(function()&#123;&#x2F;&#x2F;参数处理：https:&#x2F;&#x2F;www.imooc.com&#x2F;wenda&#x2F;detail&#x2F;564295var objects&#x3D;arguments;for(var i&#x3D;0;i&lt;objects.length;i++)&#123;console.log(objects[i]);&#125;&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="http://www.ruanyifeng.com/blog/2011/08/a_detailed_explanation_of_jquery_deferred_object.html">1、jQuery的deferred对象详解</a><br><a href="https://www.imooc.com/wenda/detail/564295">2、Deferred参数的处理</a><br><a href="https://shiyuhei10456.lofter.com/post/3126465a_1c76bf4d6">3、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bat的简单使用</title>
      <link href="/2020/11/15/74/"/>
      <url>/2020/11/15/74/</url>
      
        <content type="html"><![CDATA[<p>最近在windows上写了简单nginx重新加载配置的脚本，用到了bat,本文就用到的一些bat语法作简单记录。</p><span id="more"></span><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>OS: win server 2008</p><h2 id="Bat文件的注释"><a href="#Bat文件的注释" class="headerlink" title="Bat文件的注释"></a>Bat文件的注释</h2><p>:: 注释内容<br>其它类型的注释：</p><pre class="line-numbers language-none"><code class="language-none">1、rem 注释内容（不能出现重定向符号和管道符号）2、echo 注释内容（不能出现重定向符号和管道符号）〉nul3、if not exist nul 注释内容（不能出现重定向符号和管道符号）4、:注释内容（注释文本不能与已有标签重名）5、%注释内容%（可以用作行间注释，不能出现重定向符号和管道符号）6、goto 标签 注释内容（可以用作说明goto的条件和执行内容）7、:标签 注释内容（可以用作标签下方段的执行内容）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h2><h3 id="拷贝文件"><a href="#拷贝文件" class="headerlink" title="拷贝文件"></a>拷贝文件</h3><ol><li>仅拷贝</li></ol><pre class="line-numbers language-none"><code class="language-none">copy c:\123.txt d:\<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>重命名文件</li></ol><pre class="line-numbers language-none"><code class="language-none">copy c:\123.txt d:\234.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="文件夹"><a href="#文件夹" class="headerlink" title="文件夹"></a>文件夹</h3><pre class="line-numbers language-none"><code class="language-none">copy c:\123\*.conf d:\123<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>会默认覆盖重名文件，测试环境：win server 2008，后面不用添加 &#x2F;y</p><h2 id="nginx重新加载配置bat"><a href="#nginx重新加载配置bat" class="headerlink" title="nginx重新加载配置bat"></a>nginx重新加载配置bat</h2><pre class="line-numbers language-none"><code class="language-none">@echo offtaskkill &#x2F;f &#x2F;fi &quot;IMAGENAME eq nginx.exe&quot;::拷贝配置文件copy D:\generateConf\*.conf C:\Users\xxx\Desktop\nginx-1.xx.0\confstart nginx.exe::pause<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/guoguochong/p/7651651.html">1、BAT文件如何注释</a><br><a href="https://www.jb51.net/article/18981.htm">2、cmd copy命令 文件复制</a><br><a href="https://lyla7784.lofter.com/post/30a15a3d_1c8923399">3、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> bat </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>容器部署SiteServer7.0.4后解析word包Gdip的错</title>
      <link href="/2020/11/14/73/"/>
      <url>/2020/11/14/73/</url>
      
        <content type="html"><![CDATA[<p>最新版的SiteServer使用ASP.NET Core开发，网站的响应速度提升非常明显，在使用Docker部署之后，使用过程中出现了The type initializer for ‘Gdip’ threw an exception.的问题，本文记录如何解决</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS:ubuntu 16.04<br>SiteServer:7.0.6<br>Docker部署</p><h2 id="安装Gdip"><a href="#安装Gdip" class="headerlink" title="安装Gdip"></a>安装Gdip</h2><p>出现这个问题是因为docker中没有安装Gdip，安装即可。<br>这里SiteServer的docker使用的Ubuntu18.04，首先换源</p><pre class="line-numbers language-none"><code class="language-none">cat &gt;&#x2F;etc&#x2F;apt&#x2F;sources.list&lt;&lt;&#39;EOF&#39;deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian&#x2F; buster main non-free contribdeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian&#x2F; buster main non-free contribdeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian-security buster&#x2F;updates maindeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian-security buster&#x2F;updates maindeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian&#x2F; buster-updates main non-free contribdeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian&#x2F; buster-updates main non-free contribdeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian&#x2F; buster-backports main non-free contribdeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;debian&#x2F; buster-backports main non-free contribEOF<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>安装gdip  </p><pre class="line-numbers language-none"><code class="language-none">apt-get update &amp;&amp; apt-get install -y apt-utils libgdiplus libc6-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="重启容器"><a href="#重启容器" class="headerlink" title="重启容器"></a>重启容器</h2><pre class="line-numbers language-none"><code class="language-none">docker restart containerId<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.cnrainbird.com/index.php/2020/04/19/linux_debian10_buster_geng_huan_a_li_yuan/">1、Ubuntu 18.04更换阿里源</a><br><a href="https://www.cnblogs.com/youngsheep/p/11890069.html">2、asp .net core 部署在docker中，报错 The type initializer for ‘Gdip’ threw an exception.</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8f12e12">3、 封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> CMS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> ASP.NET </tag>
            
            <tag> SiteServer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql限制密码输入错误次数</title>
      <link href="/2020/09/23/72/"/>
      <url>/2020/09/23/72/</url>
      
        <content type="html"><![CDATA[<p>通过使用mysql内置的插件来限制异常登录，以防止异常登录。</p><span id="more"></span><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>登录mysql server: mysql -uroot -p</p><p>先确定mysql是否安装了connection_control 和 CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS插件</p><pre class="line-numbers language-none"><code class="language-none">&gt;show plugins;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果没有安装上述插件，进行安装：</p><pre class="line-numbers language-none"><code class="language-none">install plugin CONNECTION_CONTROL soname &#39;connection_control.so&#39;;install plugin CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS soname &#39;connection_control.so&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="修改mysql配置文件"><a href="#修改mysql配置文件" class="headerlink" title="修改mysql配置文件"></a>修改mysql配置文件</h2><p>如果不确定mysql的配置文件的位置</p><pre class="line-numbers language-none"><code class="language-none">mysql --help|grep &#39;my.cnf&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此命令会列出配置文件的路径</p><p>然后在[mysqld]下添加：</p><pre class="line-numbers language-none"><code class="language-none">connection-control-failed-connections-threshold&#x3D;5   connection-control-min-connection-delay&#x3D;108000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>service mysql restart<br>登录mysql查看配置：<br>show variables like ‘%connection_control%’;</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.csdn.net/ywd1992/article/details/83865537">1. MySQL数据库限制多次登录失败重试时间</a><br><a href="https://blog.csdn.net/qq_37502106/article/details/80199321">2. mysql配置文件路径</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">3. 封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> 安全 </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx添加Stream模块代理tcp服务</title>
      <link href="/2020/09/08/71/"/>
      <url>/2020/09/08/71/</url>
      
        <content type="html"><![CDATA[<p>在百度云上部署了一个tcp服务，但是服务ip只能使用云服务器的内网ip,这样外网就没法访问到了，因此这里使用Nginx的stream模块代理tcp服务。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>Nginx：1.19.1<br>OS:ubuntu 18.04</p><h2 id="Nginx查看版本及配置"><a href="#Nginx查看版本及配置" class="headerlink" title="Nginx查看版本及配置"></a>Nginx查看版本及配置</h2><pre class="line-numbers language-none"><code class="language-none">nginx -V<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="编译Nginx源码"><a href="#编译Nginx源码" class="headerlink" title="编译Nginx源码"></a>编译Nginx源码</h2><p>根据已安装nginx版本下载源码，这里给nginx添加stream模块</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configure --with-http_ssl_module --with-stream make<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>编译完成之后，将objs目录中的nginx复制到&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin下，覆盖即可<br>此时再执行nginx -V,会看到配置参数有了with-stream</p><h2 id="Nginx代理TCP端口-1"><a href="#Nginx代理TCP端口-1" class="headerlink" title="Nginx代理TCP端口[1]"></a>Nginx代理TCP端口[1]</h2><p>配置如下,其中stream和http同级</p><pre class="line-numbers language-none"><code class="language-none">stream &#123;    upstream cloudsocket     &#123;        hash $remote_addr consistent;        server 10.x.xx.14:1831 weight&#x3D;5 max_fails&#x3D;3 fail_timeout&#x3D;30s;    &#125;    server     &#123;        listen 8081;        proxy_connect_timeout 1s;        proxy_timeout 3s;        proxy_pass cloudsocket;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="nginx替换或版本升级"><a href="#nginx替换或版本升级" class="headerlink" title="nginx替换或版本升级"></a>nginx替换或版本升级</h2><p>把apt install nginx安装的nginx替换为源码编译的：</p><ol><li>通过apt install nginx安装的nginx在&#x2F;usr&#x2F;sbin下，把此目录下的nginx重新命名</li><li>修改环境变量，添加源码编译的nginx的路径<pre class="line-numbers language-none"><code class="language-none">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>再通过nginx -V查看nginx的版本即可验证。</li></ol><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/kamil/p/6066715.html">1、Nginx代理Tcp端口</a><br><a href="https://shiyuhei10456.lofter.com/post/3126465a_1c76bf4d6">2、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> TCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次Mysql版本升级</title>
      <link href="/2020/08/26/70/"/>
      <url>/2020/08/26/70/</url>
      
        <content type="html"><![CDATA[<p>由于线上的mysql爆出了安全漏洞，因此要把mysql升级到最新版本5.7.31,本文主要对mysql版本升级过程做简单记录。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS:centos7<br>Mysql:5.7.26</p><h2 id="升级Mysql版本"><a href="#升级Mysql版本" class="headerlink" title="升级Mysql版本"></a>升级Mysql版本</h2><p>之前mysql的安装文件：mysql-5.7.25-linux-glibc2.12-x86_64.tar.gz,由于之前并没有通过yum命令安装，而是通过二进制文件安装的，因此只需要将mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz中的文件复制到mysql的安装目录中即可。<br>解压mysql:</p><pre class="line-numbers language-none"><code class="language-none">tar -zxvf mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>将新版本的mysql复制到mysql安装路径中：</p><pre class="line-numbers language-none"><code class="language-none">cp -r -f mysql-5.7.25-linux-glibc2.12-x86_64&#x2F;* &#x2F;usr&#x2F;local&#x2F;mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果在拷贝时，即便有-f还是需要一个个输入yes确认覆盖。可参考如下方法解决：</p><pre class="line-numbers language-none"><code class="language-none">unalias cp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>之后就可以强制覆盖文件了(仅限本次会话使用)。</p><h2 id="查看mysql版本"><a href="#查看mysql版本" class="headerlink" title="查看mysql版本"></a>查看mysql版本</h2><p>登陆mysql</p><pre class="line-numbers language-none"><code class="language-none">mysql -uroot -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看版本</p><pre class="line-numbers language-none"><code class="language-none">select version();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.centoschina.cn/command/help/4292.html">1、CentOS下cp&#x2F;rm&#x2F;mv等命令强制覆盖操作</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c81c6e8f">2、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx控制TerraGate地形服务的访问权限</title>
      <link href="/2020/08/18/69/"/>
      <url>/2020/08/18/69/</url>
      
        <content type="html"><![CDATA[<p>本文主要解决TerraGate地形服务的权限控制问题，这里通过Nginx对访问者的ip及useragent分别不同的地形服务的访问权限进行控制。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>TerraGate:5.6.1<br>OS:Win Server 2008 R2<br>Nginx:1.9</p><h2 id="UserAgent"><a href="#UserAgent" class="headerlink" title="UserAgent"></a>UserAgent</h2><p>调用terragate的地形服务的系统，一般只有TerraExplorer，因此UserAgent这里只有”TerraExplorer”,如果是其他的UA,直接返回403即可</p><pre class="line-numbers language-none"><code class="language-none">if ($http_user_agent !~ &quot;TerraExplorer&quot;)&#123;                return 403;            &#125;    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="使用Nginx中的if"><a href="#使用Nginx中的if" class="headerlink" title="使用Nginx中的if"></a>使用Nginx中的if</h2><p>这里主要对用户访问的地形文件的名字和用户ip进行判断,限制特定ip只能访问某个或某些地形文件服务。<br>Nginx是不支持if…else的，要实现多条件判断，只能通过添加变量来实现</p><pre class="line-numbers language-none"><code class="language-none">set $flag 0;if ($remote_addr ~ &#39;(192)\.(168)\.(10)\.(.*)&#39;)&#123;                set $flag &quot;$&#123;flag&#125;1&quot;;            &#125;            if ($request_uri ~ &#39;&#x2F;\d+\?1226xuanran\.mpt&#39;)&#123;                set $flag &quot;$&#123;flag&#125;1&quot;;            &#125;                    if ($flag &#x3D; &quot;011&quot;)&#123;                proxy_pass http:&#x2F;&#x2F;xxx:8081;            &#125;         <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意，这里由于访问mpt服务之前，会访问一个类似全图的图片，但此地址中又不包含1226xuanran，因此添加了如下部分</p><pre class="line-numbers language-none"><code class="language-none">if ($request_uri !~ &#39;&#x2F;\d+.*mpt.*&#39;)&#123;               set $flag &quot;$&#123;flag&#125;2&quot;;           &#125;        if ($flag &#x3D; &quot;012&quot;)&#123;                proxy_pass http:&#x2F;&#x2F;xxx:8081;           &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>即当请求uri中不包含mpt时，直接放行，代理到真实的地形服务中去。</p><h2 id="其它Nginx正则表达式相关"><a href="#其它Nginx正则表达式相关" class="headerlink" title="其它Nginx正则表达式相关"></a>其它Nginx正则表达式相关</h2><p>&#x3D;开头表示精确匹配<br>~开头表示区分大小写的正则匹配<br><del>*开头表示不区分大小写的正则匹配<br>!</del>和!~*分别为区分大小写不匹配及不区分大小写不匹配 的正则<br>&#x2F;通用匹配，任何请求都会匹配到。</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.blyoo.com/3865.html">1. Nginx 判断访问者IP</a><br><a href="https://www.cnblogs.com/lazy-sang/p/12394649.html">2. nginx if多条件判断</a><br><a href="https://www.kancloud.cn/allanyu/openresty-best-practices/82607">3. OpenResty最佳实践</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c84a2eba">4.封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> GIS </tag>
            
            <tag> TerraGate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx为ArcServer做反向代理</title>
      <link href="/2020/07/31/68/"/>
      <url>/2020/07/31/68/</url>
      
        <content type="html"><![CDATA[<p>通过使用Nginx中的ngx_http_access_module,来为我们的ArcServer保驾护航,实现只允许特定的IP可以访问我们的ArcServer发布的服务。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>ArcServer:10.2<br>Nginx:1.19.1<br>OS:windows server 2008 R2</p><h2 id="调整ArcServer的端口"><a href="#调整ArcServer的端口" class="headerlink" title="调整ArcServer的端口"></a>调整ArcServer的端口</h2><p>调整之前，先停止ArcServer服务。<br>ArcServer10.2的manager是部署在tomcat中提供服务的，首先需要调整tomcat的端口，tomcat位于：C:\Program Files\ArcGIS\Server\framework\runtime,打开conf&#x2F;server.xml：<br>将其中的默认端口6080调整为需要的端口，如6090。</p><p>然后还要修改arcgisserver\config-store\machines下的一个*.json文件，文件名和主机名是一致的，将其中的6080调整为上面修改的端口号：6090即可。</p><p>重启ArcServer服务，如果<a href="http://localhost:6090/arcgis/manager%E8%AE%BF%E9%97%AE%E6%B2%A1%E6%9C%89%E9%97%AE%E9%A2%98%EF%BC%8C%E9%82%A3%E8%AF%B4%E6%98%8E%E8%B0%83%E6%95%B4%E6%88%90%E5%8A%9F%E3%80%82">http://localhost:6090/arcgis/manager访问没有问题，那说明调整成功。</a></p><h2 id="Nginx配置反向代理"><a href="#Nginx配置反向代理" class="headerlink" title="Nginx配置反向代理"></a>Nginx配置反向代理</h2><p>修改nginx.conf文件，添加如下内容：</p><pre class="line-numbers language-none"><code class="language-none">&#123;    ...    server &#123;        listen 6080;        location &#x2F;&#123;            proxy_pass http:&#x2F;&#x2F;host:6090;        &#125;    &#125;    ...&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>windows下启动Nginx:start nginx.exe</p><p>此时如果通过6080端口能够正常访问ArcServer则证明没有问题。</p><h2 id="Nginx配置指定的IP访问"><a href="#Nginx配置指定的IP访问" class="headerlink" title="Nginx配置指定的IP访问"></a>Nginx配置指定的IP访问</h2><p>以下包含局部配置和全局配置，可根据实际情况选择。</p><h3 id="在location下配置-局部配置"><a href="#在location下配置-局部配置" class="headerlink" title="在location下配置[局部配置]"></a>在location下配置[局部配置]</h3><p>如:</p><pre class="line-numbers language-none"><code class="language-none">&#123;    location &#x2F;&#123;        ...        allow 192.168.10.111;        deny all;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样配置就仅针对当前server的location,非整个Nginx.</p><h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h3><p>创建一个blockips.conf文件，里面加入如下内容：</p><pre class="line-numbers language-none"><code class="language-none">allow 192.168.10.111;deny all;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在nginx.conf文件的http节点的末尾加入如下内容：</p><pre class="line-numbers language-none"><code class="language-none">include blockips.conf;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这样针对的就是整个Nginx。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/yyxianren/p/10837189.html">1. nginx 访问控制之deny allow</a><br><a href="https://www.cnblogs.com/tiandi/p/5967929.html">2. Arcgis Server 默认服务端口号修改方法</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c71e6ba8">3. 封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> GIS </tag>
            
            <tag> ArcServer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nexus搭建Maven私服</title>
      <link href="/2020/07/24/67/"/>
      <url>/2020/07/24/67/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍Sonatype Nexus搭建Maven私服，以及jar包的上传及使用过程,通过使用maven私服，可极大减轻维护多个有相同模块的项目负担。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ol><li>Nexus版本：Nexus Repository OSS 3.25</li><li>Nexus部署环境: win10 x64</li><li>开发环境：deeepin v20</li><li>项目类型：Spring Cloud 2.x</li></ol><h2 id="Nexus搭建过程"><a href="#Nexus搭建过程" class="headerlink" title="Nexus搭建过程"></a>Nexus搭建过程</h2><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>这里我下载的是win版本，通过nexus.exe &#x2F;run 启动。如果启动成功，可在浏览器中输入<a href="http://localhost:8081/%E6%9F%A5%E7%9C%8B,%E7%84%B6%E5%90%8E%E8%BF%9B%E8%A1%8C%E8%B4%A6%E6%88%B7%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8D%B3%E5%8F%AF%E3%80%82">http://localhost:8081/查看,然后进行账户初始化即可。</a></p><h3 id="创建Repositry"><a href="#创建Repositry" class="headerlink" title="创建Repositry"></a>创建Repositry</h3><p>几种Reposity的说明：</p><ol><li>maven-central:中央库，默认从<a href="https://repo1.maven.org/maven2/%E6%8B%89%E5%8F%96jar">https://repo1.maven.org/maven2/拉取jar</a></li><li>maven-releases：私库发行版jar</li><li>maven-snapshots：私库快照（调试版本）jar</li><li>maven-public:仓库分组，把上面三个仓库组合在一起对外提供服务</li></ol><p>这里创建两个maven2(hosted)类型的私库，如omgis-release,omgis-snap,以后把jar推送到这两个库里面，但是，这两个仓库对外是不能public访问的，因此，<br>需要在maven-public仓库中引入这两个私有仓库：System-status-&gt;Repository-&gt;Repositories,找到maven-public,将创建的两个私库添加到maven-public<br>的成员中，这样如果有jar推送至私库，在maven-public中就能看到和引用了。</p><h2 id="将jar包上传到私库中"><a href="#将jar包上传到私库中" class="headerlink" title="将jar包上传到私库中"></a>将jar包上传到私库中</h2><h3 id="修改项目pom文件"><a href="#修改项目pom文件" class="headerlink" title="修改项目pom文件"></a>修改项目pom文件</h3><p>打开你项目的pom文件，添加如下内容：</p><pre class="line-numbers language-none"><code class="language-none">&lt;distributionManagement&gt;    &lt;repository&gt;        &lt;id&gt;omgis-release&lt;&#x2F;id&gt;        &lt;name&gt;Release Repository of omgis&lt;&#x2F;name&gt;        &lt;url&gt;http:&#x2F;&#x2F;your ip:8081&#x2F;repository&#x2F;omgis-release&lt;&#x2F;url&gt;    &lt;&#x2F;repository&gt;    &lt;snapshotRepository&gt;        &lt;id&gt;omgis-snap&lt;&#x2F;id&gt;        &lt;name&gt;Snapshot Repository of omgis&lt;&#x2F;name&gt;        &lt;url&gt;http:&#x2F;&#x2F;your ip:8081&#x2F;repository&#x2F;omgis-snap&#x2F;&lt;&#x2F;url&gt;    &lt;&#x2F;snapshotRepository&gt;&lt;&#x2F;distributionManagement&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="添加用户信息"><a href="#添加用户信息" class="headerlink" title="添加用户信息"></a>添加用户信息</h3><p>打开你本地maven的配置文件settings.xml,在servers节点加入如下配置:</p><pre class="line-numbers language-none"><code class="language-none">&lt;server&gt;    &lt;id&gt;omgis&lt;&#x2F;id&gt;    &lt;username&gt;admin&lt;&#x2F;username&gt;    &lt;password&gt;123456&lt;&#x2F;password&gt;&lt;&#x2F;server&gt;&lt;server&gt;    &lt;id&gt;omgis-snap&lt;&#x2F;id&gt;    &lt;username&gt;admin&lt;&#x2F;username&gt;    &lt;password&gt;123456&lt;&#x2F;password&gt;&lt;&#x2F;server&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在Intellij idea右侧Maven中，执行maven clean &amp;maven deploy即可将当前模块生成的jar包部署到maven私服中去了，<br>现在你可以到maven-public中看下有没有新生成的jar包了。</p><h2 id="使用私服中的jar"><a href="#使用私服中的jar" class="headerlink" title="使用私服中的jar"></a>使用私服中的jar</h2><p>在你项目的pom文件中添加即可</p><pre class="line-numbers language-none"><code class="language-none">&lt;repository&gt;    &lt;id&gt;omgis&lt;&#x2F;id&gt;    &lt;name&gt;omgis repo&lt;&#x2F;name&gt;    &lt;url&gt;http:&#x2F;&#x2F;your ip:8081&#x2F;repository&#x2F;maven-public&#x2F;&lt;&#x2F;url&gt;    &lt;releases&gt;        &lt;enabled&gt;true&lt;&#x2F;enabled&gt;    &lt;&#x2F;releases&gt;&lt;&#x2F;repository&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样在维护多个项目时，就可以把它们通用的部分提取出来，只用维护一个，有更新时，直接上传到私服中去，另一个项目直接引用jar即可。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>天哪，这是什么神仙手段，鬼知道我以前同时维护多个项目时更新有多么难受…</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/knowledgesea/p/11190579.html">1.使用Nexus搭建Maven私服</a><br><a href="http://zhaoyh.com.cn/2020/07/16/Maven%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8/">2.Maven私服搭建与使用</a><br><a href="https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb">3.封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nexus </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript数组的插入和删除方法</title>
      <link href="/2020/07/07/66/"/>
      <url>/2020/07/07/66/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍Javascript数组的添加和删除的几个方法。</p><span id="more"></span><h2 id="数组的几个方法"><a href="#数组的几个方法" class="headerlink" title="数组的几个方法"></a>数组的几个方法</h2><h3 id="向数组中添加元素"><a href="#向数组中添加元素" class="headerlink" title="向数组中添加元素"></a>向数组中添加元素</h3><p>unshift() 方法可向数组的开头添加一个或更多元素，并返回新的长度。</p><p>push() 方法可向数组的末尾添加一个或多个元素，并返回新的长度。</p><h3 id="从数组中删除元素"><a href="#从数组中删除元素" class="headerlink" title="从数组中删除元素"></a>从数组中删除元素</h3><p>shift()方法用于把数组的第一个元素从其中删除，并返回第一个元素的值。</p><p>pop()方法删除并返回数组的最后一个元素</p><h2 id="清空数组"><a href="#清空数组" class="headerlink" title="清空数组"></a>清空数组</h2><p>可直接设置length的属性为0</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.w3school.com.cn/jsref/jsref_shift.asp">1、JavaScript unshift() 方法</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7474e60">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Magento2更新数据库配置</title>
      <link href="/2020/07/06/65/"/>
      <url>/2020/07/06/65/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍Magento2修改数据库及应用的ip地址。</p><span id="more"></span><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>OS:Ubuntu 18.04<br>PHP:7.2<br>Magento:2.3.1</p><h2 id="Magento更换数据库ip"><a href="#Magento更换数据库ip" class="headerlink" title="Magento更换数据库ip"></a>Magento更换数据库ip</h2><p>在magento2的部署路径中找到&#x2F;app&#x2F;etc&#x2F;env.php,找到数据库的相关配置，直接修改即可</p><h2 id="修改Magento的访问ip"><a href="#修改Magento的访问ip" class="headerlink" title="修改Magento的访问ip"></a>修改Magento的访问ip</h2><h3 id="修改数据库中的配置"><a href="#修改数据库中的配置" class="headerlink" title="修改数据库中的配置"></a>修改数据库中的配置</h3><p>Magento的访问ip是写入到数据库中的，先找到core_config_data表，然后修改web&#x2F;unsecure&#x2F;base_url和web&#x2F;secure&#x2F;base_url,改为新的域名或ip即可。</p><h3 id="更新缓存"><a href="#更新缓存" class="headerlink" title="更新缓存"></a>更新缓存</h3><p>删除magento部署目录下的 &#x2F;var&#x2F;cache ，然后使用新地址登录magento管理后台，系统-&gt;缓存管理，更新所有相应的缓存。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.howtoing.com/magento-2-database-configuration-file">1、Magento 2数据库配置文件</a><br><a href="https://liujia.anqun.org/index.php/archives/963/">2、为magento2站点更换访问网址（域名）</a><br><a href="https://alisonmarket.lofter.com/post/2b1789_1c808c676">3、封面图</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Magento </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ASP.NET WebSite动态编译实现线上快速调试</title>
      <link href="/2020/06/07/64/"/>
      <url>/2020/06/07/64/</url>
      
        <content type="html"><![CDATA[<p>从接触.NET到现在接近10年了，才发现ASP.NET网站项目可以实现c# 代码的动态编译及部署，妈妈再也不用担心我部署接口麻烦了～。</p><span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>最近在维护一个比较古老的ASP.NET的项目，只支持IE8的那种。项目是直接部署在IIS中的，接口使用的是一般处理程序(.ashx),无需编译，只要修改代码就会自动编译，当时觉得好厉害啊，之前做.NET的时候没有注意过这块内容，因此趁此机会就看下ASP.NET中的网站和Web应用程序的区别。</p><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>OS: Win 10 x64<br>IDE: VS 2010</p><h2 id="ASP-NET网站"><a href="#ASP-NET网站" class="headerlink" title="ASP.NET网站"></a>ASP.NET网站</h2><ol><li>可以直接把代码部署在IIS中，这样只要修改代码，代码就会动态编译，自定义的类会被放在App_Code目录中，这个目录在添加类时会自动创建的；</li><li>一个文件出错不影响整个项目；</li></ol><h2 id="与ASP-NET-Web应用程序的区别"><a href="#与ASP-NET-Web应用程序的区别" class="headerlink" title="与ASP.NET Web应用程序的区别"></a>与ASP.NET Web应用程序的区别</h2><p>相对来讲，ASP.NET Web应用程序可能会更加麻烦一点，它需要重新生成，再部署，而ASP.NET 网站则可直接编辑线上的文件，并且不会影响到其他的文件。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://docs.microsoft.com/en-us/previous-versions/aa730880(v=vs.80)">1、Introduction to Web Application Projects</a><br><a href="https://www.cnblogs.com/wfy680/p/11961305.html">2、[ASP.NET]Web网站与Web应用程序区别</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASP.NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue部署Nginx刷新页面404</title>
      <link href="/2020/06/07/63/"/>
      <url>/2020/06/07/63/</url>
      
        <content type="html"><![CDATA[<p>最近在把vuejs项目部署到Nginx去的时候，出现了两个问题：1. 刷新404 2. 菜单处的链接点击没反映。</p><span id="more"></span><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>OS: Deepin V20</p><h2 id="刷新页面404的问题"><a href="#刷新页面404的问题" class="headerlink" title="刷新页面404的问题"></a>刷新页面404的问题</h2><p>这个是vue-router的mode配置成了history的原因，可以通过在Nginx的配置文件中添加如下内容:</p><pre class="line-numbers language-none"><code class="language-none">location &#x2F;&#123;...try_files $uri $uri&#x2F; &#x2F;index.html;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="点击菜单进行页面跳转报错"><a href="#点击菜单进行页面跳转报错" class="headerlink" title="点击菜单进行页面跳转报错"></a>点击菜单进行页面跳转报错</h2><p>我这里是静态资源的路径错误，路径中多了一部分当前链接的内容，而不是&#x2F;static&#x2F;…,这里通过修改vue.config.js的publicPath的属性来解决。</p><ol><li>publicPath</li></ol><p>这个属性是页面js和css的静态资源路径，如果有需要，可以修改,也可以根据当前环境进行配置，如下：</p><pre class="line-numbers language-none"><code class="language-none">publicPath: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &quot;production&quot; ? &quot;.&#x2F;&quot; : &quot;&#x2F;&quot;,<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>outputDir</li></ol><p>这个属性是打包时生成的路径，可自行定义，也是在vue.config.js中设置。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/goloving/p/9170508.html">1、Vue路由history模式踩坑记录：nginx配置解决404问题</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJS </tag>
            
            <tag> VUE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSharp使用log4net记录日志的一次意外</title>
      <link href="/2020/04/30/62/"/>
      <url>/2020/04/30/62/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录一次 在asp.net中使用log4net记录日志 的部署事故。深觉还是祖传代码好啊，就像有些人说不出哪里好，但谁也替代不了。</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><h3 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h3><p>OS:win10 x64<br>.net framework 4.0<br>vs 2010<br>asp.net</p><h3 id="线上环境"><a href="#线上环境" class="headerlink" title="线上环境"></a>线上环境</h3><p>OS:windows server 2008 r2<br>.net framework 4.0</p><h2 id="安装Log4Net的包"><a href="#安装Log4Net的包" class="headerlink" title="安装Log4Net的包"></a>安装Log4Net的包</h2><p>如果是VS2012以上版本，可以直接使用Nuget包管理器进行安装，VS2010直接去log4net官网下载手动引用即可。</p><h2 id="Log4Net的初始化"><a href="#Log4Net的初始化" class="headerlink" title="Log4Net的初始化"></a>Log4Net的初始化</h2><p>Log4Net的初始化有以下两种方式：在修改AssemblyInfo.cs中初始化、在代码中初始化。</p><h3 id="修改AssemblyInfo-cs"><a href="#修改AssemblyInfo-cs" class="headerlink" title="修改AssemblyInfo.cs"></a>修改AssemblyInfo.cs</h3><p>[assembly: log4net.Config.XmlConfigurator(ConfigFile &#x3D; “log4net.config”, ConfigFileExtension &#x3D; “config”, Watch &#x3D; true)]</p><h3 id="使用代码初始化"><a href="#使用代码初始化" class="headerlink" title="使用代码初始化"></a>使用代码初始化</h3><p>这里log4net.config的读取方式同你的应用类型有关，这里是winform类型的应用程序：</p><pre class="line-numbers language-none"><code class="language-none">string path &#x3D; AppDomain.CurrentDomain.BaseDirectory + &quot;log4net&#x2F;log4net.config&quot;;log4net.Config.XmlConfigurator.ConfigureAndWatch(new System.IO.FileInfo(path));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="添加Log4net-config"><a href="#添加Log4net-config" class="headerlink" title="添加Log4net.config"></a>添加Log4net.config</h2><p>可通过vscode创建配置文件，将log4net的配置写入到<configuration>节点内</configuration></p><h3 id="配置一"><a href="#配置一" class="headerlink" title="配置一"></a>配置一</h3><p>这段配置了两类日志：Info和Error，全部写到文件中去;<br>注意：这段可能有问题，部署到线上时，无法写入变量，但是有记录的，暂不明原因;</p><pre class="line-numbers language-none"><code class="language-none">&lt;!-- Level的级别，由高到低 --&gt; &lt;!-- None &gt; Fatal &gt; ERROR &gt; WARN &gt; DEBUG &gt; INFO &gt; ALL--&gt; &lt;!-- 解释：如果level是ERROR，则在cs文件里面调用log4net的info()方法，则不会写入到日志文件中--&gt;&lt;log4net&gt;  &lt;!--错误日志类--&gt;  &lt;logger name&#x3D;&quot;logerror&quot;&gt;&lt;!--日志类的名字--&gt;    &lt;level value&#x3D;&quot;ALL&quot; &#x2F;&gt;&lt;!--定义记录的日志级别--&gt;    &lt;appender-ref ref&#x3D;&quot;ErrorAppender&quot; &#x2F;&gt;&lt;!--记录到哪个介质中去--&gt;  &lt;&#x2F;logger&gt;  &lt;!--信息日志类--&gt;  &lt;logger name&#x3D;&quot;loginfo&quot;&gt;    &lt;level value&#x3D;&quot;ALL&quot; &#x2F;&gt;    &lt;appender-ref ref&#x3D;&quot;InfoAppender&quot; &#x2F;&gt;  &lt;&#x2F;logger&gt;  &lt;!--错误日志附加介质--&gt;  &lt;appender name&#x3D;&quot;ErrorAppender&quot; type&#x3D;&quot;log4net.Appender.RollingFileAppender&quot;&gt;&lt;!-- name属性指定其名称,type则是log4net.Appender命名空间的一个类的名称,意思是,指定使用哪种介质--&gt;    &lt;param name&#x3D;&quot;File&quot; value&#x3D;&quot;Log\\LogError\\&quot; &#x2F;&gt;&lt;!--日志输出到exe程序这个相对目录下--&gt;    &lt;param name&#x3D;&quot;AppendToFile&quot; value&#x3D;&quot;true&quot; &#x2F;&gt;&lt;!--输出的日志不会覆盖以前的信息--&gt;    &lt;param name&#x3D;&quot;MaxSizeRollBackups&quot; value&#x3D;&quot;100&quot; &#x2F;&gt;&lt;!--备份文件的个数--&gt;    &lt;param name&#x3D;&quot;MaxFileSize&quot; value&#x3D;&quot;10240&quot; &#x2F;&gt;&lt;!--当个日志文件的最大大小--&gt;    &lt;param name&#x3D;&quot;StaticLogFileName&quot; value&#x3D;&quot;false&quot; &#x2F;&gt;&lt;!--是否使用静态文件名--&gt;    &lt;param name&#x3D;&quot;DatePattern&quot; value&#x3D;&quot;yyyyMMdd&quot;.htm&quot;&quot; &#x2F;&gt;&lt;!--日志文件名--&gt;    &lt;param name&#x3D;&quot;RollingStyle&quot; value&#x3D;&quot;Date&quot; &#x2F;&gt;&lt;!--文件创建的方式，这里是以Date方式创建--&gt;    &lt;!--错误日志布局--&gt;    &lt;layout type&#x3D;&quot;log4net.Layout.PatternLayout&quot;&gt;      &lt;param name&#x3D;&quot;ConversionPattern&quot; value&#x3D;&quot;&lt;HR COLOR&#x3D;red&gt;%n异常时间：%d [%t] &lt;BR&gt;%n异常级别：%-5p &lt;BR&gt;%n异 常 类：%c [%x] &lt;BR&gt;%n%m &lt;BR&gt;%n &lt;HR Size&#x3D;1&gt;&quot;  &#x2F;&gt;    &lt;&#x2F;layout&gt;  &lt;&#x2F;appender&gt;  &lt;!--信息日志附加介质--&gt;  &lt;appender name&#x3D;&quot;InfoAppender&quot; type&#x3D;&quot;log4net.Appender.RollingFileAppender&quot;&gt;    &lt;param name&#x3D;&quot;File&quot; value&#x3D;&quot;Log\\LogInfo\\&quot; &#x2F;&gt;    &lt;param name&#x3D;&quot;AppendToFile&quot; value&#x3D;&quot;true&quot; &#x2F;&gt;    &lt;param name&#x3D;&quot;MaxFileSize&quot; value&#x3D;&quot;10240&quot; &#x2F;&gt;    &lt;param name&#x3D;&quot;MaxSizeRollBackups&quot; value&#x3D;&quot;100&quot; &#x2F;&gt;    &lt;param name&#x3D;&quot;StaticLogFileName&quot; value&#x3D;&quot;false&quot; &#x2F;&gt;    &lt;param name&#x3D;&quot;DatePattern&quot; value&#x3D;&quot;yyyyMMdd&quot;.htm&quot;&quot; &#x2F;&gt;    &lt;param name&#x3D;&quot;RollingStyle&quot; value&#x3D;&quot;Date&quot; &#x2F;&gt;    &lt;!--信息日志布局--&gt;    &lt;layout type&#x3D;&quot;log4net.Layout.PatternLayout&quot;&gt;      &lt;param name&#x3D;&quot;ConversionPattern&quot; value&#x3D;&quot;&lt;HR COLOR&#x3D;blue&gt;%n日志时间：%d [%t] &lt;BR&gt;%n日志级别：%-5p &lt;BR&gt;%n日 志 类：%c [%x] &lt;BR&gt;%n%m &lt;BR&gt;%n &lt;HR Size&#x3D;1&gt;&quot;  &#x2F;&gt;    &lt;&#x2F;layout&gt;  &lt;&#x2F;appender&gt;&lt;&#x2F;log4net&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对应的帮助类LogHelper.cs</p><pre class="line-numbers language-none"><code class="language-none">public class LogHelper    &#123;        public static readonly log4net.ILog loginfo &#x3D; log4net.LogManager.GetLogger(&quot;loginfo&quot;);&#x2F;&#x2F;这里的 loginfo 和 log4net.config 里的名字要一样        public static readonly log4net.ILog logerror &#x3D; log4net.LogManager.GetLogger(&quot;logerror&quot;);&#x2F;&#x2F;这里的 logerror 和 log4net.config 里的名字要一样        public static void WriteLog(string info)        &#123;            if (loginfo.IsInfoEnabled)            &#123;                loginfo.Info(info);            &#125;        &#125;        public static void WriteLog(string info, Exception ex)        &#123;            if (logerror.IsErrorEnabled)            &#123;                logerror.Error(info, ex);            &#125;        &#125;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="配置二"><a href="#配置二" class="headerlink" title="配置二"></a>配置二</h3><p>这段可以正常部署，也是之前项目中使用过的，当时是winform+owin这种形式，有web,有桌面端的项目。</p><pre class="line-numbers language-none"><code class="language-none">&lt;configSections&gt;    &lt;section name&#x3D;&quot;log4net&quot; type&#x3D;&quot;log4net.Config.Log4NetConfigurationSectionHandler,log4net&quot;&gt;&lt;&#x2F;section&gt;  &lt;&#x2F;configSections&gt;  &lt;log4net&gt;    &lt;root&gt;      &lt;level value&#x3D;&quot;ALL&quot;&gt;&lt;&#x2F;level&gt;    &lt;&#x2F;root&gt;    &lt;logger name&#x3D;&quot;OneCardRequest&quot;&gt;      &lt;level value&#x3D;&quot;INFO&quot; &#x2F;&gt;      &lt;appender-ref ref&#x3D;&quot;rollingRequestFile&quot; &#x2F;&gt;    &lt;&#x2F;logger&gt;    &lt;logger name&#x3D;&quot;OneCardResult&quot;&gt;      &lt;level value&#x3D;&quot;INFO&quot; &#x2F;&gt;      &lt;appender-ref ref&#x3D;&quot;rollingResultFile&quot; &#x2F;&gt;    &lt;&#x2F;logger&gt;    &lt;logger name&#x3D;&quot;OneCardException&quot;&gt;      &lt;level value&#x3D;&quot;ERROR&quot; &#x2F;&gt;      &lt;appender-ref ref&#x3D;&quot;rollingExceptionFile&quot; &#x2F;&gt;    &lt;&#x2F;logger&gt;    &lt;logger name&#x3D;&quot;InfoLog&quot;&gt;      &lt;level value&#x3D;&quot;ALL&quot; &#x2F;&gt;      &lt;appender-ref ref&#x3D;&quot;rollingInfoFile&quot; &#x2F;&gt;    &lt;&#x2F;logger&gt;    &lt;appender name&#x3D;&quot;rollingRequestFile&quot; type&#x3D;&quot;log4net.Appender.RollingFileAppender,log4net&quot; &gt;      &lt;param name&#x3D;&quot;File&quot; type&#x3D;&quot;&quot; value&#x3D;&quot;Log&#x2F;Request&#x2F;&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;AppendToFile&quot; value&#x3D;&quot;true&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;RollingStyle&quot; value&#x3D;&quot;Date&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;DatePattern&quot; value&#x3D;&quot;yyyyMMdd&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;StaticLogFileName&quot; value&#x3D;&quot;false&quot; &#x2F;&gt;      &lt;layout type&#x3D;&quot;log4net.Layout.PatternLayout,log4net&quot;&gt;        &lt;param name&#x3D;&quot;ConversionPattern&quot; value&#x3D;&quot;%n[%d] %c %n%m%n%n&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Header&quot; value&#x3D;&quot;-----------BEGIN-----------&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Footer&quot; value&#x3D;&quot;------------END------------&quot; &#x2F;&gt;      &lt;&#x2F;layout&gt;    &lt;&#x2F;appender&gt;    &lt;appender name&#x3D;&quot;rollingResultFile&quot; type&#x3D;&quot;log4net.Appender.RollingFileAppender,log4net&quot; &gt;      &lt;param name&#x3D;&quot;File&quot; type&#x3D;&quot;&quot; value&#x3D;&quot;Log&#x2F;Result&#x2F;&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;AppendToFile&quot; value&#x3D;&quot;true&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;RollingStyle&quot; value&#x3D;&quot;Date&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;DatePattern&quot; value&#x3D;&quot;yyyyMMdd&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;StaticLogFileName&quot; value&#x3D;&quot;false&quot; &#x2F;&gt;      &lt;layout type&#x3D;&quot;log4net.Layout.PatternLayout,log4net&quot;&gt;        &lt;param name&#x3D;&quot;ConversionPattern&quot; value&#x3D;&quot;%n[%d] %c %n%m%n%n&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Header&quot; value&#x3D;&quot;-----------BEGIN-----------&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Footer&quot; value&#x3D;&quot;------------END------------&quot; &#x2F;&gt;      &lt;&#x2F;layout&gt;    &lt;&#x2F;appender&gt;    &lt;appender name&#x3D;&quot;rollingExceptionFile&quot; type&#x3D;&quot;log4net.Appender.RollingFileAppender,log4net&quot; &gt;      &lt;param name&#x3D;&quot;File&quot; type&#x3D;&quot;&quot; value&#x3D;&quot;Log&#x2F;Exception&#x2F;&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;AppendToFile&quot; value&#x3D;&quot;true&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;RollingStyle&quot; value&#x3D;&quot;Date&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;DatePattern&quot; value&#x3D;&quot;yyyyMMddHH&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;StaticLogFileName&quot; value&#x3D;&quot;false&quot; &#x2F;&gt;      &lt;layout type&#x3D;&quot;log4net.Layout.PatternLayout,log4net&quot;&gt;        &lt;param name&#x3D;&quot;ConversionPattern&quot; value&#x3D;&quot;%n[%d] %c %n%m%n%n&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Header&quot; value&#x3D;&quot;-----------BEGIN-----------&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Footer&quot; value&#x3D;&quot;------------END------------&quot; &#x2F;&gt;      &lt;&#x2F;layout&gt;    &lt;&#x2F;appender&gt;    &lt;appender name&#x3D;&quot;rollingInfoFile&quot; type&#x3D;&quot;log4net.Appender.RollingFileAppender,log4net&quot; &gt;      &lt;param name&#x3D;&quot;File&quot; type&#x3D;&quot;&quot; value&#x3D;&quot;Log&#x2F;Info&#x2F;&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;AppendToFile&quot; value&#x3D;&quot;true&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;RollingStyle&quot; value&#x3D;&quot;Date&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;DatePattern&quot; value&#x3D;&quot;yyyyMMdd&quot; &#x2F;&gt;      &lt;param name&#x3D;&quot;StaticLogFileName&quot; value&#x3D;&quot;false&quot; &#x2F;&gt;      &lt;layout type&#x3D;&quot;log4net.Layout.PatternLayout,log4net&quot;&gt;        &lt;param name&#x3D;&quot;ConversionPattern&quot; value&#x3D;&quot;%n[%d] %c %n%m%n%n&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Header&quot; value&#x3D;&quot;-----------BEGIN-----------&quot; &#x2F;&gt;        &lt;param name&#x3D;&quot;Footer&quot; value&#x3D;&quot;------------END------------&quot; &#x2F;&gt;      &lt;&#x2F;layout&gt;    &lt;&#x2F;appender&gt;  &lt;&#x2F;log4net&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>帮助类：</p><pre class="line-numbers language-none"><code class="language-none">public class Log4netUtility    &#123;        public static void initialLog4Net() &#123;            &#x2F;&#x2F;log4net.Config.XmlConfigurator.ConfigureAndWatch(new )                        string path &#x3D; AppDomain.CurrentDomain.BaseDirectory + &quot;log4net&#x2F;log4net.config&quot;;            log4net.Config.XmlConfigurator.ConfigureAndWatch(new System.IO.FileInfo(path));        &#125;        public static string Exception(string id, Exception ex, string attachMessage) &#123;            string result &#x3D; string.Empty;            &#x2F;&#x2F;log4net的初始化有两种形式:1.如下 2.写在应用程序集中(见AssemeblyInfo.cs)            &#x2F;&#x2F;log4net.Config.XmlConfigurator.ConfigureAndWatch(new System.IO.FileInfo(&quot;log4net.config&quot;));            log4net.ILog log &#x3D; log4net.LogManager.GetLogger(&quot;OneCardException&quot;);            if (!log.IsErrorEnabled)                initialLog4Net();                               if (log.IsErrorEnabled) &#123;                string strMessage &#x3D; string.Format(&quot;RequestID:&#123;0&#125;\r\nMesssage:&#123;1&#125;\r\nStackTrace:&#123;2&#125;\r\nAttachMessage:&#123;3&#125;&quot;, id, ex.Message, ex.StackTrace, attachMessage);                log.Error(strMessage);                result &#x3D; strMessage;            &#125;            log &#x3D; null;            return result;        &#125;        &#x2F;&#x2F;&#x2F; &lt;summary&gt;        &#x2F;&#x2F;&#x2F; 追加一条一卡通请求日志信息        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;id&quot;&gt;请求ID&lt;&#x2F;param&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;ip&quot;&gt;请求的IP地址&lt;&#x2F;param&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;datetime&quot;&gt;时间&lt;&#x2F;param&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;strParam&quot;&gt;请求时传入的参数&lt;&#x2F;param&gt;        public static void RequestLog(string id, string ip, string datetime, string strParam)        &#123;            log4net.ILog log &#x3D; log4net.LogManager.GetLogger(&quot;OneCardRequest&quot;);            if (!log.IsInfoEnabled)                initialLog4Net();            if (log.IsInfoEnabled)            &#123;                string strMessage &#x3D; string.Format(&quot;RequestID:&#123;0&#125;\r\nIP:&#123;1&#125;\r\nDateTime:&#123;2&#125;\r\nParam:&#123;3&#125;&quot;, id, ip, datetime, strParam);                log.Info(strMessage);            &#125;            log &#x3D; null;        &#125;        &#x2F;&#x2F;&#x2F; &lt;summary&gt;        &#x2F;&#x2F;&#x2F; 追加一条一卡通处理结果日志        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;id&quot;&gt;请求ID&lt;&#x2F;param&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;datetime&quot;&gt;时间&lt;&#x2F;param&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;strResult&quot;&gt;处理结果&lt;&#x2F;param&gt;        public static void ResultLog(string id, string datetime, string strResult)        &#123;            log4net.ILog log &#x3D; log4net.LogManager.GetLogger(&quot;OneCardResult&quot;);            if (!log.IsInfoEnabled)                initialLog4Net();            if (log.IsInfoEnabled)            &#123;                string strMessage &#x3D; string.Format(&quot;RequestID:&#123;0&#125;\r\nDateTime:&#123;1&#125;\r\nParam:&#123;2&#125;&quot;, id, datetime, strResult);                log.Info(strMessage);            &#125;            log &#x3D; null;        &#125;        &#x2F;&#x2F;&#x2F; &lt;summary&gt;        &#x2F;&#x2F;&#x2F; 追加一条普通的日志信息        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;message&quot;&gt;日志内容&lt;&#x2F;param&gt;        public static void Info(string message)        &#123;            log4net.ILog log &#x3D; log4net.LogManager.GetLogger(&quot;InfoLog&quot;);            if (!log.IsInfoEnabled)                initialLog4Net();            if (log.IsInfoEnabled)            &#123;                log.Info(message);            &#125;            log &#x3D; null;        &#125;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="配置小结"><a href="#配置小结" class="headerlink" title="配置小结"></a>配置小结</h3><ol><li><p>每个配置文件中都有logger(通常有多个),每个logger有appender属性，其描述了日志的格式、存储方式、更新方式等信息</p></li><li><p>代码中引用时通过LogManager获取配置文件中定义的logger,通过logger对象调用Info,Error,Debug等方法</p></li></ol><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/kliine/p/10950859.html">1. C# 使用log4net记录日志</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8f12e12">2. 封面图源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ASP.NET Web API中处理跨域请求</title>
      <link href="/2020/04/10/60/"/>
      <url>/2020/04/10/60/</url>
      
        <content type="html"><![CDATA[<p>跨域是非常常见的一个问题，本文主要记录ASP.NET Web API中对跨域请求的处理。</p><span id="more"></span><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>OS: win10<br>编译器：visual studio 2019</p><h2 id="配置web-config允许跨域"><a href="#配置web-config允许跨域" class="headerlink" title="配置web.config允许跨域"></a>配置web.config允许跨域</h2><p>在system.webServer节点中添加如下customHeaders,如下：</p><pre class="line-numbers language-none"><code class="language-none">&lt;system.webServer&gt;&lt;httpProtocol&gt;      &lt;customHeaders&gt;        &lt;add name&#x3D;&quot;Access-Control-Allow-Origin&quot; value&#x3D;&quot;*&quot; &#x2F;&gt;        &lt;add name&#x3D;&quot;Access-Control-Allow-Headers&quot; value&#x3D;&quot;Content-Type&quot; &#x2F;&gt;        &lt;add name&#x3D;&quot;Access-Control-Allow-Methods&quot; value&#x3D;&quot;GET, POST, PUT, DELETE, OPTIONS&quot; &#x2F;&gt;      &lt;&#x2F;customHeaders&gt;    &lt;&#x2F;httpProtocol&gt;  &lt;&#x2F;system.webServer&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中Access-Control-Allow-Headers表示IIS允许接受的headers的集合，如果请求头中需要添加自定义内容，value需要设置为如下内容:</p><pre class="line-numbers language-none"><code class="language-none">&lt;add name&#x3D;&quot;Access-Control-Allow-Headers&quot; value&#x3D;&quot;Origin,X-Requested-With,Content-Type,accept,key&quot; &#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中key表示请求头中的键。</p><h2 id="在Global-asax中添加对OPTIONS请求的处理"><a href="#在Global-asax中添加对OPTIONS请求的处理" class="headerlink" title="在Global.asax中添加对OPTIONS请求的处理"></a>在Global.asax中添加对OPTIONS请求的处理</h2><h3 id="关于OPTIONS请求"><a href="#关于OPTIONS请求" class="headerlink" title="关于OPTIONS请求"></a>关于OPTIONS请求</h3><p>在 CORS 中，可以使用 OPTIONS 方法发起一个预检请求，以检测实际请求是否可以被服务器所接受。预检请求报文中的 Access-Control-Request-Method 首部字段告知服务器实际请求所使用的 HTTP 方法；Access-Control-Request-Headers 首部字段告知服务器实际请求所携带的自定义首部字段。服务器基于从预检请求获得的信息来判断，是否接受接下来的实际请求。</p><p>之前大概2017年我写跨域的解决方案的时候是没有OPTIONS请求的，但现在OPTIONS请求已经成了规范，即满足某些特定条件下，浏览器必须要首先使用OPTIONS发放发送一个预检请求到服务器。可参考MDN中的<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS">HTTP访问控制</a>中对此部分的描述。</p><h3 id="对所有的options请求返回"><a href="#对所有的options请求返回" class="headerlink" title="对所有的options请求返回"></a>对所有的options请求返回</h3><p>在Global.asax中添加如下内容：</p><pre class="line-numbers language-none"><code class="language-none">protected void Application_BeginRequest(object sender, EventArgs e)       &#123;           var req &#x3D; System.Web.HttpContext.Current.Request;           if (req.HttpMethod &#x3D;&#x3D; &quot;OPTIONS&quot;)&#x2F;&#x2F;过滤options请求，用于js跨域           &#123;               Response.StatusCode &#x3D; 200;               Response.SubStatusCode &#x3D; 200;               Response.End();           &#125;       &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/tlzzu/p/4365112.html">1、Asp.Net WebApi对js POST带参数跨域请求的支持方案</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/OPTIONS">2、OPTIONS-HTTP|MDN</a><br><a href="http://www.fed123.com/javascriptnodejs/4798.html">3、什么时候会发送options请求</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">4、封面图源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> ASP.NET </tag>
            
            <tag> CORS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx中的安全配置</title>
      <link href="/2020/04/10/58/"/>
      <url>/2020/04/10/58/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍Nginx中的一些安全配置。</p><span id="more"></span><h2 id="屏蔽某些访问链接"><a href="#屏蔽某些访问链接" class="headerlink" title="屏蔽某些访问链接"></a>屏蔽某些访问链接</h2><p>如所有包含有feed的链接都会直接返回403</p><pre class="line-numbers language-none"><code class="language-none">location &#x2F;feed &#123;deny all;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="通过UA禁止某些非正常的客户端的访问"><a href="#通过UA禁止某些非正常的客户端的访问" class="headerlink" title="通过UA禁止某些非正常的客户端的访问"></a>通过UA禁止某些非正常的客户端的访问</h2><p>这里主要禁止爬虫、httpclient等的访问。<br>在Nginx安装目录新建一个agent_deny.conf文件，添加如下内容:</p><pre class="line-numbers language-none"><code class="language-none">if ($http_user_agent ~* (Scrapy|masscan|Curl|HttpClient|fasthttp)) &#123;     return 403;&#125;# 禁止指定UA及UA为空的访问if ($http_user_agent ~ &quot;zgrab|Go-http-client|Dataprovider.com|bing|Wappalyzer|libwww-perl|bingbot|WinHttp|WebZIP|FetchURL|node-superagent|java&#x2F;|FeedDemon|Jullo|JikeSpider|Indy Library|Alexa Toolbar|AskTbFXTV|AhrefsBot|CrawlDaddy|Java|Feedly|Apache-HttpAsyncClient|UniversalFeedParser|ApacheBench|Microsoft URL Control|Swiftbot|ZmEu|oBot|jaunty|Python-urllib|lightDeckReports Bot|YYSpider|DigExt|HttpClient|MJ12bot|heritrix|Ezooms|BOT&#x2F;0.1|YandexBot|FlightDeckReports|Linguee Bot|^$&quot; ) &#123;     return 403;&#125;if ($http_user_agent ~* &quot;Googlebot|Googlebot-Mobile|Googlebot-Image|Mediapartners-Google|Adsbot-Google|Feedfetcher-Google|Yahoo! Slurp|Yahoo! Slurp China|YoudaoBot|MSNBot|ia_archiver|Tomato Bot&quot;)&#123;return 403;&#125;if ($http_user_agent ~* &quot;ApiTool&quot;) &#123;return 403;&#125;if ($http_user_agent ~* &quot;python&quot;) &#123;return 403;&#125;if ($http_user_agent ~* &quot;bingbot&quot;) &#123;return 403;&#125;if ($http_user_agent ~* &quot;Nimbostratus-Bot&quot;) &#123;return 403;&#125;if ($http_user_agent ~* &quot;Go-Ahead-Got-It&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;GetWeb!&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;Go!Zilla&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;Download Demon&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;Indy Library&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;libwww-perl&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;Nmap Scripting Engine&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;~17ce.com&quot;) &#123; return 403; &#125;if ($http_user_agent ~* &quot;WebBench*&quot;) &#123; return 403; &#125;# if ($http_user_agent ~* &quot;spider&quot;) &#123; return 403; &#125; # 这个会影响国内某些搜索引擎爬虫，比如：搜狗# 禁止非GET|HEAD|POST方式的抓取if ($request_method !~ ^(GET|HEAD|POST)$) &#123;    return 403;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后在server内添加 include ..&#x2F;agent_deny.conf即可，这里输入具体的文件的路径。</p><h2 id="屏蔽某些ip"><a href="#屏蔽某些ip" class="headerlink" title="屏蔽某些ip"></a>屏蔽某些ip</h2><p>在nginx.conf同级目录下创建文件blocksip.conf，在http节点增加以下配置（也可以设置在server节点对单个网站起作用，或location节点只针对特定访问路径的限制）</p><pre class="line-numbers language-none"><code class="language-none">include blocksip.conf;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>blockip.conf中的内容如下：</p><pre class="line-numbers language-none"><code class="language-none">deny xxx;allow xxx;deny all; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="隐藏X-Powerer"><a href="#隐藏X-Powerer" class="headerlink" title="隐藏X-Powerer"></a>隐藏X-Powerer</h2><p>在http下添加以下内容:</p><pre class="line-numbers language-none"><code class="language-none">fastcgi_hide_header X-Powered-Byproxy_hide_header X-Powered-By<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="响应头配置"><a href="#响应头配置" class="headerlink" title="响应头配置"></a>响应头配置</h2><pre class="line-numbers language-none"><code class="language-none"># 减少点击劫持add_header X-Frame-Options SAMEORIGIN;&#x2F;&#x2F;也可设置为DENY # 禁止服务器自动解析资源类型add_header X-Content-Type-Options nosniff;# 防XSS攻击add_header X-Xss-Protection 1; mode&#x3D;block;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="https配置"><a href="#https配置" class="headerlink" title="https配置"></a>https配置</h2><pre class="line-numbers language-none"><code class="language-none">ssl_certificate   ..&#x2F;cert&#x2F;192.168.10.106.pem;ssl_certificate_key  ..&#x2F;cert&#x2F;192.168.10.106-key.pem;ssl_session_timeout 5m;ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;ssl_protocols TLSv1 TLSv1.1 TLSv1.2;ssl_prefer_server_ciphers on;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="增强cookie的安全性"><a href="#增强cookie的安全性" class="headerlink" title="增强cookie的安全性"></a>增强cookie的安全性</h2><pre class="line-numbers language-none"><code class="language-none"># 只支持 proxy 模式下设置，SameSite 不需要可删除，如果想更安全可以把 SameSite 设置为 Strictproxy_cookie_path &#x2F; &quot;&#x2F;; httponly; secure; SameSite&#x3D;Lax&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="80自动重定向至443"><a href="#80自动重定向至443" class="headerlink" title="80自动重定向至443"></a>80自动重定向至443</h2><p>server节点下添加：</p><pre class="line-numbers language-none"><code class="language-none">listen 80;server_name xxx.xxx.xx; # 你的域名rewrite ^(.*)$ https:&#x2F;&#x2F;$&#123;server_name&#125;$1 permanent;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="Nginx中IF语句的AND-OR等多重判断"><a href="#Nginx中IF语句的AND-OR等多重判断" class="headerlink" title="Nginx中IF语句的AND OR等多重判断"></a>Nginx中IF语句的AND OR等多重判断</h2><p>nginx的配置中不支持if条件的逻辑与／逻辑或运算 ，并且不支持if的嵌套语法，我们可以用变量的方式来实现：</p><pre class="line-numbers language-none"><code class="language-none">set $flag 0;if ($host !&#x3D; &#39;www.imfeng.com&#39;) &#123;    set $flag &quot;$&#123;flag&#125;1&quot;;&#125;if ($http_user_agent !&#x3D; &#39;spider&#39;) &#123;    set $flag &quot;$&#123;flag&#125;2&quot;;&#125;if ($flag &#x3D; &quot;012&quot;) &#123;    rewrite ^&#x2F;(.*)$ http:&#x2F;&#x2F;www.imfeng.com&#x2F;$1 permanent;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/ieinstein/p/7083551.html?utm_source=itdadao&utm_medium=referral">1、nginx常用配置系列-HTTPS配置</a><br><a href="https://blog.cat73.org/20170802/2017080201.nginx-cookie-sucure/">2、用 Nginx 自动给 Cookie 增加 Secure 和 HttpOnly</a><br><a href="https://www.cnblogs.com/aguncn/p/4179035.html">3、NGINX实现IF语句里的AND，OR多重判断</a><br><a href="https://www.cnblogs.com/gouyg/p/10632243.html">4、通过监控Nginx日志来实时屏蔽高频恶意访问的IP</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8bfba2e">4、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu18.04配置深度学习环境</title>
      <link href="/2020/04/02/56/"/>
      <url>/2020/04/02/56/</url>
      
        <content type="html"><![CDATA[<p>这篇文章主要记录Ubuntu18.04.2下新配置深度学习环境的过程。</p><span id="more"></span><h2 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h2><p>OS：Ubuntu 18.04.2<br>CUDA: 10.0</p><h2 id="Ubuntuk开机没有系统选择界面直接进入系统"><a href="#Ubuntuk开机没有系统选择界面直接进入系统" class="headerlink" title="Ubuntuk开机没有系统选择界面直接进入系统"></a>Ubuntuk开机没有系统选择界面直接进入系统</h2><p>修改：&#x2F;etc&#x2F;default&#x2F;grub文件<br>调整完之后：</p><pre class="line-numbers language-none"><code class="language-none">update-grub<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>固件错误Possible missing firmware解决办法<br><a href="https://www.cnblogs.com/magikos/p/Possible-missing-firmware.html">https://www.cnblogs.com/magikos/p/Possible-missing-firmware.html</a></p><p>linux ubuntu18.04 update-initramfs -u提示The initramfs will attempt to resume from &#x2F;dev&#x2F;nvme0n1p3</p><p><a href="https://blog.csdn.net/qxqxqzzz/article/details/112025423">https://blog.csdn.net/qxqxqzzz/article/details/112025423</a></p><p>cv2.rectangle的一点小坑<br><a href="https://www.freesion.com/article/99031345965/">https://www.freesion.com/article/99031345965/</a></p><p>详解报错[zmq.error.ZMQError: Operation cannot be accomplished in current state]<br><a href="https://blog.csdn.net/ybdesire/article/details/81435291">https://blog.csdn.net/ybdesire/article/details/81435291</a></p><h2 id="N卡驱动Ubuntu卡死的情况"><a href="#N卡驱动Ubuntu卡死的情况" class="headerlink" title="N卡驱动Ubuntu卡死的情况"></a>N卡驱动Ubuntu卡死的情况</h2><p>修改启动配置，在系统启动选择界面中，按e，编辑启动项，<br>然后在quiet splash后面加入nomodeset，点击F10即可。</p><h2 id="更换为国内源"><a href="#更换为国内源" class="headerlink" title="更换为国内源"></a>更换为国内源</h2><p>先备份当前源文件</p><pre class="line-numbers language-none"><code class="language-none">mv &#x2F;etc&#x2F;apt&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;sourses.list.backup<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>新增及编辑</p><pre class="line-numbers language-none"><code class="language-none">sudo gedit &#x2F;etc&#x2F;apt&#x2F;sources.list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>替换为阿里源，写入如下内容：</p><pre class="line-numbers language-none"><code class="language-none">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiverse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>完成之后，执行apt update</p><p>参考：<a href="https://www.bbsmax.com/A/obzbMrKBdE/">Ubuntu18.04更换国内源</a></p><h2 id="安装搜狗输入法"><a href="#安装搜狗输入法" class="headerlink" title="安装搜狗输入法"></a>安装搜狗输入法</h2><ol><li>先下载并安装搜狗输入法，之后，在设置-&gt;区域和语言-&gt;管理已安装的语言</li><li>键盘输入法系统选择fcitx即可(如果没有，等会弹出语言支持的时候根据提示安装缺少的语言包即可)</li><li>选择完毕之后重启系统</li></ol><h2 id="安装Navida显卡驱动"><a href="#安装Navida显卡驱动" class="headerlink" title="安装Navida显卡驱动"></a>安装Navida显卡驱动</h2><h3 id="删除自带的显卡驱动并禁用"><a href="#删除自带的显卡驱动并禁用" class="headerlink" title="删除自带的显卡驱动并禁用"></a>删除自带的显卡驱动并禁用</h3><p>sudo -s<br>apt-get purge nvidia*<br>vim &#x2F;etc&#x2F;modprobe.d&#x2F;blacklist-nouveau.conf</p><pre class="line-numbers language-none"><code class="language-none">blacklist nouveauoptions nouveau modeset&#x3D;0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>update-initramfs -u</p><p>重启系统：reboot</p><h3 id="安装navida显卡驱动"><a href="#安装navida显卡驱动" class="headerlink" title="安装navida显卡驱动"></a>安装navida显卡驱动</h3><p>add-apt-repository ppa:graphics-drivers&#x2F;ppa<br>apt-get update<br>列出可安装的显卡驱动：<br>ubuntu-drivers devices<br>apt-get install nvidia-driver-440<br>reboot</p><h3 id="检测是否安装成功"><a href="#检测是否安装成功" class="headerlink" title="检测是否安装成功"></a>检测是否安装成功</h3><pre class="line-numbers language-none"><code class="language-none">sudo nvidia-smiwatch -n 1 -d nvidia-smi &#x2F;&#x2F;实时更新sudo nvidia-settings<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="安装cuda-深度学习使用"><a href="#安装cuda-深度学习使用" class="headerlink" title="安装cuda(深度学习使用)"></a>安装cuda(深度学习使用)</h2><h3 id="1-安装依赖项："><a href="#1-安装依赖项：" class="headerlink" title="1. 安装依赖项："></a>1. 安装依赖项：</h3><p>apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libgl1-mesa-glx libglu1-mesa libglu1-mesa-dev</p><h3 id="2-下载cuda安装包：cuda-10-0-130-410-48-linux-run"><a href="#2-下载cuda安装包：cuda-10-0-130-410-48-linux-run" class="headerlink" title="2. 下载cuda安装包：cuda_10.0.130_410.48_linux.run"></a>2. 下载cuda安装包：cuda_10.0.130_410.48_linux.run</h3><p><a href="https://developer.nvidia.com/cuda-10.0-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1804&amp;target_type=runfilelocal">https://developer.nvidia.com/cuda-10.0-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1804&amp;target_type=runfilelocal</a></p><p>这里cuda的安装位置为：&#x2F;usr&#x2F;local&#x2F;cuda-10.0</p><h3 id="3-配置环境变量"><a href="#3-配置环境变量" class="headerlink" title="3. 配置环境变量:"></a>3. 配置环境变量:</h3><p>vi &#x2F;etc&#x2F;profile<br>添加一下内容：</p><pre class="line-numbers language-none"><code class="language-none">export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;cuda-10.0&#x2F;bin$&#123;PATH:+:$&#123;PATH&#125;&#125;  export LD_LIBRARY_PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;cuda-10.0&#x2F;lib64$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>保存：source &#x2F;etc&#x2F;profile</p><h3 id="4-测试cuda是否安装成功"><a href="#4-测试cuda是否安装成功" class="headerlink" title="4. 测试cuda是否安装成功"></a>4. 测试cuda是否安装成功</h3><pre class="line-numbers language-none"><code class="language-none"># 第一步，进入例子文件cd &#x2F;usr&#x2F;local&#x2F;cuda-10.0&#x2F;samples&#x2F;1_Utilities&#x2F;deviceQuery# 第二步，执行make命令sudo make# 第三步.&#x2F;deviceQuery<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果结果有GPU的信息，说明安装成功。</p><h3 id="4-安装cudnn"><a href="#4-安装cudnn" class="headerlink" title="4. 安装cudnn"></a>4. 安装cudnn</h3><p>直接下载cudnn的安装包安装即可</p><h2 id="升级CUDA版本"><a href="#升级CUDA版本" class="headerlink" title="升级CUDA版本"></a>升级CUDA版本</h2><p>这里是从CUDA10.0的版本升级到10.2,安装10.2之前,要先吧CUDA10.0以及nvidia driver卸载掉,否则无法安装.</p><h3 id="CUDA的卸载"><a href="#CUDA的卸载" class="headerlink" title="CUDA的卸载"></a>CUDA的卸载</h3><pre class="line-numbers language-none"><code class="language-none">cd &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;binsudo .&#x2F;uninstall_cuda_10.0.pl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="nvidia驱动卸载"><a href="#nvidia驱动卸载" class="headerlink" title="nvidia驱动卸载"></a>nvidia驱动卸载</h3><p>参考[删除自带的显卡驱动并禁用](###  删除自带的显卡驱动并禁用)</p><h3 id="安装CUDA"><a href="#安装CUDA" class="headerlink" title="安装CUDA"></a>安装CUDA</h3><p><strong>注意</strong>:CUDA10.2中已经自带了nvidia的驱动,直接安装就可以了,环境变量的配置同之前的保持一致即可.</p><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><h3 id="应用程序启动器“XXX-desktop”还没有被标记为可信任的问题"><a href="#应用程序启动器“XXX-desktop”还没有被标记为可信任的问题" class="headerlink" title="应用程序启动器“XXX.desktop”还没有被标记为可信任的问题"></a>应用程序启动器“XXX.desktop”还没有被标记为可信任的问题</h3><p>在terminal中，输入以下命令，以root权限打开文件管理窗口<br>sudo nautilus<br>然后找到*.desktop图标，选择所有者为root,勾选允许作为程序执行文件，关闭终端，重新打开.desktop信任即可。</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://blog.csdn.net/weixin_41863685/article/details/80303963">1.Ubuntu18.04深度学习GPU环境配置</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c8a36320">2.封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> 系统安装配置 </tag>
            
            <tag> 深度学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejs前端项目搭建及更换渲染页面为html</title>
      <link href="/2020/03/27/54/"/>
      <url>/2020/03/27/54/</url>
      
        <content type="html"><![CDATA[<p>之前使用nodejs做了服务端的接口，这篇文章作为姊妹篇，主要介绍NodeJS前端项目的创建。</p><span id="more"></span><h2 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h2><ol><li>OS:win10 ×64</li><li>NodeJS: v10.15.3</li><li>npm : 6.4.1</li></ol><h2 id="前端项目创建"><a href="#前端项目创建" class="headerlink" title="前端项目创建"></a>前端项目创建</h2><ol><li>安装express及express-generator<pre class="line-numbers language-none"><code class="language-none">npm install express -gnpm install express-generator -g<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li>创建项目<pre class="line-numbers language-none"><code class="language-none">express app_namecd app_namenpm installnpm start<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>如果中间没有什么错误，那在浏览器中输入<a href="http://localhost:3000/">http://localhost:3000/</a> 就可以访问你新创建的项目了。</li></ol><h2 id="将默认的模板引擎改为ejs-html"><a href="#将默认的模板引擎改为ejs-html" class="headerlink" title="将默认的模板引擎改为ejs(html)"></a>将默认的模板引擎改为ejs(html)</h2><p>express默认使用的是jade，页面后缀为.jad,对于我这种临时使用下nodejs写点页面的人来说完全不熟悉，因此改用使用html的ejs作为其模板引擎。</p><ol><li>安装ejs<pre class="line-numbers language-none"><code class="language-none">npm install ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>在app.js中配置ejs<br>将express-generaotr自动生成的部分<pre class="line-numbers language-none"><code class="language-none">app.set(&#39;view engine&#39;, &#39;jade&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>替换为：<pre class="line-numbers language-none"><code class="language-none">var ejs &#x3D; require(&#39;ejs&#39;);app.engine(&#39;.html&#39;,ejs.__express);app.set(&#39;view engine&#39;, &#39;html&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>到这里应该就可以了，直接在views内写自己的html即可，路由可直接在routes中的index.js进行配置。</li></ol><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="http://www.doocr.com/articles/58e670f1011f0331dcd8d613">1、NodeJS Express view engine支持渲染html文件</a><br><a href="https://lyla7784.lofter.com/post/30a15a3d_1c8923399">2、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin新装问题记录</title>
      <link href="/2020/03/25/52/"/>
      <url>/2020/03/25/52/</url>
      
        <content type="html"><![CDATA[<p>又把我的小米本从Manjaro换回deepin了，毕竟还是要生活的。</p><span id="more"></span><h2 id="软硬件环境"><a href="#软硬件环境" class="headerlink" title="软硬件环境"></a>软硬件环境</h2><p>硬件：小米笔记本Air<br>操作系统：deepin 15.11</p><h2 id="网速慢"><a href="#网速慢" class="headerlink" title="网速慢"></a>网速慢</h2><p>sudo deepin-editor &#x2F;etc&#x2F;modprobe.d&#x2F;iwlwifi.conf</p><p>options iwlwifi 11n_disable&#x3D;1 bt_coex_active&#x3D;0 power_save&#x3D;0 swcrypto&#x3D;1”中的“11n_disable&#x3D;1”修改为“11n_disable&#x3D;0”</p><p>参考：<a href="https://www.jb51.net/LINUXjishu/699476.html">https://www.jb51.net/LINUXjishu/699476.html</a></p><h2 id="去掉启动5s的倒计时"><a href="#去掉启动5s的倒计时" class="headerlink" title="去掉启动5s的倒计时"></a>去掉启动5s的倒计时</h2><p>打开：<br>&#x2F;etc&#x2F;default&#x2F;grub<br>修改<br>GRUB_TIMEOUT&#x3D;0<br>执行<br>update-grub</p><p>参考：<a href="https://jingyan.baidu.com/article/02027811429bb41bcc9ce521.html">https://jingyan.baidu.com/article/02027811429bb41bcc9ce521.html</a></p><h2 id="intel-cpu占用过高-作用不明显"><a href="#intel-cpu占用过高-作用不明显" class="headerlink" title="intel cpu占用过高(作用不明显)"></a>intel cpu占用过高(作用不明显)</h2><p>sudo  vim  &#x2F;boot&#x2F;grub&#x2F;grub.cfg</p><p>然后在ro quiet splash的后面先小空格然后加上以下行：</p><p>intel_pstate&#x3D;disable<br><a href="http://8u.hn.cn/linuxjc/12636.html">http://8u.hn.cn/linuxjc/12636.html</a></p><h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><p>sudo vim &#x2F;etc&#x2F;apt&#x2F;sources.list<br>mirrors.tuna.tsinghua.edu.cn</p><h2 id="TSC-DEADLINE-disabled-due-to-Errata-please-update-microcode-to-version-0x52-or-later"><a href="#TSC-DEADLINE-disabled-due-to-Errata-please-update-microcode-to-version-0x52-or-later" class="headerlink" title="TSC_DEADLINE disabled due to Errata; please update microcode to version: 0x52 (or later)"></a>TSC_DEADLINE disabled due to Errata; please update microcode to version: 0x52 (or later)</h2><p>启动时显示一段这样的内容，执行如下命令：</p><pre class="line-numbers language-none"><code class="language-none">sudo apt-get install intel-microcode<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>或者：</p><pre class="line-numbers language-none"><code class="language-none">sudo apt-get install amd64-microcode<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参考：<a href="https://stackoverflow.com/questions/48036877/debian-firmware-bug-tsc-deadline-disabled-due-to-errataer">https://stackoverflow.com/questions/48036877/debian-firmware-bug-tsc-deadline-disabled-due-to-errataer</a></p><h2 id="Deepin-V20-搜狗输入法"><a href="#Deepin-V20-搜狗输入法" class="headerlink" title="Deepin V20 搜狗输入法"></a>Deepin V20 搜狗输入法</h2><pre class="line-numbers language-none"><code class="language-none">sudo apt-get install sogoupinyin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后注销再重新登录即可。</p><h2 id="Deepin-Terminal超时"><a href="#Deepin-Terminal超时" class="headerlink" title="Deepin Terminal超时"></a>Deepin Terminal超时</h2><p>在使用Deepin自带的Terminal连接服务器时总是出现超时导致terminal卡死的问题，这是deepin terminal自身的问题，可以在 &#x2F;etc&#x2F;ssh&#x2F;ssh_config文件中添加如下内容：</p><pre class="line-numbers language-none"><code class="language-none">ServerAliveInterval 30ServerAliveCountMax 60<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>参考：<a href="https://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=180770">https://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=180770</a></p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://huadou145.lofter.com/post/205d4db3_1c8782df2">1、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJS+Turfjs实现缓冲区分析接口</title>
      <link href="/2020/03/25/48/"/>
      <url>/2020/03/25/48/</url>
      
        <content type="html"><![CDATA[<p>为了使用turfjs中的缓冲区工具，需要在c# 中调用turfjs,考虑到涉及包的引用，可能会比较复杂，故采用nodejs中调用turfjs做服务，通过服务的方式在c# 中调用。</p><span id="more"></span><h2 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h2><p>**OS:**win10<br>**NodeJS:**12.16.1<br>**开发工具:**Visual studio 2019<br><strong>package.json</strong></p><pre class="line-numbers language-none"><code class="language-none">&quot;dependencies&quot;: &#123;    &quot;body-parser&quot;: &quot;^1.19.0&quot;,    &quot;express&quot;: &quot;^4.17.1&quot;,    &quot;@turf&#x2F;turf&quot;: &quot;^5.1.6&quot;,  &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="NodeJS配置全局淘宝镜像"><a href="#NodeJS配置全局淘宝镜像" class="headerlink" title="NodeJS配置全局淘宝镜像"></a>NodeJS配置全局淘宝镜像</h2><pre class="line-numbers language-none"><code class="language-none">npm config set registry https:&#x2F;&#x2F;registry.npm.taobao.org<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>检测是否配置成功</p><pre class="line-numbers language-none"><code class="language-none">npm info express<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="使用Express"><a href="#使用Express" class="headerlink" title="使用Express"></a>使用Express</h2><p>Express 是一个保持最小规模的灵活的 Node.js Web 应用程序开发框架。<br>安装</p><pre class="line-numbers language-none"><code class="language-none">npm install express<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="基本配置："><a href="#基本配置：" class="headerlink" title="基本配置："></a>基本配置：</h3><pre class="line-numbers language-none"><code class="language-none">var express &#x3D; require(&#39;express&#39;);var app &#x3D; express();var port &#x3D; process.env.PORT || 8080;var server &#x3D; app.listen(port, function () &#123;    var host &#x3D; server.address().address;    var port &#x3D; server.address().port;    console.log(&quot;应用实例，访问地址为 http:&#x2F;&#x2F;%s:%s&quot;, host, port)&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="创建Get接口"><a href="#创建Get接口" class="headerlink" title="创建Get接口"></a>创建Get接口</h3><pre class="line-numbers language-none"><code class="language-none">app.get(&#39;&#x2F;all&#39;,function(req,res)&#123;    res.send(&quot;nodejs express...&quot;);&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="创建Post接口"><a href="#创建Post接口" class="headerlink" title="创建Post接口"></a>创建Post接口</h3><p>这里要注意的是，Request Payload 是数据流类型的，所以需要监听 data 事件来获取数据，最后拼接出POST信息：</p><pre class="line-numbers language-none"><code class="language-none">app.post(&#39;&#x2F;postRoomInfo&#39;, (req, res) &#x3D;&gt; &#123;    console.log(&quot;请求体：&quot; + req.body);&#x2F;&#x2F;此处会输出undefined    var str &#x3D; &quot;&quot;;    req.on(&quot;data&quot;, function (chunk) &#123;        str +&#x3D; chunk    &#125;)    req.on(&quot;end&quot;, function () &#123;        console.log(&quot;请求内容:&quot;+str);&#x2F;&#x2F;此时会输出请求体的完整内容        res.send(&#39;ok&#39;);    &#125;)&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>或者直接使用express的中间件body-parser，这样就可以直接获取请求的参数</p><h3 id="使用body-parser"><a href="#使用body-parser" class="headerlink" title="使用body-parser"></a>使用body-parser</h3><p>配置body-parser</p><pre class="line-numbers language-none"><code class="language-none">var bodyParser &#x3D; require(&#39;body-parser&#39;);app.use(bodyParser.json())app.use(bodyParser.urlencoded(&#123; extended: true &#125;))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>post接口：</p><pre class="line-numbers language-none"><code class="language-none">app.post(&#39;&#x2F;buffer&#39;, function (req, res) &#123;    var geoType &#x3D; req.body.geoType;    var geoData &#x3D; req.body.geoData;&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这样就可以直接获取到请求体中的参数了，Ajax请求如下：</p><pre class="line-numbers language-none"><code class="language-none">$.ajax(&#123;url:&quot;xxx&#x2F;buffer&quot;,data:&#123;&quot;geoType&quot;:&quot;polyline&quot;,&quot;bufferWidth&quot;:0.2&#125;,type: &quot;post&quot;,contentType:&quot;application&#x2F;x-www-form-urlencoded&quot;,success:function(result)&#123;&#125;&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="调用turfjs中的缓冲区分析工具"><a href="#调用turfjs中的缓冲区分析工具" class="headerlink" title="调用turfjs中的缓冲区分析工具"></a>调用turfjs中的缓冲区分析工具</h3><ol><li>添加引用<pre class="line-numbers language-none"><code class="language-none">var turf &#x3D; require(&#39;@turf&#x2F;turf&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>使用缓冲区分析工具<br>然后直接使用turf的buffer方法即可：如下<pre class="line-numbers language-none"><code class="language-none">point &#x3D; turf.point(JSON.parse(geoData));var buffered &#x3D; turf.buffer(point, bufferWidth, &#123; units: &#39;kilometers&#39; &#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h2 id="nodejs-express跨域问题"><a href="#nodejs-express跨域问题" class="headerlink" title="nodejs express跨域问题"></a>nodejs express跨域问题</h2><p>响应头中添加</p><pre class="line-numbers language-none"><code class="language-none">res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type,Access-Token&quot;);res.header(&quot;Access-Control-Allow-Methods&quot;,&quot;PUT,POST,GET,DELETE,OPTIONS&quot;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/tengrl/p/10729277.html">1、nodejs 实现跨域</a><br><a href="https://blog.csdn.net/u012925833/article/details/86738913">2、nodeJs设计GET、POST接口</a><br><a href="https://blog.csdn.net/boonyaxnn/article/details/91394702">3、nodejs中常见的接口定义（get、post）</a><br><a href="https://www.cnblogs.com/xy404/p/7344805.html">4、nodejs的POST两种type类型提交（原生）</a><br><a href="https://blog.csdn.net/gis_zzu/article/details/102812294">5、openlayers+turf.js实现缓冲区的绘制</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c84a2eba">6、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJS </tag>
            
            <tag> 缓冲区分析 </tag>
            
            <tag> TurfJS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tornado创建websocket并实时推送数据到前台</title>
      <link href="/2020/03/13/46/"/>
      <url>/2020/03/13/46/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录使用tornado创建websocket服务，并实时向前端推送数据的过程,其中推送的数据为后台耗时任务的处理结果.</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>OS:Ubuntu 18.04<br>开发工具:Vs code<br>Tornado:6.0.3<br>Python:3.7.4 </p><h2 id="Tornado简介"><a href="#Tornado简介" class="headerlink" title="Tornado简介"></a>Tornado简介</h2><pre class="line-numbers language-none"><code class="language-none">Tornado是一种 Web 服务器软件的开源版本。Tornado 和主流Web 服务器框架（包括大多数 Python 的框架）有着明显的区别：它是非阻塞式服务器，而且速度相当快。得利于其非阻塞的方式和对epoll的运用，Tornado 每秒可以处理数以千计的连接，因此 Tornado 是实时 Web 服务的一个 理想框架。【百度百科】<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="创建简单的Rest服务"><a href="#创建简单的Rest服务" class="headerlink" title="创建简单的Rest服务"></a>创建简单的Rest服务</h2><h3 id="安装tornado"><a href="#安装tornado" class="headerlink" title="安装tornado"></a>安装tornado</h3><pre class="line-numbers language-none"><code class="language-none">pip install tornado -i https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="创建服务"><a href="#创建服务" class="headerlink" title="创建服务"></a>创建服务</h3><p>这里创建了一个支持get、post、options请求的服务，请求地址：&#x2F;videoservice&#x2F;rest&#x2F;index</p><pre class="line-numbers language-none"><code class="language-none">class IndexHandler(tornado.web.RequestHandler):    def get(self):        self.write(&quot;Hello world&quot;)    def post(self):        req&#x3D; json.loads(self.request.body)        print(&#39;记录编号:&#39;+str(req[&#39;rid&#39;]))        self.write(str(req[&quot;rid&quot;]))    def options(self):        self.set_status(204)        self.finish()class Application(tornado.web.Application):    def __init__(self):        handlers &#x3D; [            (r&#39;&#x2F;videoservice&#x2F;rest&#x2F;index&#39;, IndexHandler)        ]        tornado.web.Application.__init__(self, handlers,autoreload&#x3D;False, debug&#x3D;False)if __name__ &#x3D;&#x3D; &quot;__main__&quot;:    app &#x3D; Application()    app.listen(8866)      tornado.ioloop.IOLoop.current().start()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="创建多进程-x2F-多线程的Http服务"><a href="#创建多进程-x2F-多线程的Http服务" class="headerlink" title="创建多进程&#x2F;多线程的Http服务"></a>创建多进程&#x2F;多线程的Http服务</h2><p>有时候，我们需要接口直接返回数据，但服务端继续执行一些耗时的应用，此时可以采用线程池的方式实现，当一个现成阻塞在时，其他线程继续执行。</p><pre class="line-numbers language-none"><code class="language-none">import tornado.genfrom tornado.concurrent import run_on_executorfrom concurrent.futures import ThreadPoolExecutorclass VideoAnalyseStartHandler(tornado.web.RequestHandler):    executor &#x3D; ThreadPoolExecutor(20)    @tornado.gen.coroutine    def post(self):        req&#x3D; json.loads(self.request.body)        yield self.block_task(result_queue,last_image_id)        self.write(str(req[&#39;rid&#39;]))    @run_on_executor    def block_task(self,result_queue,last_image_id):        print(&#39;block task&#39;)        vAnaylyse&#x3D;VAnalyseSocket(result_queue,last_image_id)        vAnaylyse.start(&#123;&quot;id&quot;:&quot;3678f935-5916-4b30-8d2a-11bcc8ef0f63&quot;&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里的耗时操作在block_task中完成，在post中返回数据之后，如果block_task没有返回数据，会继续执行block_task中的工作，此线程(这里到底是线程还是进程表述的可能不准确，但应该是线程)包含其启动的子线程的任务都会继续执行执行。</p><p><strong>其他说明</strong>:  </p><p>1.修饰符@run_on_executor。这个修饰符将同步函数改造为在executor（这里是线程池）上运行的异步函数，内部实现是将被修饰的函数submit到executor，返回一个Future对象。</p><p>2.修饰符@tornado.gen.coroutine。被这个修饰符修饰的函数，是一个以同步函数方式编写的异步函数。原本通过callback方式编写的异步代码，有了这个修饰符，可以通过yield一个Future的方式来写。被修饰的函数在yield了一个Future对象后将会被挂起，Future对象的结果返回后继续执行。</p><h2 id="Websocket实时向前端发送数据"><a href="#Websocket实时向前端发送数据" class="headerlink" title="Websocket实时向前端发送数据"></a>Websocket实时向前端发送数据</h2><h3 id="创建基本的websocket"><a href="#创建基本的websocket" class="headerlink" title="创建基本的websocket"></a>创建基本的websocket</h3><p>在handlers中添加：</p><pre class="line-numbers language-none"><code class="language-none">(r&#39;&#x2F;videoservice&#x2F;ws&#39;, ConnectHandler)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建ConnectHandler</p><pre class="line-numbers language-none"><code class="language-none">class ProStatus():    connector &#x3D; &#123;&#125;  # 记录当前连接的user    def user_connect(self, user):        if user not in self.connector:            self.connector[user] &#x3D; set()    def user_remove(self, user):        # self.connector.remove(user)        self.connector.pop(user)    def trigger(self, message):        &#39;&#39;&#39; 向所有被记录的客户端推送最新内容 &#39;&#39;&#39;        for user in self.connector:            user.write_message(message)class ConnectHandler(tornado.websocket.WebSocketHandler):    def check_origin(self,t):        &#39;&#39;&#39;重写同源检查 解决跨域问题&#39;&#39;&#39;        return True    def open(self):        &#39;&#39;&#39;新的websocket连接后被调动&#39;&#39;&#39;        ProStatus().user_connect(self) # 用户连接后记录        self.write_message(&#39;Welcome&#39;)    def on_close(self):        &#39;&#39;&#39;websocket连接关闭后被调用&#39;&#39;&#39;        ProStatus().user_remove(self)  # 断开连接后remove    def on_message(self, message):        &#39;&#39;&#39;接收到客户端消息时被调用&#39;&#39;&#39;        self.write_message(&#39;new message :&#39; + message)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样一个基本的websocket服务就创建完成了，然后创建前端页面：</p><pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE HTML&gt;&lt;html&gt;   &lt;head&gt;   &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;   &lt;title&gt;websocket的简单使用&lt;&#x2F;title&gt;          &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;         function WebSocketTest()         &#123;            if (&quot;WebSocket&quot; in window)            &#123;               &#x2F;&#x2F;alert(&quot;您的浏览器支持 WebSocket!&quot;);                              &#x2F;&#x2F; 打开一个 web socket               var ws &#x3D; new WebSocket(&quot;ws:&#x2F;&#x2F;127.0.0.1:8866&#x2F;ws&quot;);                               ws.onopen &#x3D; function()               &#123;                  &#x2F;&#x2F; Web Socket 已连接上，使用 send() 方法发送数据                  ws.send(&quot;发送数据&quot;);                  console.log(&#39;ws onopen&#39;)               &#125;;                               ws.onmessage &#x3D; function (evt)                &#123;                   var received_msg &#x3D; evt.data;                  console.log(&#39;收到数据:&#39;+received_msg)               &#125;;                               ws.onclose &#x3D; function()               &#123;                   &#x2F;&#x2F; 关闭 websocket                  console.log(&quot;连接已关闭...&quot;);                &#125;;            &#125;                        else            &#123;               &#x2F;&#x2F; 浏览器不支持 WebSocket               alert(&quot;您的浏览器不支持 WebSocket!&quot;);            &#125;         &#125;      &lt;&#x2F;script&gt;           &lt;&#x2F;head&gt;   &lt;body&gt;         &lt;div id&#x3D;&quot;sse&quot;&gt;         &lt;a href&#x3D;&quot;javascript:WebSocketTest()&quot;&gt;运行 WebSocket&lt;&#x2F;a&gt;      &lt;&#x2F;div&gt;         &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果后端有消息发送回来，直接在ws.onmessage中进行处理，另外如果websocket长期无数据发送，连接可能会被自动关闭，需要使用心跳检测保持一直连接。</p><h3 id="websocket实时向前端推送数据"><a href="#websocket实时向前端推送数据" class="headerlink" title="websocket实时向前端推送数据"></a>websocket实时向前端推送数据</h3><p>基本的websocket完成之后，我们接下来就可以考虑如何实时向前端推送数据了，推送数据这里肯定是要在主线程中进行的,由于前面我们的耗时操作在子线程中进行，那我们的数据直接通过调用ProStatus().trigger()就发送到前端的。</p><p>这里参考了<a href="https://www.jianshu.com/p/36d3d3b759ad">Tornado Websocket + Redis ：实现“填鸭式”推送</a>,通过子线程中调用rest服务，来实现实时向websocket推送数据，也就是我们在章节：创建多进程&#x2F;多线程的Http服务 中的block_task中，还需要再单独创建一个子线程，在此线程中定时调用rest服务，实现数据的推送。</p><pre class="line-numbers language-none"><code class="language-none">from tornado import ioloop, web, websocket, httpclientclass sendMsgTools(threading.Thread):    def __init__(self, result_queue,last_img_id):        threading.Thread.__init__(self, name&#x3D;&#39;sendMsgTools&#39;)        self.proc_result&#x3D;result_queue        self.last_image_id&#x3D;last_img_id             def run(self) -&gt; None:        while True:            try:                out_msg &#x3D; self.proc_result.get()                img_id&#x3D;out_msg[&#39;id&#39;]                img_data&#x3D;out_msg[&#39;img&#39;]                # ProStatus().trigger(str(img_id))                url &#x3D; &quot;http:&#x2F;&#x2F;127.0.0.1:8866&#x2F;videoservice&#x2F;rest&#x2F;sendMsg&quot;                data &#x3D; &#123;&quot;id&quot;: img_id,&quot;img&quot;:img_data&#125;                print(&#39;sendMsgTools:&#39;+str(data[&quot;id&quot;]))                http_request &#x3D; httpclient.HTTPRequest(url, method&#x3D;&quot;POST&quot;,                                                    body&#x3D;json.dumps(data))                http_client &#x3D; httpclient.HTTPClient()                http_client.fetch(http_request)                if img_id &#x3D;&#x3D; self.last_image_id:                    break            except Exception as e:                print(traceback.format_exc())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>block_task中内容如下：</p><pre class="line-numbers language-none"><code class="language-none">@run_on_executor    def block_task(self,result_queue,last_image_id):        smTools&#x3D;sendMsgTools(result_queue,last_image_id)        smTools.start()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这里和另一个耗时操作用的是一个队列Queue,按引用传递，故耗时操作做修改了Queue，sendMsgTools这里可以实时获取到数据更新。<br>然后在前端调用时，先和websocket建立连接，之后调用执行耗时任务的接口，就基本能够做到websocket实时向前端推送数据了。</p><h3 id="前端发起post请求"><a href="#前端发起post请求" class="headerlink" title="前端发起post请求"></a>前端发起post请求</h3><p>前端页面使用了vue，故post请求这里使用axios来发送，</p><pre class="line-numbers language-none"><code class="language-none">axios.post(&#39;http:&#x2F;&#x2F;127.0.0.1:8088&#x2F;videoservice&#x2F;rest&#x2F;video&#x2F;start&#39;, &#123;                        &quot;rid&quot;: &quot;3678f935-5916-4b30-8d2a-11bcc8ef0f63&quot;                    &#125;)                    .then(resp &#x3D;&gt; &#123;                        console.log(resp.data);                    &#125;).catch(err &#x3D;&gt; &#123;                        console.log(&#39;请求失败：&#39; + err.status + &#39;,&#39; + err.statusText);                    &#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="其他问题："><a href="#其他问题：" class="headerlink" title="其他问题："></a>其他问题：</h2><h3 id="tornado跨域问题"><a href="#tornado跨域问题" class="headerlink" title="tornado跨域问题"></a>tornado跨域问题</h3><p>创建一个BaseHandler，然后其他Handler继承此handler即可</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.jb51.net/article/52209.htm">1、高性能web服务器框架Tornado简单实现restful接口及开发实例</a><br><a href="https://www.jb51.net/article/166225.htm">2、Tornado实现多进程&#x2F;多线程的HTTP服务详解</a><br><a href="https://www.jianshu.com/p/36d3d3b759ad">3、Tornado Websocket + Redis ：实现“填鸭式”推送</a><br><a href="https://www.jb51.net/article/148485.htm">4、vue发送ajax请求详解</a><br><a href="https://www.cnblogs.com/tiger666/articles/7155156.html">5、tornado 添加请求头进行允许跨域</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c88691ff">5、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tornado </tag>
            
            <tag> Python </tag>
            
            <tag> Websocket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu18.04安装过程卡死的问题处理方案</title>
      <link href="/2020/02/26/45/"/>
      <url>/2020/02/26/45/</url>
      
        <content type="html"><![CDATA[<p>最近在安装Ubuntu的过程中总是出现卡死的情况，具体表现为鼠标能够移动但不能点击或者完全卡死的情况，本文则主要记录这种情况的处理过程。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>win10+Ubuntu18.04<br>显卡：GTX 960M<br>EasyBCD</p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>在Universal USB Installer做好Ubuntu18.04的系统启动盘之后，进入Ubuntu的安装界面之后，总是出现卡死的情况。之后查到是由于Nvida显卡的问题，启动Ubuntu的安装程序时不加载显卡就可以了，也就是在启动项中加入nomodeset参数。</p><p>具体操作是进入有以下选项的界面时：</p><pre class="line-numbers language-none"><code class="language-none">Try UbuntuInstall Ubuntu...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>按e,然后在linux那行参数尾部加nomodeset,并删除前面的—,然后按F10进入安装界面，可查看文章底部的引用2。<br>但我这里报错参数未对齐之类的错误，故未采用此种方法，而是使用了无U盘安装Ubuntu</p><h2 id="Win10下无U盘安装Ubuntu"><a href="#Win10下无U盘安装Ubuntu" class="headerlink" title="Win10下无U盘安装Ubuntu"></a>Win10下无U盘安装Ubuntu</h2><h3 id="EasyBCD设置NeoGrub引导"><a href="#EasyBCD设置NeoGrub引导" class="headerlink" title="EasyBCD设置NeoGrub引导"></a>EasyBCD设置NeoGrub引导</h3><p>注意：这里启动时win10不能是UEFI这种模式启动，否则NeoGrub这里的安装按钮可能不可用。<br>安装完成之后，点击配置，会打开一个文本，然后输入以下内容：</p><pre class="line-numbers language-none"><code class="language-none">title Install Ubuntu root (hd0,0) kernel (hd0,0)&#x2F;vmlinuz.efi boot&#x3D;casper iso-scan&#x2F;filename&#x3D;&#x2F;ubuntu-18.04-desktop-amd64.iso ro quiet splash nomodeset locale&#x3D;zh_CN.UTF-8 initrd (hd0,0)&#x2F;initrd.lz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这里的hd0,是硬盘的序号，可以在windows的磁盘管理那里看到，后面的0是分区的序号。<br>vmlinuz 和initrd文件在你的ubuntu.iso镜像的casper目录中，复制出来即可。由于ubuntu18.04的镜像中这两个文件是没有后缀的，这里需要自行为复制出来的两个文件添加后缀。</p><p>然后重启选择NeoGrub引导加载器就可以了，后面安装过程基本不会出现卡死的情况了。具体安装过程可以参考文章底部的引用3。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.douban.com/note/343152353/">1、nomodeset的作用</a><br><a href="https://blog.csdn.net/cheneykl/article/details/79111618">2、安装ubuntu时黑屏三种解决办法</a><br><a href="https://blog.csdn.net/reasonss/article/details/80537475">3、在已安装win10环境中利用EasyBCD引导安装Ubuntu18.04</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c81c6e8f">4、封面图源</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Activiti工作流引擎</title>
      <link href="/2020/02/20/43/"/>
      <url>/2020/02/20/43/</url>
      
        <content type="html"><![CDATA[<p>关于工作流引擎之前也陆陆续续看了点东西，但总感觉还差点东西，对于相关概念理解的不够透彻。这篇文章中就好好的Activiti中的相关概念、数据的传递方式等做个总结。</p><span id="more"></span><h2 id="软件及开发环境"><a href="#软件及开发环境" class="headerlink" title="软件及开发环境"></a>软件及开发环境</h2><p>Activiti 6.x<br>Spring Boot 2.x  </p><h2 id="工作流的应用范围"><a href="#工作流的应用范围" class="headerlink" title="工作流的应用范围"></a>工作流的应用范围</h2><p>简单来说，当涉及到表单的逐级流转，多个角色的审批的时候，就需要用到工作流了，最常见的也就是OA系统。</p><h2 id="Activiti中的几个概念"><a href="#Activiti中的几个概念" class="headerlink" title="Activiti中的几个概念"></a>Activiti中的几个概念</h2><h3 id="互斥网关-ExclusiveGateWay"><a href="#互斥网关-ExclusiveGateWay" class="headerlink" title="互斥网关(ExclusiveGateWay)"></a>互斥网关(ExclusiveGateWay)</h3><p>也叫排他网关，由排他网关流出的连线(SequenceFlow),都有个conditionExpression元素，在内部维护返回boolean类型的决策结果；<br>conditionExpression的写法如下:</p><pre class="line-numbers language-none"><code class="language-none">$&#123;hrVerify&#125;$&#123;!hrVerify&#125;$&#123;money&gt;&#x3D;500&#125;、$&#123;money&gt;&#x3D;500 &amp;&amp; money &lt;&#x3D;1000&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>当流程执行到排他网关时，流程引擎会自动检索网关出口，从上到下检索如果发现第一条决策结果为true或者没有设置条件的(默认为成立)，则流出；<br>对于互斥网关而言，其流出的SequenceFlow至少有两条；<br>如果没有任何一个出口符合条件，则抛出异常。</p><h3 id="用户任务-userTask"><a href="#用户任务-userTask" class="headerlink" title="用户任务(userTask)"></a>用户任务(userTask)</h3><p>用户任务的处理人有三种：<br>1、某个人 ——&gt;设置Assiginee属性<br>2、某群人(多个具体的人) ——&gt;设置Candidate users属性<br>3、某类人(角色)——&gt;设置Candidate groups属性</p><p>一般我们不直接指定具体的人，使用流程变量，即设置Assiginee的属性值为${applyUserId}，在代码中：</p><pre class="line-numbers language-none"><code class="language-none">Map&lt;String, Object&gt; variables &#x3D; new HashMap&lt;String, Object&gt;();variables.put(&quot;applyUserId&quot;, &quot;张三&quot;);ProcessInstance pi &#x3D; processEngine.getRuntimeService().startProcessInstanceByKey(&quot;taskProcess&quot;,variables);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>即代表张三启动了一个流程实例。<br>另外也可以使用类来设置流程的发起人，如下：</p><pre class="line-numbers language-none"><code class="language-none">public class TaskListenerImpl implements TaskListener &#123;&#x2F;**指定个人任务和组任务的办理人*&#x2F;@Overridepublic void notify(DelegateTask delegateTask) &#123;String userId1 &#x3D; &quot;孙悟空&quot;;String userId2 &#x3D; &quot;猪八戒&quot;;&#x2F;&#x2F;指定组任务delegateTask.addCandidateUser(userId1);delegateTask.addCandidateUser(userId2);&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此时需要为流程的启动节点添加一个taskListener,事件(event)类型为create即可。</p><h3 id="Activiti中的用户和角色"><a href="#Activiti中的用户和角色" class="headerlink" title="Activiti中的用户和角色"></a>Activiti中的用户和角色</h3><p>activiti中的用户和角色信息保存在 act_id开头的几张表里面，可以通过IdentityService来对用户和角色信息进行增删，如下：</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;**在部署流程定义和启动流程实例的中间，设置组任务的办理人，向Activity表中存放组和用户的信息*&#x2F;IdentityService identityService &#x3D; processEngine.getIdentityService();&#x2F;&#x2F;认证：保存组和用户信息identityService.saveGroup(new GroupEntity(&quot;部门经理&quot;));&#x2F;&#x2F;建立组identityService.saveGroup(new GroupEntity(&quot;总经理&quot;));&#x2F;&#x2F;建立组identityService.saveUser(new UserEntity(&quot;小张&quot;));identityService.saveUser(new UserEntity(&quot;小李&quot;));identityService.saveUser(new UserEntity(&quot;小王&quot;));identityService.createMembership(&quot;小张&quot;, &quot;部门经理&quot;);&#x2F;&#x2F;建立组和用户关系identityService.createMembership(&quot;小李&quot;, &quot;部门经理&quot;);&#x2F;&#x2F;建立组和用户关系identityService.createMembership(&quot;小王&quot;, &quot;总经理&quot;);&#x2F;&#x2F;建立组和用户关系<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>用户任务处理人的变更：</p><pre class="line-numbers language-none"><code class="language-none">组任务分配给个人任务（认领任务）：processEngine.getTaskService().claim(taskId, userId);个人任务分配给组任务：processEngine.getTaskService(). setAssignee(taskId, null);向组任务添加人员：processEngine.getTaskService().addCandidateUser(taskId, userId);向组任务删除人员：processEngine.getTaskService().deleteCandidateUser(taskId, userId);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="流程图的绘制"><a href="#流程图的绘制" class="headerlink" title="流程图的绘制"></a>流程图的绘制</h2><p>了解了上面的内容，其实我们就可以绘制一个基本的带有决策功能的流程图了，以下是绘制流程图的基本思路(以请假流程为例)</p><ol><li>考虑参与的用户是谁，有哪些？对应的角色有什么<br>员工、部门经理、人事</li><li>流转的表单内容<br>请假开始时间、结束时间、事假还是病假、申请人</li><li>绘制流程图<br>这里主要是考虑每个用户任务(userTask)的参与人，即设置Assigine属性或Candinate groups属性；<br>除了申请人填写的表单外，涉及到了决策(即审批)是不是也要添加当前任务的流程变量，是否提交到下一节点，还是回退；<br>如果有这样子的决策，那就需要用到互斥网关了，然后在互斥网关的流出的线上(SequenceFlow)添加ConditionExpression属性；<br>最后如果到End节点前面的一个userTask的时候，如果此userTask执行完毕之后，需要再额外更新我们自己的数据表，同样可以添加一个taskListener,event类型设置为complete即可．</li></ol><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p>[1、Activiti中的表达式](<a href="http://www.mossle.com/docs/activiti/index.html#">http://www.mossle.com/docs/activiti/index.html#</a> apiExpressions)<br><a href="https://alisonmarket.lofter.com/post/2b1789_1c808c676">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作流引擎 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工作流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro启用交换空间</title>
      <link href="/2020/02/15/41/"/>
      <url>/2020/02/15/41/</url>
      
        <content type="html"><![CDATA[<p>目前我在用的小米笔记本的内存只有4G，系统经常出现卡死的情况，交换空间是未启用的状态，看如果启用了交换空间会不会好一点。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>OS: manjaro-xfce 18.1.5<br>内存：4G，小米笔记本</p><h2 id="交换空间-Swap-space"><a href="#交换空间-Swap-space" class="headerlink" title="交换空间(Swap space)"></a>交换空间(Swap space)</h2><p>交换空间是磁盘上的一块区域，可以是一个分区，也可以是一个文件，或者他们的组成，当系统物理内存不足时，Linux会把内存中的不常用的数据保存到交换空间中，这样系统就有更多的物理内存为各个进程服务，而当系统需要访问swap上存储的内容时，再将swap上的数据加载到内存中，这就是我们常说的swap out和swap in。</p><h2 id="交换空间的启用"><a href="#交换空间的启用" class="headerlink" title="交换空间的启用"></a>交换空间的启用</h2><h3 id="交换空间大小的选择"><a href="#交换空间大小的选择" class="headerlink" title="交换空间大小的选择"></a>交换空间大小的选择</h3><p>一般当前内存+2即可，最大不超过当前内存×2。</p><h3 id="创建分区"><a href="#创建分区" class="headerlink" title="创建分区"></a>创建分区</h3><p>我这里是manjaro已经安装完成了，且只有一个分区，直接通过gpated是无法成功创建分区的。通过系统启动盘中的gaprted工具创建一个新的分区。</p><h3 id="创建及启用交换空间"><a href="#创建及启用交换空间" class="headerlink" title="创建及启用交换空间"></a>创建及启用交换空间</h3><pre class="line-numbers language-none"><code class="language-none"># 找到创建的新分区sudo fdisk -l# 创建swap分区,这里的sda2为新创建的分区的名称sudo mkswap &#x2F;dev&#x2F;sda2# 查看正在使用的分区,应该是没有的swapon -s# 激活交换空间sudo swapon &#x2F;dev&#x2F;sda2此时再执行swapon -s就会有了# 将交换空间信息写入到&#x2F;etc&#x2F;fstab文件中以便重启时仍能自动加载交换空间分区sudo sh -c &#39;echo &quot;&#x2F;dev&#x2F;sdb1 none  swap    sw   0    0&quot; &gt;&gt; &#x2F;etc&#x2F;fstab&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://segmentfault.com/a/1190000008125116">1、Linux交换空间（swap space）</a><br><a href="https://blog.csdn.net/youmatterhsp/article/details/83933158">2、&#x2F;etc&#x2F;fstab文件的详解</a><br><a href="https://www.runoob.com/linux/linux-comm-swapon.html">3、Linux swapon命令</a><br><a href="https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb">4、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 交换空间 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows下安装mysql免安装版</title>
      <link href="/2020/01/17/39/"/>
      <url>/2020/01/17/39/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍在windows下安装mysql免安装版本的具体过程。</p><span id="more"></span><h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><p>OS:  win10 ×64<br>DB: Mysql 8.0</p><h2 id="mysql配置"><a href="#mysql配置" class="headerlink" title="mysql配置"></a>mysql配置</h2><p>解压缩下载之后安装包，然后创建data目录和my.ini配置文件，my.ini的编码格式改为<strong>ANSI</strong><br>my.ini配置文件内容如下，注意修改mysql的目录：</p><pre class="line-numbers language-none"><code class="language-none">[mysqld]# 设置3306端口port&#x3D;3306# 设置mysql的安装目录basedir&#x3D;C:\Program Files\mysql-8.0.18-winx64# 设置mysql数据库的数据的存放目录datadir&#x3D;C:\Program Files\mysql-8.0.18-winx64\data# 允许最大连接数max_connections&#x3D;200# 允许连接失败的次数。这是为了防止有人从该主机试图攻击数据库系统max_connect_errors&#x3D;10# 服务端使用的字符集默认为UTF8character-set-server&#x3D;utf8# 创建新表时将使用的默认存储引擎default-storage-engine&#x3D;INNODB# 默认使用“mysql_native_password”插件认证default_authentication_plugin&#x3D;mysql_native_password[mysql]# 设置mysql客户端默认字符集default-character-set&#x3D;utf8[client]# 设置mysql客户端连接服务端时默认使用的端口port&#x3D;3306default-character-set&#x3D;utf8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="初始化并启动mysql服务"><a href="#初始化并启动mysql服务" class="headerlink" title="初始化并启动mysql服务"></a>初始化并启动mysql服务</h2><p>以管理员身份进入mysql的bin路径下，依次执行以下命令：</p><pre class="line-numbers language-none"><code class="language-none">--初始化，会打印数据库密码，记住该密码，后面会用到mysqld --initialize --console如果这里的密码忘记了或想要重新执行，需要先删掉data目录 --这里MySql8是服务的名字，你可以不写或者自己命名一个服务mysqld --install mysql8  --这里是启动服务名字，就是刚刚命名的名字net start mysql8  --登陆数据库，这时会让你输入密码mysql -u root -p--如果是其他端口，那么需要手动设置，如下：mysql -u root -P3307 -p其中3307为你自定义的端口号。  --修改密码set password for root@localhost&#x3D;&#39;123456&#39; \g<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/quchunhui/p/11842532.html">1、windows下安装mysql-8.0.18-winx64</a><br><a href="https://www.jb51.net/article/146323.htm">2、MySQL 5.7.22 二进制包安装及免安装版Windows配置方法</a><br><a href="https://shiyuhei10456.lofter.com/post/3126465a_1c76bf4d6">3、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Intellij idea创建Java小工具</title>
      <link href="/2019/12/27/37/"/>
      <url>/2019/12/27/37/</url>
      
        <content type="html"><![CDATA[<p>本文主要将如何使用Intellij Idea如何创建简单的小黑窗项目。</p><span id="more"></span><h2 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h2><h3 id="打的jar包执行时报错"><a href="#打的jar包执行时报错" class="headerlink" title="打的jar包执行时报错"></a>打的jar包执行时报错</h3><p>因为之前做的是.NET开发，可以使用Visual Studio创建控制台项目，到了JAVA这里，直接就是MyEclipse以及Intellij Idea做的Web项目，对Java中类似的“控制台项目”缺少了解，于是就出现了问题： Invalid or corrupt jarfile xxx.jar。</p><h3 id="项目创建过程"><a href="#项目创建过程" class="headerlink" title="项目创建过程"></a>项目创建过程</h3><p>New Project —&gt;Maven…</p><h2 id="二、Intellij-Idea创建小黑窗项目"><a href="#二、Intellij-Idea创建小黑窗项目" class="headerlink" title="二、Intellij Idea创建小黑窗项目"></a>二、Intellij Idea创建小黑窗项目</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><p><strong>New Project —&gt;Java—&gt;Command Line App</strong></p><h3 id="配置artifacts"><a href="#配置artifacts" class="headerlink" title="配置artifacts"></a>配置artifacts</h3><p><strong>File—&gt;Project Settings-&gt;Artifacts</strong><br>添加jar即可，记得设置下Main Class</p><h3 id="运行jar包"><a href="#运行jar包" class="headerlink" title="运行jar包"></a>运行jar包</h3><p>java -jar xxx.jar</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://huadou145.lofter.com/post/205d4db3_1c7474e60">1、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jar文件没有主清单文件</title>
      <link href="/2019/12/23/35/"/>
      <url>/2019/12/23/35/</url>
      
        <content type="html"><![CDATA[<p>jar文件没有主清单文件时，通过手动编辑MANIFEST.MF文件的方式使得jar文件正常运行。</p><span id="more"></span><h2 id="jar文件的执行"><a href="#jar文件的执行" class="headerlink" title="jar文件的执行"></a>jar文件的执行</h2><pre class="line-numbers language-none"><code class="language-none">java -jar xxx.jar params1 params2...<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中params1和params2为main方法的参数</p><h2 id="执行jar文件时提示xx-jar中没有主清单属性"><a href="#执行jar文件时提示xx-jar中没有主清单属性" class="headerlink" title="执行jar文件时提示xx.jar中没有主清单属性"></a>执行jar文件时提示xx.jar中没有主清单属性</h2><p>在META-INF\MANIFEST.MF中添加入口类即可。<br>可以使用7z打开xxx.jar，修改其中的MANIFEST.MF文件，在底部添加入口类即可</p><pre class="line-numbers language-none"><code class="language-none">...Main-Class: cn.xxx.demo.Main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="关于MANIFEST-MF文件"><a href="#关于MANIFEST-MF文件" class="headerlink" title="关于MANIFEST.MF文件"></a>关于MANIFEST.MF文件</h2><p>为应用程序清单文件，在andorid porject中为AppManifest.xml,在.net项目中也有它的身影，主要描述了应用程序的一些基本信息，一般都会包含程序的入口信息，这里不在具体赘述，可建立对应的项目进行了解。</p><h2 id="Preferenced"><a href="#Preferenced" class="headerlink" title="Preferenced"></a>Preferenced</h2><p><a href="https://blog.csdn.net/fly910905/article/details/81668199">1、java命令 ： java -jar 和 java -cp</a><br><a href="https://www.cnblogs.com/Gandy/p/7290069.html">2、MANIFEST.MF文件详解</a><br><a href="https://www.cnblogs.com/shaosks/p/9984350.html">3、java运行jar命令提示没有主清单属性</a><br><a href="https://riyanyaohuahua.lofter.com/post/30bdc03d_1c740e7c5">4、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>视频码率与网络带宽</title>
      <link href="/2019/12/16/33/"/>
      <url>/2019/12/16/33/</url>
      
        <content type="html"><![CDATA[<p>根据视频的文件大小和视频来计算视频码率，之后计算保证在线视频流畅播放所需要的带宽</p><span id="more"></span><h2 id="基本算法"><a href="#基本算法" class="headerlink" title="基本算法"></a>基本算法</h2><p><strong>视频码率</strong>&#x3D;【文件大小】(KB) * 8 &#x2F; 【时间】(秒)<br><strong>单位</strong>：kbps</p><p>举例，D5的碟，容量4.3G，其中考虑到音频的不同格式，姑且算为600M，（故剩余容量为4.3*1024-600&#x3D;3803.2M)，所以视频文件应不大于3.7G，本例中取视频文件的容量为3.446G，视频长度100分钟（6000秒），计算结果：码率约等于4818kbps(3.446 * 1024 * 1024 * 8 &#x2F; 6000 &#x3D; 4817.857)。</p><h2 id="码率的几点原则"><a href="#码率的几点原则" class="headerlink" title="码率的几点原则"></a>码率的几点原则</h2><p>1、码率和质量成正比，但是文件体积也和码率成正比。这是要牢记的。<br>2、码率超过一定数值，对图像的质量没有多大影响。<br>3、DVD的容量有限，无论是标准的4.3G，还是超刻，或是D9，都有极限。</p><p><strong>视频码率</strong>　计算机中的信息都是二进制的0和1来表示，其中每一个0或1被称作一个位，用小写b表示，即bit（位）；大写B表示byte,即字节，一个字节&#x3D;八个位，即1B&#x3D;8b；前面的大写K表示1024的意思，即1024个位（Kb)或1024个字节(KB)。表示文件的大小单位，一般都使用字节（KB）来表示文件的大小。<br><strong>Kbps</strong>：首先要了解的是，ps指的是&#x2F;s，即每秒。Kbps指的是网络速度，也就是每秒钟传送多少个千位的信息（K表示千位，Kb表示的是多少千个位），为了在直观上显得网络的传输速度较快，一般公司都使用kb（千位）来表示。1KB&#x2F;S&#x3D;8Kbps。ADSL上网时的网速是512Kbps,如果转换成字节，就是512&#x2F;8&#x3D;64KB&#x2F;S(即64千字节每秒）。<br>4、一般来说，如果是1M的宽带，在网上只能看不超过1024kbps的视频，超过1024kbps的视频只能等视频缓冲才能流畅的观看。</p><h3 id="Preference"><a href="#Preference" class="headerlink" title="Preference"></a>Preference</h3><p><a href="https://baike.baidu.com/item/%E8%A7%86%E9%A2%91%E7%A0%81%E7%8E%87/10008023?fr=kg_qa">1、视频码率</a><br><a href="https://alisonmarket.lofter.com/post/2b1789_1c7361bf1#">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> 图形图像 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ArcGIS JS API加载倾斜三维模型</title>
      <link href="/2019/12/14/31/"/>
      <url>/2019/12/14/31/</url>
      
        <content type="html"><![CDATA[<p>通过ContextCapture将倾斜摄影模型导出为SLPK格式，可供ArcGIS平台使用。</p><span id="more"></span><h2 id="软件版本"><a href="#软件版本" class="headerlink" title="软件版本"></a>软件版本</h2><p>Arcgis api for js: 4.13</p><h2 id="SLPK格式"><a href="#SLPK格式" class="headerlink" title="SLPK格式"></a>SLPK格式</h2><p>全程Arcgis Desktop Scene Layer Package,是一种基于I3S的三维数据格式规范，为OGC新的国际三维标准，是由ESRI公司发起。</p><p>具备生命行和可扩展性，并已经用于不同类型的三维数据：<br>a.离散三维模型（3D Objects）：主要指独立建模物、建筑构造物；<br>b.密集格网（Integrated Meshes）：主要指倾斜摄影测量建模成果；<br>c.点（Points）：主要指城市小品如行道树、城市道路设施等；<br>d.点云（Point Clouds）：主要指Las数据集，暂不支持在10.5中发布成Scene Service；</p><h2 id="SLPK数据的获取"><a href="#SLPK数据的获取" class="headerlink" title="SLPK数据的获取"></a>SLPK数据的获取</h2><p>目前支持SLPK数据导出的软件有Esri的ArcGIS、Bentley的ContextCapture、Skyline的PhotoMesh，这里我们使用ContextCapture，资源压缩类型（store&#x2F;deflate）,其中一种为压缩的，生成的文件后缀为.slpk,另一种无压缩，为散列的文件，前者我们可以使用ArcGIS Pro进行发布供ArcGIS平台使用；后者我们接下来使用ArcGIS Js Api进行直接加载。</p><h2 id="ArcGIS-JS-API加载SLPK数据"><a href="#ArcGIS-JS-API加载SLPK数据" class="headerlink" title="ArcGIS JS API加载SLPK数据"></a>ArcGIS JS API加载SLPK数据</h2><h3 id="IntegratedMeshLayer的使用"><a href="#IntegratedMeshLayer的使用" class="headerlink" title="IntegratedMeshLayer的使用"></a>IntegratedMeshLayer的使用</h3><p>这里使用的SLPK数据类型为倾斜摄影测量的成果，机密集格网，对应的图层类型IntegratedMeshLayer。<br>代码如下：</p><pre class="line-numbers language-none"><code class="language-none">require([&quot;esri&#x2F;Map&quot;,      &quot;esri&#x2F;views&#x2F;SceneView&quot;,     &quot;esri&#x2F;layers&#x2F;IntegratedMeshLayer&quot;,     &quot;esri&#x2F;geometry&#x2F;Extent&quot;   ], function(Map, SceneView,IntegratedMeshLayer,Extent) &#123;       var layer &#x3D; new IntegratedMeshLayer(&#123;         url:&quot;&quot;       &#125;);       var map &#x3D; new Map(&#123;         basemap: &quot;streets&quot;,         layers: [layer],         ground: &quot;world-elevation&quot;       &#125;);       var view &#x3D; new SceneView(&#123;         container: &quot;viewDiv&quot;, &#x2F;&#x2F; Reference to the scene div created in step 5         map: map, &#x2F;&#x2F; Reference to the map object created before the scene     &#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>官方实例：<a href="https://developers.arcgis.com/javascript/latest/sample-code/sandbox/index.html?sample=layers-integratedmeshlayer">https://developers.arcgis.com/javascript/latest/sample-code/sandbox/index.html?sample=layers-integratedmeshlayer</a><br>其中IntegratedMeshLayer的url即为slpk所在目录，可以使用Nginx做反向代理</p><h3 id="Nginx跨域配置"><a href="#Nginx跨域配置" class="headerlink" title="Nginx跨域配置"></a>Nginx跨域配置</h3><p>location节点内添加如下内容</p><pre class="line-numbers language-none"><code class="language-none">location &#x2F;&#123;add_header Access-Control-Allow-Origin *;add_header Access-Control-Allow-Methods &#39;GET, POST, OPTIONS&#39;;add_header Access-Control-Allow-Headers &#39;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#39;;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="slpk数据中-json文件访问不到的问题"><a href="#slpk数据中-json文件访问不到的问题" class="headerlink" title="slpk数据中.json文件访问不到的问题"></a>slpk数据中.json文件访问不到的问题</h3><p>可在nginx中设置默认文件，添加如下部分：</p><pre class="line-numbers language-none"><code class="language-none">index 3dNodeIndexDocument.json 3dSceneLayer.json sharedResource.json 1_0.bin 0.bin 0.json;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="featurs、geometry、textures中的bin文件访问不到"><a href="#featurs、geometry、textures中的bin文件访问不到" class="headerlink" title="featurs、geometry、textures中的bin文件访问不到"></a>featurs、geometry、textures中的bin文件访问不到</h3><p>这里以features为例，在每个features内根据文件名创建同名目录，然后把文件复制进入即可，如旧目录结构如下：</p><pre class="line-numbers language-none"><code class="language-none">features  0.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>修改后的目录结构为：</p><pre class="line-numbers language-none"><code class="language-none">features  0    0.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>这里可自行写文件批量处理工具。</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.sohu.com/a/192789888_609577">1、重磅：Esri-I3S标准规范将作为OGC新的国际三维标准 </a><br><a href="https://www.cnblogs.com/oukele/p/11003307.html">2、Java实现复制文件或者文件夹</a><br><a href="https://www.cnblogs.com/jianmingyuan/p/10899917.html">3、Windows下Nginx的启动、停止、重启等命令</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c72a6dad">3、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> GIS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GIS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP现学现卖系列之——我的博客归档页面12月怎么没数据啦</title>
      <link href="/2019/12/05/29/"/>
      <url>/2019/12/05/29/</url>
      
        <content type="html"><![CDATA[<p>进入12月份，发现博客归档页面的数据没有继续更新了，原来是日期的少了判断，接下来且看我在线表演PHP现学现卖[啊，不是—.—]</p><span id="more"></span><h2 id="归档页面"><a href="#归档页面" class="headerlink" title="归档页面"></a>归档页面</h2><p>原来的处理如下</p><pre class="line-numbers language-none"><code class="language-none">$year &#x3D; $archives-&gt;year;$month &#x3D; $archives-&gt;month;$nextMonth &#x3D; $archives-&gt;month+1;$contents &#x3D; $this-&gt;db-&gt;fetchAll($this-&gt;select()-&gt;where(&#39;table.contents.status &#x3D; ?&#39;, &#39;publish&#39;)-&gt;where(&#39;table.contents.created &gt;&#x3D; ?&#39;, strtotime(&quot;$year-$month&quot;))-&gt;where(&#39;table.contents.created &lt; ?&#39;, strtotime(&quot;$year-$nextMonth&quot;))-&gt;where(&#39;table.contents.type &#x3D; ?&#39;, &#39;post&#39;)-&gt;order(&#39;table.contents.created&#39;, Typecho_Db::SORT_DESC), array($this, &#39;push&#39;));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>到12月时，这里忽略了年份的增加以及月份变为1月，故导致归档页面中的12月出现异常,接下来在这里添加判断就可以了。</p><h2 id="PHP基本语法及typecho-post字段信息"><a href="#PHP基本语法及typecho-post字段信息" class="headerlink" title="PHP基本语法及typecho post字段信息"></a>PHP基本语法及typecho post字段信息</h2><h3 id="if-else的写法"><a href="#if-else的写法" class="headerlink" title="if else的写法"></a>if else的写法</h3><pre class="line-numbers language-none"><code class="language-none">if()&#123;&#125;elseif()&#123;&#125;else&#123;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="等和不等"><a href="#等和不等" class="headerlink" title="等和不等"></a>等和不等</h3><p>&#x3D;&#x3D;和!&#x3D;即可</p><h3 id="Widget-Contents-Post-Date字段解析"><a href="#Widget-Contents-Post-Date字段解析" class="headerlink" title="Widget_Contents_Post_Date字段解析"></a>Widget_Contents_Post_Date字段解析</h3><p>year：年份的字符串形式，譬如2015<br>month：月份的字符串形式，譬如01<br>day：字符串形式<br>示例如下：</p><pre class="line-numbers language-none"><code class="language-none">&#39;year&#39; &#x3D;&gt; string &#39;2015&#39; (length&#x3D;4)&#39;month&#39; &#x3D;&gt; string &#39;01&#39; (length&#x3D;2)&#39;day&#39; &#x3D;&gt; string &#39;25&#39; (length&#x3D;2)&#39;date&#39; &#x3D;&gt; string &#39;2015-01&#39; (length&#x3D;7)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="归档页面调整"><a href="#归档页面调整" class="headerlink" title="归档页面调整"></a>归档页面调整</h2><p>根据上面的信息，调整后的归档页面如下：</p><pre class="line-numbers language-none"><code class="language-none">$year &#x3D; $archives-&gt;year;$month &#x3D; $archives-&gt;month;$nextMonth &#x3D; $archives-&gt;month+1;$nextYear&#x3D;$archives-&gt;year;if($archives-&gt;month &#x3D;&#x3D; &#39;12&#39;)&#123;$nextYear&#x3D;$archives-&gt;year+1;$nextMonth &#x3D; &#39;01&#39;;&#125;$contents &#x3D; $this-&gt;db-&gt;fetchAll($this-&gt;select()-&gt;where(&#39;table.contents.status &#x3D; ?&#39;, &#39;publish&#39;)-&gt;where(&#39;table.contents.created &gt;&#x3D; ?&#39;, strtotime(&quot;$year-$month&quot;))-&gt;where(&#39;table.contents.created &lt; ?&#39;, strtotime(&quot;$nextYear-$nextMonth&quot;))-&gt;where(&#39;table.contents.type &#x3D; ?&#39;, &#39;post&#39;)-&gt;order(&#39;table.contents.created&#39;, Typecho_Db::SORT_DESC), array($this, &#39;push&#39;));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.runoob.com/php/php-if-else.html">1、PHP If…Else 语句</a><br><a href="https://www.typechodev.com/theme/55.html">2、Typecho按时间归档</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">3、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Typecho </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typecho </tag>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx在Windows和Ubuntu下的基本命令</title>
      <link href="/2019/12/05/27/"/>
      <url>/2019/12/05/27/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录Nginx在日常使用时用到的基本命令</p><span id="more"></span><h2 id="Windows中运行Nginx"><a href="#Windows中运行Nginx" class="headerlink" title="Windows中运行Nginx"></a>Windows中运行Nginx</h2><ol><li>启动<br>start nginx</li><li>停止<br>nginx.exe -s stop<br>nginx.exe -s quit<br>注：stop是快速停止nginx，可能并不保存相关信息；quit是完整有序的停止nginx，并保存相关信息。</li><li>重新载入<br>nginx.exe -s reload<br>当配置信息修改，需要重新载入这些配置时使用此命令。</li></ol><h2 id="Ubuntu-16-04中运行Nginx"><a href="#Ubuntu-16-04中运行Nginx" class="headerlink" title="Ubuntu 16.04中运行Nginx"></a>Ubuntu 16.04中运行Nginx</h2><h3 id="启动及退出"><a href="#启动及退出" class="headerlink" title="启动及退出"></a>启动及退出</h3><ol><li>安装<br>sudo apt-get install nginx</li><li>启动<br>nginx</li><li>重新加载配置<br>nginx -s reload</li><li>退出<br>nginx -s stop</li><li>检查nginx配置文件<br>nginx -t</li></ol><h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>Ubuntu中nginx的配置文件在&#x2F;etc&#x2F;nginx目录下<br>通过nginx服务器中的80端口访问其他服务器中的非80端口的服务</p><p>修改nginx配置文件：</p><pre class="line-numbers language-none"><code class="language-none">server&#123;    listen 80;    server_name *****;    location &#x2F; &#123;   proxy_redirect off; proxy_intercept_errors on;        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header REMOTE-HOST $remote_addr;        proxy_set_header X-Forwarded-For &quot;$http_x_forwarded,$remote_addr&quot;;        proxy_pass http:&#x2F;&#x2F;ip:port;     &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="启用gzip压缩"><a href="#启用gzip压缩" class="headerlink" title="启用gzip压缩"></a>启用gzip压缩</h3><p>修改配置文件http部分的gzip部分为以下：</p><pre class="line-numbers language-none"><code class="language-none">http&#123;...    gzip on;    gzip_types text&#x2F;plain text&#x2F;css text&#x2F;javascript application&#x2F;javascript    ...&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其他配置：</p><ol><li>gzip_com_level 4；# 默认1，可取[1~9],值越大，压缩率越大，对服务器cpu的消耗就越高</li><li>gzip_min_length 2k; # 默认值: 0 ，不管页面多大都压缩,建议设置成大于1k的字节数，小于1k可能会越压越大。 </li><li>gzip_buffers 4 16k;</li><li>gzip_vary on # 加个vary头，给代理服务器用的，有的浏览器支持压缩，有的不支持，所以避免浪费不支持的也压缩，所以根据客户端的HTTP头来判断，是否需要压缩</li></ol><h3 id="Nginx负载均衡"><a href="#Nginx负载均衡" class="headerlink" title="Nginx负载均衡"></a>Nginx负载均衡</h3><pre class="line-numbers language-none"><code class="language-none">http&#123;    ...    upstream localhost&#123;            server localhost:8088 weight&#x3D;1;server localhost:8089 weight&#x3D;1;    &#125;    ...    server&#123;        listen 80;        location &#x2F;&#123;             proxy_pass   http:&#x2F;&#x2F;localhost&#x2F;;             # 其他参数# proxy_redirect default;             # proxy_set_header Host $host;            # proxy_set_header X-Forwarded-For $remote_addr;            # proxy_redirect default;            # proxy_buffer_size 512k;            # proxy_buffers 6 512k;            # proxy_busy_buffers_size 512k;            # proxy_temp_file_write_size 512k;            # client_max_body_size 100m;        &#125;    &#125;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Nginx动静分离"><a href="#Nginx动静分离" class="headerlink" title="Nginx动静分离"></a>Nginx动静分离</h3><p>把静态资源如js、css、png等交由Nginx处理，不再向tomcat发送请求,Location可根据需要进行配置：</p><ol><li>所有提交给Nginx的请求的静态文件均由Nginx自身处理</li><li>只有匹配到固定路径的请求，Nginx才会自行处理</li></ol><pre class="line-numbers language-none"><code class="language-none"># 默认当前server下的所有对js、css文件的请求都会匹配到location ~ .*\.(js|css)?$&#123;    root &#x2F;usr&#x2F;local&#x2F;webapps;    expires 1h;&#125;# 匹配static下的credit和images下的js及css文件location ~* \&#x2F;static\&#x2F;(credit|images).*\.(js|css|ttf|woff|woff2)?$ &#123;root   D:&#x2F;nginx&#x2F;reg&#x2F;;index  test.png;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Nginx-配置404或500页面"><a href="#Nginx-配置404或500页面" class="headerlink" title="Nginx 配置404或500页面"></a>Nginx 配置404或500页面</h3><pre class="line-numbers language-none"><code class="language-none">server&#123;    ...    error_page  404 403 500 502 503 504  &#x2F;404.html;    location &#x3D; &#x2F;404.html &#123;        root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html; # 错误页面的存放路径    &#125;    ...    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意，此时只有Nginx抛出的404才能显示这个页面，其反向代理的错误页面则不会显示这个，如果想要其反向代理的页面抛出404，还需要添加：</p><pre class="line-numbers language-none"><code class="language-none">location &#x2F; CMS&#123;           proxy_intercept_errors on;           proxy_pass      http:&#x2F;&#x2F;www;           proxy_set_header HOST   $host;           proxy_set_header X-Real-IP      $remote_addr;           proxy_set_header X-Forwarded-FOR $proxy_add_x_forwarded_for;       &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Nginx配置别名-超好用的咧"><a href="#Nginx配置别名-超好用的咧" class="headerlink" title="Nginx配置别名(超好用的咧)"></a>Nginx配置别名(超好用的咧)</h3><pre class="line-numbers language-none"><code class="language-none">location ~^&#x2F;nginx &#123;alias E:&#x2F;DApps&#x2F;;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>alias指定的目录是准确的，即location匹配访问的path目录下的文件直接是在alias目录下查找的；<br>即：<a href="http://xxx/nginx/a.html">http://xxx/nginx/a.html</a> ：访问的就是E:&#x2F;DApps&#x2F;a.html,至于location这里的结尾要不要加&#x2F;,应该是没区别的，但alias结尾是一定要加的。</p><h2 id="Nginx-Tomcat配置https"><a href="#Nginx-Tomcat配置https" class="headerlink" title="Nginx+Tomcat配置https"></a>Nginx+Tomcat配置https</h2><p>有两种方式：1.同时配置https,2.Nginx配https,Tomcat不配</p><h3 id="Tomcat和Nginx同时配置https"><a href="#Tomcat和Nginx同时配置https" class="headerlink" title="Tomcat和Nginx同时配置https"></a>Tomcat和Nginx同时配置https</h3><p>修改nginx.conf文件</p><pre class="line-numbers language-none"><code class="language-none">server &#123;    listen 443;    server_name localhost;    ssl on;    root html;    index index.html index.htm;    ssl_certificate   cert&#x2F;214293719880562.pem;    ssl_certificate_key  cert&#x2F;214293719880562.key;    ssl_session_timeout 5m;    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    ssl_prefer_server_ciphers on;    location &#x2F; &#123;        root html;        index index.html index.htm;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Nginx跨域配置"><a href="#Nginx跨域配置" class="headerlink" title="Nginx跨域配置"></a>Nginx跨域配置</h3><pre class="line-numbers language-none"><code class="language-none">add_header Access-Control-Allow-Origin *;add_header Access-Control-Allow-Headers X-Requested-With;add_header Access-Control-Allow-Methods GET,POST,OPTIONS;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>放在server-》location里面即可，此时只作用于当前location，当然放在http里面也是可以的。</p><h3 id="Nginx使用Https-Nginx和Tomcat之间使用Http"><a href="#Nginx使用Https-Nginx和Tomcat之间使用Http" class="headerlink" title="Nginx使用Https,Nginx和Tomcat之间使用Http"></a>Nginx使用Https,Nginx和Tomcat之间使用Http</h3><p>可参考：<br><a href="https://www.cnblogs.com/swbzmx/p/8845810.html">https://www.cnblogs.com/swbzmx/p/8845810.html</a></p><h2 id="Nginx性能监控"><a href="#Nginx性能监控" class="headerlink" title="Nginx性能监控"></a>Nginx性能监控</h2><p><a href="http://www.ttlsa.com/nginx/nginx-status-detail/">http://www.ttlsa.com/nginx/nginx-status-detail/</a><br>Nginx安装目录：&#x2F;etc&#x2F;nginx<br>日志：&#x2F;var&#x2F;logs&#x2F;nginx</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="http://blog.51cto.com/13178102/2063271">1、Nginx负载均衡简单配置</a><br><a href="https://segmentfault.com/a/1190000009237425">2、Location匹配</a><br><a href="https://www.cnblogs.com/yc-755909659/p/5928243.html">3、Fontawosome字体匹配</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c7247e32">4、封面来源</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux中的硬链接和软链接</title>
      <link href="/2019/12/01/25/"/>
      <url>/2019/12/01/25/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍linux系统的软链接和硬链接的使用和差异。</p><span id="more"></span><h2 id="linux文件的权限标识符"><a href="#linux文件的权限标识符" class="headerlink" title="linux文件的权限标识符"></a>linux文件的权限标识符</h2><pre class="line-numbers language-none"><code class="language-none">drwxr-xr-x<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>第一位是文件类型，-为一般文件，d为目录，l为链接文件<br>剩余9位则是代表【owner权限】【group权限】【others权限】<br>r:读，w:写，x：可执行</p><h2 id="软链接和硬链接"><a href="#软链接和硬链接" class="headerlink" title="软链接和硬链接"></a>软链接和硬链接</h2><p>为了解决文件的共享使用<br>ll、ls -l：罗列出当前文件或目录的详细信息，含有时间、读写权限、大小、时间等信息，如下：</p><pre class="line-numbers language-none"><code class="language-none">drwxr-xr-x 2 root root 4096 11月  7  2018 conf.d-rw-r--r-- 1 root root 1077 11月  7  2018 fastcgi.conf-rw-r--r-- 1 root root 1007 11月  7  2018 fastcgi_params-rw-r--r-- 1 root root 2837 11月  7  2018 koi-utf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>软链接</strong>：同windows的快捷方式很像，删除不影响源文件，但若被指向的原文件被删除，则相关软连接就变成了死链接；</p><p><strong>硬链接</strong>：允许一个文件有多个有效路径名，作用对象为文件，只能在同一文件系统中的文件之间进行链接，之所以文件建立了硬链接就会防止数据误删，是因为文件系统的原理是，只要文件的索引节点(inode)还有一个以上的链接（仅删除了该文件的指向），只删除其中一个链接并不影响索引节点本身和其他的链接（数据的实体并未删除），只有当最后一个链接被删除后，此时如果有新数据要存储到磁盘上，被删除的文件的数据块及目录的链接才会被释放，空间被新数据暂用覆盖。</p><h2 id="软硬链接的相关命令"><a href="#软硬链接的相关命令" class="headerlink" title="软硬链接的相关命令"></a>软硬链接的相关命令</h2><h3 id="创建软链接"><a href="#创建软链接" class="headerlink" title="创建软链接"></a>创建软链接</h3><pre class="line-numbers language-none"><code class="language-none">ln -s source target如：ln -s &#x2F;xxx&#x2F;lntest&#x2F;soft&#x2F;default.txt test2在当前目录创建一个test2执行default.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>然后可以查看test2的文件类型为l<br><strong>注意</strong>：软链接支持目录及文件；</p><h3 id="删除软链接"><a href="#删除软链接" class="headerlink" title="删除软链接"></a>删除软链接</h3><p>同删除文件是一样的，使用rm命令即可</p><h3 id="修改软链接"><a href="#修改软链接" class="headerlink" title="修改软链接"></a>修改软链接</h3><pre class="line-numbers language-none"><code class="language-none">ln -snf [source ] [target]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="创建硬链接"><a href="#创建硬链接" class="headerlink" title="创建硬链接"></a>创建硬链接</h2><pre class="line-numbers language-none"><code class="language-none">ln source target<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意：<br>1、硬链接不需要使用绝对路径；<br>2、只能对文件创建硬链接；<br>3、同一个源文件的所有硬链接文件必须在同一个硬盘、同一个分区里面<br>4、使用场景很少，不建议使用；</p><h2 id="软链接同硬链接的差异"><a href="#软链接同硬链接的差异" class="headerlink" title="软链接同硬链接的差异"></a>软链接同硬链接的差异</h2><p>软链接是快捷方式，可以用在硬盘合理分配上；<br>硬链接是文件名字，一个文件的许多名字互为硬链接；</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.linuxidc.com/Linux/2018-07/153131.htm">1、Linux命令 ls 和 ll 的使用方法与基本区别</a><br><a href="https://www.cnblogs.com/songgj/p/9115954.html">2、Linux系统硬链接和软链接</a><br><a href="https://blog.csdn.net/m290345792/article/details/78518360">3、linux软链接的创建、删除和更新</a><br><a href="https://blog.csdn.net/guangcheng0312q/article/details/100117582">4、Linux软链接与硬链接实战解析</a><br><a href="https://huadou145.lofter.com/post/205d4db3_1c71e6ba8">5、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx结合geoip2实现按地区过滤用户</title>
      <link href="/2019/11/27/23/"/>
      <url>/2019/11/27/23/</url>
      
        <content type="html"><![CDATA[<p>本文主要讲述Nginx结合GeoIP2实现对不同地区用户提供不同的服务。通过为在编译Nginx时加入ngx_http_geoip2模块，结合免费的geolite2数据库，实现用户来源的筛选。</p><span id="more"></span><h2 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h2><p>OS:Ubuntu 18.04<br>Nginx: 1.8.0</p><h2 id="Nginx的编译"><a href="#Nginx的编译" class="headerlink" title="Nginx的编译"></a>Nginx的编译</h2><h3 id="geoip2-nginx模块"><a href="#geoip2-nginx模块" class="headerlink" title="geoip2-nginx模块"></a>geoip2-nginx模块</h3><p>geoip2-nginx模块</p><pre class="line-numbers language-none"><code class="language-none">git clone https:&#x2F;&#x2F;github.com&#x2F;TravelEngineers&#x2F;ngx_http_geoip2_modulenginx-1.8.0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="geoip2-依赖配置"><a href="#geoip2-依赖配置" class="headerlink" title="geoip2  依赖配置"></a>geoip2  依赖配置</h3><p>核心识别库 libmaxminddb，可在<a href="https://github.com/maxmind/libmaxminddb/releases">https://github.com/maxmind/libmaxminddb/releases</a> 找到最新版本。</p><pre class="line-numbers language-none"><code class="language-none">wget  https:&#x2F;&#x2F;github.com&#x2F;maxmind&#x2F;libmaxminddb&#x2F;releases&#x2F;download&#x2F;1.4.2&#x2F;libmaxminddb-1.4.2.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装</p><pre class="line-numbers language-none"><code class="language-none">cd libmaxminddb-1.3.2.&#x2F;configuremakemake checksudo make installsudo ldconfig<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="nginx配置及安装"><a href="#nginx配置及安装" class="headerlink" title="nginx配置及安装"></a>nginx配置及安装</h3><p>下载Nginx并解压<br>进入：cd nginx-1.8.0，配置：</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;configure --with-http_ssl_module --add-module&#x3D;..&#x2F;ngx_http_geoip2_module --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可能会提示提示缺少部分包，安装即可</p><pre class="line-numbers language-none"><code class="language-none">解决依赖包openssl安装，命令：sudo apt-get install openssl libssl-dev解决依赖包pcre安装，命令：sudo apt-get install libpcre3 libpcre3-dev解决依赖包zlib安装，命令：sudo apt-get install zlib1g-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>重新配置并安装</p><pre class="line-numbers language-none"><code class="language-none">配置：.&#x2F;configure --with-http_ssl_module --add-module&#x3D;..&#x2F;ngx_http_geoip2_module --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx编译：make安装：make install启动：&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf重启：&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s  reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>至此，nginx应该已经安装完成，并且启动</p><h2 id="Nginx配置"><a href="#Nginx配置" class="headerlink" title="Nginx配置"></a>Nginx配置</h2><p>下载geoip数据库然后在访问nginx时，会发现在响应头中已经带了<br><a href="https://dev.maxmind.com/geoip/geoip2/geolite2/">https://dev.maxmind.com/geoip/geoip2/geolite2/</a><br>需要下载国家和城市的数据<br>修改nginx.conf<br>http节点添加</p><pre class="line-numbers language-none"><code class="language-none">geoip2 ..&#x2F;GeoLite2-Country.mmdb &#123;        $geoip2_data_country_code country iso_code;        $geoip2_country_code default&#x3D;US country iso_code;        $geoip2_country_name country names zh-CN;&#125;geoip2 ..&#x2F;GeoLite2-City.mmdb &#123;         $geoip2_city_name default&#x3D;ShangHai city names en;# zh-CN;         $geoip2_continent_code continent code;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果需要在响应头中输出城市、国家的名字，可在server节点添加如下信息：</p><pre class="line-numbers language-none"><code class="language-none">add_header &quot;country&quot; $geoip2_data_country_code;add_header &quot;city&quot; $geoip2_city_name;add_header &quot;c_name&quot; $geoip2_country_name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>在location节点中，根据国家所在地，判断是否向用户提供服务，可添加如下信息</p><pre class="line-numbers language-none"><code class="language-none">if ($geoip2_data_country_code &#x3D; CN) &#123;&#125;if ($geoip2_data_country_code !&#x3D; CN) &#123;   return 403;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.csdn.net/z920954494/article/details/52132125">1、ubuntu下安装nginx时依赖库zlib，pcre，openssl安装方法</a><br><a href="https://www.rootop.org/pages/4366.html">2、nginx通过geoip2模块实现判断用户来源国家跳转中英站</a><br><a href="https://xiaobai697197.lofter.com/post/1dd20747_1c719d74e">3、封面图</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>升级docker中的jenkins</title>
      <link href="/2019/11/21/21/"/>
      <url>/2019/11/21/21/</url>
      
        <content type="html"><![CDATA[<p>本文主要介绍如何升级docker中的jenkins</p><span id="more"></span><h2 id="环境及现状"><a href="#环境及现状" class="headerlink" title="环境及现状"></a>环境及现状</h2><p>OS:Ubuntu 18.04<br>现状：使用docker部署了jenkins，并把jenkins_home挂载到了本地磁盘中，现需升级jenkins版本</p><h2 id="下载jenkins的安装包"><a href="#下载jenkins的安装包" class="headerlink" title="下载jenkins的安装包"></a>下载jenkins的安装包</h2><p>在<a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/war/latest/">清华大学开源镜像站</a>下载最新版本的jenkins，可以使用wget下载，并将其放在jenkins_home目录下</p><p>ps.清华大学开源镜像站真是个宝藏~</p><h2 id="将下载的jenkins-war复制到jenkins容器中"><a href="#将下载的jenkins-war复制到jenkins容器中" class="headerlink" title="将下载的jenkins.war复制到jenkins容器中"></a>将下载的jenkins.war复制到jenkins容器中</h2><p>进入容器</p><pre class="line-numbers language-none"><code class="language-none">docker exec -ti -u root ContainerId &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>复制</p><pre class="line-numbers language-none"><code class="language-none">cp &#x2F;var&#x2F;jenkins_home&#x2F;jenkins.war &#x2F;usr&#x2F;share&#x2F;jenkins&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="重启容器即可"><a href="#重启容器即可" class="headerlink" title="重启容器即可"></a>重启容器即可</h2><pre class="line-numbers language-none"><code class="language-none">docker restart +ContainerId<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其它关于docker的命令可参考之前关于docker的文章~</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://blog.csdn.net/KissedBySnow/article/details/90229015">1、Jenkins：CentOS7 使用 Docker 安装 Jenkins 后，升级 Jenkins 版本</a><br><a href="https://melare.lofter.com/post/1f010e23_1c71032c6">2、封面图</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typecho使用pjax实现页面局部刷新</title>
      <link href="/2019/11/19/19/"/>
      <url>/2019/11/19/19/</url>
      
        <content type="html"><![CDATA[<p>在为博客加完音乐播放器之后，发现只要切换页面页面，整个页面都会重新加载，那有没有一种方法能够局部刷新页面呢？之前时ajax实现页面局部刷新，但代码比较繁琐，还要去考虑浏览器的兼容性等问题，于是就找到了一种新的方法，使用pjax。</p><span id="more"></span><h2 id="pjax介绍"><a href="#pjax介绍" class="headerlink" title="pjax介绍"></a>pjax介绍</h2><p>其利用ajax技术和Html5的pushstate,实现对页面的局部刷新,进而减少页面的请求数量，增强用户的体验效果。</p><h2 id="pjax的引入及使用"><a href="#pjax的引入及使用" class="headerlink" title="pjax的引入及使用"></a>pjax的引入及使用</h2><h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>需要引入jquery和jquery.pjax.js两个文件，如下：</p><pre class="line-numbers language-none"><code class="language-none">&lt;script src&#x3D;&quot;&#x2F;&#x2F;cdn.bootcss.com&#x2F;jquery&#x2F;3.1.1&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script src&#x3D;&quot;&#x2F;&#x2F;cdn.bootcss.com&#x2F;jquery.pjax&#x2F;2.0.1&#x2F;jquery.pjax.min.js&quot;&gt;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这里注意下版本，如果使用jquery3.1,pjax1.x的版本是不可以的。</p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>参数如下，具体可去<a href="https://github.com/defunkt/jquery-pjax">query-ajax</a>查看：</p><pre class="line-numbers language-none"><code class="language-none">$(document).pjax(selector, [container], options)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>selector</strong> is a string to be used for click event delegation,如果有多个selector，可使用逗号隔开，如:</p><pre class="line-numbers language-none"><code class="language-none">&#39;.title-article a,.layui-nav-item a&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>container</strong> is a string selector that uniquely identifies the pjax container,要刷新的区域；<br><strong>options</strong> is an object with keys。</p><p>完整的实例如下：</p><pre class="line-numbers language-none"><code class="language-none">$(document).pjax(&#39;.layui-laypage-molv a&#39;, &#123;        container: &#39;# pjax-container&#39;,        fragment: &#39;# pjax-container&#39;,        timeout: 8000    &#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此时刷新页面，检查pjax是否起到了作用</p><h2 id="使用Nprogress添加页面加载的进度条"><a href="#使用Nprogress添加页面加载的进度条" class="headerlink" title="使用Nprogress添加页面加载的进度条"></a>使用Nprogress添加页面加载的进度条</h2><p>引入Nprogress</p><pre class="line-numbers language-none"><code class="language-none">&lt;link href&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;nprogress&#x2F;0.2.0&#x2F;nprogress.min.css&quot; rel&#x3D;&quot;stylesheet&quot;&gt;&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;nprogress&#x2F;0.2.0&#x2F;nprogress.min.js&quot;&gt;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>配置Pjax使用，如下：</p><pre class="line-numbers language-none"><code class="language-none">$(document).on(&#39;pjax:start&#39;, NProgress.start).on(&#39;pjax:end&#39;, NProgress.done)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="其他的问题"><a href="#其他的问题" class="headerlink" title="其他的问题"></a>其他的问题</h2><h3 id="目录读取不到内容"><a href="#目录读取不到内容" class="headerlink" title="目录读取不到内容"></a>目录读取不到内容</h3><p>本站的目录是根据文章的内容来加载的，因此只有在内容加载完成之后才能获取到文章的内容，所以需要在pjax：end中重新加载，如下</p><pre class="line-numbers language-none"><code class="language-none">$(document).on(&#39;ready pjax:end&#39;,function()&#123;        GenerateContentList();&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>关于目录的生成请查看<a href="https://qqdie.com/archives/js-index.html">js为博客文章自动生成目录</a></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.ihewro.com/archives/354/">1、typecho博客实现pjax</a><br><a href="http://xiaoxiyuashu.lofter.com/post/1d088eab_1c70b8c32">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Typecho </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typecho </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>layui图片懒加载</title>
      <link href="/2019/11/17/16/"/>
      <url>/2019/11/17/16/</url>
      
        <content type="html"><![CDATA[<p>目前博客的列表全都使用了图片，导致网站响应比较慢，通过使用Layui实现图片的懒加载，来临时加快网站响应速度。</p><span id="more"></span> <h2 id="layui图片懒加载"><a href="#layui图片懒加载" class="headerlink" title="layui图片懒加载"></a>layui图片懒加载</h2><p>layui初始化处，添加如下内容</p><pre class="line-numbers language-none"><code class="language-none">layui.use([&#39;layer&#39;, &#39;element&#39;,&#39;flow&#39;], function()&#123;    ...    flow&#x3D;layui.flow;    flow.lazyimg();    ...&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>之后在原来的img标签中添加lay-src属性，值为原来图片的路径，即</p><pre class="line-numbers language-none"><code class="language-none">&lt;img lay-src&#x3D;&quot;aaa.jpg&quot; alt&#x3D;&quot;aaa&quot;&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当然也可以添加占位图，需要修改flow.js.</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/wanpishe/p/10119835.html">1、layui图片懒加载-loading占位图</a><br><a href="http://linpupu831.lofter.com/post/30d3e071_1c709d79d">2、封面图</a></p>]]></content>
      
      
      <categories>
          
          <category> Typecho </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typecho </tag>
            
            <tag> layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typecho附件上传失败</title>
      <link href="/2019/11/16/14/"/>
      <url>/2019/11/16/14/</url>
      
        <content type="html"><![CDATA[<p>本文主要解决typecho附件上传失败的问题</p><span id="more"></span><h2 id="取消Typecho对服务器的检验"><a href="#取消Typecho对服务器的检验" class="headerlink" title="取消Typecho对服务器的检验"></a>取消Typecho对服务器的检验</h2><p>修改var&#x2F;Typecho&#x2F;Common.php</p><pre class="line-numbers language-none"><code class="language-none">public static function isAppEngine()&#123;   return !empty($_SERVER[&#39;HTTP_APPNAME&#39;])                     &#x2F;&#x2F; SAE       || !!getenv(&#39;HTTP_BAE_ENV_APPID&#39;)                       &#x2F;&#x2F; BAE       || !!getenv(&#39;SERVER_SOFTWARE&#39;)                          &#x2F;&#x2F; BAE 3.0       || (ini_get(&#39;acl.app_id&#39;) &amp;&amp; class_exists(&#39;Alibaba&#39;))   &#x2F;&#x2F; ACE       || (isset($_SERVER[&#39;SERVER_SOFTWARE&#39;]) &amp;&amp; strpos($_SERVER[&#39;SERVER_SOFTWARE&#39;],&#39;Google App Engine&#39;) !&#x3D;&#x3D; false) &#x2F;&#x2F; GAE;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改为</p><pre class="line-numbers language-none"><code class="language-none">public static function isAppEngine()&#123;    return false;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="修改上传文件夹的权限"><a href="#修改上传文件夹的权限" class="headerlink" title="修改上传文件夹的权限"></a>修改上传文件夹的权限</h2><p>默认情况下，文件会上传至 &#x2F;usr&#x2F;uploads目录</p><pre class="line-numbers language-none"><code class="language-none">chmod -R 777 usr&#x2F;uplods<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>此目录为typecho下的目录</strong></p><h2 id="Git设置忽略Uploads目录"><a href="#Git设置忽略Uploads目录" class="headerlink" title="Git设置忽略Uploads目录"></a>Git设置忽略Uploads目录</h2><p>在typecho的根目录添加.gitignore文件，加入：</p><pre class="line-numbers language-none"><code class="language-none">usr&#x2F;uploads<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果是文件已经被纳入了版本管理，即便.gitignore中已经忽略了该文件，依旧是不起作用的，可删除本地缓存，再push</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.aiuai.cn/aifarm598.html">1. Typecho - 上传图片失败解决办法并修改图片大小限制</a><br><a href="https://www.cnblogs.com/thinkingthigh/p/8007061.html">2. gitignore不起作用</a><br><a href="http://duyangsheng.lofter.com/post/1f344c92_1c70844d8">3. 封面图来源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> typecho </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typecho安装及部署问题相关</title>
      <link href="/2019/11/16/11/"/>
      <url>/2019/11/16/11/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录Typecho的安装过程，以及安装完成之后对页面链接、头像的处理等。</p><span id="more"></span><h2 id="1-安装及部署typecho"><a href="#1-安装及部署typecho" class="headerlink" title="1. 安装及部署typecho"></a>1. 安装及部署typecho</h2><p>操作系统：ubuntu<br>软件：mysql+nginx+php-fpm</p><h3 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h3><p>apt-get install php</p><h3 id="安装数据库"><a href="#安装数据库" class="headerlink" title="安装数据库"></a>安装数据库</h3><p>mysql的在ubuntu的安装稍微复杂，不在此文描述，如果要求不高，使用sqlite即可</p><h3 id="安装php相关扩展"><a href="#安装php相关扩展" class="headerlink" title="安装php相关扩展"></a>安装php相关扩展</h3><p>这里可以不使用apache2，可以卸载：</p><pre class="line-numbers language-none"><code class="language-none">apt-get autoremove apache2 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装php相关扩展</p><pre class="line-numbers language-none"><code class="language-none">apt-get install php-curlapt-get install php-mbstringapt-get install php-fpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="配置php-fpm"><a href="#配置php-fpm" class="headerlink" title="配置php-fpm"></a>配置php-fpm</h3><p>找到配置文件：</p><pre class="line-numbers language-none"><code class="language-none">vi &#x2F;etc&#x2F;php&#x2F;7.2&#x2F;fpm&#x2F;pool.d&#x2F;www.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置一下监听的端口和ip白名单</p><pre class="line-numbers language-none"><code class="language-none">listen &#x3D; 127.0.0.1:9000listen.allowed_clients &#x3D; 127.0.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>重启php-fpm</p><pre class="line-numbers language-none"><code class="language-none">service php7.2-fpm restart<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="下载typecho并解压"><a href="#下载typecho并解压" class="headerlink" title="下载typecho并解压"></a>下载typecho并解压</h3><h3 id="Nginx配置"><a href="#Nginx配置" class="headerlink" title="Nginx配置"></a>Nginx配置</h3><p>Nginx需要手动安装，&#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;default配置如下：</p><pre class="line-numbers language-none"><code class="language-none">root &#x2F;~ # 配置为typecho所在路径location ~ \.php(\&#x2F;.*)*$ &#123;        include snippets&#x2F;fastcgi-php.conf;        fastcgi_split_path_info ^((?U).+.php)(&#x2F;?.+)$;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        fastcgi_param PATH_INFO $fastcgi_path_info;        fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;        fastcgi_intercept_errors on;        fastcgi_pass 127.0.0.1:9000;        &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里配置了伪静态，用于解决typecho链接中包含.php的问题，然后就可以启动nginx了，重启之后打开typecho安装页面即可进行安装。</p><h2 id="2、typecho配置伪静态"><a href="#2、typecho配置伪静态" class="headerlink" title="2、typecho配置伪静态"></a>2、typecho配置伪静态</h2><p>作用：去掉博客链接中的.php。<br>修改nginx的配置,加入</p><pre class="line-numbers language-none"><code class="language-none"># 用于伪静态if (-f $request_filename&#x2F;index.html) &#123;    rewrite (.*) $1&#x2F;index.html break;&#125;if (-f $request_filename&#x2F;index.php) &#123;    rewrite (.*) $1&#x2F;index.php;&#125;if (!-f $request_filename) &#123;    rewrite (.*) &#x2F;index.php;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后在typecho的后台——&gt;设置——&gt;永久链接，启用地址重写功能即可，可能会报错，强制重启即可。</p><h2 id="3-替换Gravatar为国内源"><a href="#3-替换Gravatar为国内源" class="headerlink" title="3. 替换Gravatar为国内源"></a>3. 替换Gravatar为国内源</h2><p>在var&#x2F;Typecho&#x2F;Common.php中，修改</p><pre class="line-numbers language-none"><code class="language-none">$url &#x3D; $isSecure ? &#39;https:&#x2F;&#x2F;secure.gravatar.com&#39; : &#39;http:&#x2F;&#x2F;www.gravatar.com&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>替换为</p><pre class="line-numbers language-none"><code class="language-none">$url &#x3D; $isSecure ? &#39;https:&#x2F;&#x2F;secure.gravatar.com&#39; : &#39;https:&#x2F;&#x2F;cn.gravatar.com&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>注：使用Gravatar头像需要注册wordpress账号</strong></p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.aisheji.org/post/15.html">1. Typecho修改gravatar头像源为国内服务器源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> typecho </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql数据库备份与恢复</title>
      <link href="/2019/11/14/7/"/>
      <url>/2019/11/14/7/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录mysql使用binlog对数据库进行增量及全量备份。</p><span id="more"></span><h2 id="全量备份-4"><a href="#全量备份-4" class="headerlink" title="全量备份[4]"></a>全量备份[4]</h2><p>数据库的全量备份有mysqldump工具，也可以<a href="https://jingyan.baidu.com/article/8275fc8667151446a03cf6e3.html">使用navicat for mysql提供的备份工具</a>，这里只介绍mysqldump工具，使用步骤如下：</p><ol><li>数据库备份<br>全量备份可以使用mysql自带的mysqldump工具，参数有：<br>databases,指定数据库<br>flush-logs，产生新的日志文件，binlog文件，这个在后面的增量备份有讲到过<br>delete-master-logs，删掉原来的日志文件，binlog文件<br>DumpFile是要备份的目标文件，输出文件<br>具体命令如下：<pre class="line-numbers language-none"><code class="language-none">mysqldump -uroot -p123456 --databases wordpressdb --flush-logs --delete-master-logs --single-transaction &gt; $DumpFile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>数据库恢复<br>恢复的命令是在MySQL命令行中执行的，要先手动创建一个数据库，然后再use这个数据库：<br>mysql&gt;source  $DumpFile</li></ol><p>ps: 如果没什么特殊要求的话，其实使用Navicat for mysql做全量备份就可以了</p><h2 id="增量备份"><a href="#增量备份" class="headerlink" title="增量备份"></a>增量备份</h2><p>增量备份是通过binlog实现的，只需要开启mysql的binlog，用户所有的DDL、DML语句都会记录在这个文件中，mysql binlog的开启这里不再介绍。</p><ol><li>Mysql查看binlog的开启状态<br>show variables like ‘%log_bin%’<br>其他binlog相关的命令(需要在mysql-client中执行)<pre class="line-numbers language-none"><code class="language-none">show master status;-- 查看binlog的内容show binlog events in &#39;mysql-bin.000003&#39;;-- 使用新的文件记录日志flush logs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>使用mysqlbinlog查看binlog的内容<br>mysqlbinlog –no-defaults   mysql-bin.000004<br>mysqlbinlog  –no-defaults  –base64-output&#x3D;decode-rows –verbose mysql-bin.000015</li></ol><h2 id="通过binlog对数据进行恢复"><a href="#通过binlog对数据进行恢复" class="headerlink" title="通过binlog对数据进行恢复"></a>通过binlog对数据进行恢复</h2><p>使用mysqlbinlog工具mysql的数据进行恢复</p><p>mysqlbinlog –no-defaults –start-position&#x3D;’651’  –stop-position&#x3D;’556’ mysql-bin.000004 mysql-bin.000005 | mysql -uroot -pabc123</p><p>除了使用positon,也可以使用time，如下：</p><pre class="line-numbers language-none"><code class="language-none">mysqlbinlog --no-defaults --stop-datetime&#x3D;&#39;2018-09-03 22:18:03&#39; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;mysql-bin.000004 | mysql -uroot -pmysqlbinlog --no-defaults --start-datetime&#x3D;&#39;2018-09-03 22:18:09&#39; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;mysql-bin.000004 | mysql -uroot -p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>如果有多个binlog,并排写,中间用空格隔开，其中第一个start-position是第一个binlog文件的pos点，stop-position是最后一个binlog的pos点</p><p>关于binlog需要注意一下几点：</p><ol><li>不要查看当前正在写入的binlog文件</li><li>不要加–force参数强制访问</li><li>如果binlog格式是行模式的,请加 -vv参数</li></ol><h2 id="使用XtraBackup对数据库进行备份与恢复"><a href="#使用XtraBackup对数据库进行备份与恢复" class="headerlink" title="使用XtraBackup对数据库进行备份与恢复"></a>使用XtraBackup对数据库进行备份与恢复</h2><p>Mysql几种不同的备份方式：<br>设计合适的备份策略：</p><pre><code>针对不同的场景下, 我们应该制定不同的备份策略对数据库进行备份, 一般情况下, 备份策略一般为以下三种    直接cp,tar复制数据库文件    mysqldump+复制BIN LOGS    lvm2快照+复制BIN LOGS    xtrabackup以上的几种解决方案分别针对于不同的场景    如果数据量较小, 可以使用第一种方式, 直接复制数据库文件    如果数据量还行, 可以使用第二种方式, 先使用mysqldump对数据库进行完全备份, 然后定期备份BINARY LOG达到增量备份的效果    如果数据量一般, 而又不过分影响业务运行, 可以使用第三种方式, 使用lvm2的快照对数据文件进行备份, 而后定期备份BINARY LOG达到增量备份的效果    如果数据量很大, 而又不过分影响业务运行, 可以使用第四种方式, 使用xtrabackup进行完全备份后, 定期使用xtrabackup进行增量备份或差异备份</code></pre><p><a href="https://www.cnblogs.com/SQL888/p/5751631.html">https://www.cnblogs.com/SQL888/p/5751631.html</a></p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>通常情况下，如果数据库出现了问题，是需要全量备份和增量备份结合的，先通过全量备份恢复数据库，之后查看binlog找到导致问题的位置，恢复到问题之前的位置就可以了</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p><a href="https://www.cnblogs.com/cobbliu/p/4311926.html">1、mysqlbinlog 查看binlog时报错unknown variable ‘default-character-set&#x3D;utf8’</a><br><a href="https://www.cnblogs.com/snifferhu/p/5280489.html">2、MySQL的binlog数据如何查看</a><br><a href="https://blog.csdn.net/anzhen0429/article/details/78007127">3、MYSQL简单的binlog恢复测试</a><br><a href="https://www.tuicool.com/articles/UzMNneb">4、安全的web服务器——使用mysqldump和mysqlbinlog实现MySQL全量与增量备份</a><br><a href="http://xiaoxiyuashu.lofter.com/post/1d088eab_1c70d0b69">5、封面源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> 数据库备份 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql主从复制</title>
      <link href="/2019/11/14/8/"/>
      <url>/2019/11/14/8/</url>
      
        <content type="html"><![CDATA[<p>Mysql主从复制又叫Mysql主从同步，是构建数据库高可用集群架构的基础，它通过将一台主机的数据复制到其他一台或多台主机上，并重新应用日志(Relay log)中的SQL语句来实现复制功能。</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>Ubuntu 16.04(3个虚拟机，其中一主两从)</p><p>Mysql版本：5.7.23</p><h2 id="Master配置"><a href="#Master配置" class="headerlink" title="Master配置"></a>Master配置</h2><h3 id="开启二进制日志"><a href="#开启二进制日志" class="headerlink" title="开启二进制日志"></a>开启二进制日志</h3><p>   vi &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf</p><pre class="line-numbers language-none"><code class="language-none">添加以下部分[mysqld]log_bin&#x3D;mysql-bin   &#x2F;&#x2F;[必须]启用二进制日志server-id&#x3D;140       &#x2F;&#x2F;[必须]服务器唯一ID，默认是1，一般取IP最后一段<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Mysql默认同步所有的数据库，也可以指定同步或不同步哪些数据库，添加配置：</code></pre><pre class="line-numbers language-none"><code class="language-none"># 不同步哪些数据库binlog-ignore-db &#x3D; mysqlbinlog-ignore-db &#x3D; testbinlog-ignore-db &#x3D; information_schema# 只同步哪些数据库，除此之外，其他不同步binlog-do-db &#x3D; game<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注意：</strong>这里无论是binlog—do-db还是binlog_ingore_db，如果需要设置多个数据库的时候，不要用逗号隔开，另起一行重新写即可，参考上面的binlog-ignore-db的写0法。</p><p>重启Mysql数据库</p><h3 id="创建用于同步的账户并授权"><a href="#创建用于同步的账户并授权" class="headerlink" title="创建用于同步的账户并授权"></a>创建用于同步的账户并授权</h3><pre class="line-numbers language-none"><code class="language-none">mysql -u root -p mysql&gt;CREATE USER &#39;username@%&#39; [IDENTIFIED BY &#39;PASSWORD&#39;] \gmysql&gt; grant all privileges on *.* to yyzc@&quot;%&quot; identified by &quot;.&quot; \gQuery OK, 0 rows affected (0.00 sec)mysql&gt; flush privileges; \gQuery OK, 0 rows affected (0.00 sec)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h3><p>获取File及Position的信息</p><pre class="line-numbers language-none"><code class="language-none">mysql&gt;show master status \g+------------------+----------+--------------+------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |+------------------+----------+--------------+------------------+| mysql-bin.000004 |      308 |              |                  |+------------------+----------+--------------+------------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Slave配置"><a href="#Slave配置" class="headerlink" title="Slave配置"></a>Slave配置</h2><h3 id="开启二进制日志并重启Mysql"><a href="#开启二进制日志并重启Mysql" class="headerlink" title="开启二进制日志并重启Mysql"></a>开启二进制日志并重启Mysql</h3><h3 id="配置从服务器Slave及启动复制"><a href="#配置从服务器Slave及启动复制" class="headerlink" title="配置从服务器Slave及启动复制"></a>配置从服务器Slave及启动复制</h3><p>   其中master_log_file及master_log_pos从Master中获取</p><pre class="line-numbers language-none"><code class="language-none">mysql&gt;change master to master_host&#x3D;&#39;192.168.245.140&#39;,master_user&#x3D;&#39;mysync&#39;,master_password&#x3D;&#39;123456&#39;,master_log_file&#x3D;&#39;mysql-bin.000004&#39;,master_log_pos&#x3D;308;  mysql&gt;start slave;    &#x2F;&#x2F;启动从服务器复制功能<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="查看Slave的状态"><a href="#查看Slave的状态" class="headerlink" title="查看Slave的状态"></a>查看Slave的状态</h3><p>   其中：Slave_IO及Slave_SQL进程必须正常运行，即YES状态，否则都是错误的状态。</p><pre class="line-numbers language-none"><code class="language-none">mysql&gt; show slave status \g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="同步遇到的问题"><a href="#同步遇到的问题" class="headerlink" title="同步遇到的问题"></a>同步遇到的问题</h2><ol><li><p>因为是虚拟机复制的，所以Mysql的uuid是相同的导致复制失败</p><p>修改:&#x2F;var&#x2F;lib&#x2F;mysql中的auto.cnf中的server-uuid即可</p></li></ol><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p>1.Mysql Replication浅析 ：<a href="https://www.cnblogs.com/zhenyuyaodidiao/p/4635458.html">https://www.cnblogs.com/zhenyuyaodidiao/p/4635458.html</a></p><p>2.Mysql创建用户：<a href="https://www.cnblogs.com/z-books/p/6681777.html">https://www.cnblogs.com/z-books/p/6681777.html</a></p><p>3.Mysql主从复制(Master-Slave)实践：<a href="https://www.cnblogs.com/gl-developer/p/6170423.html">https://www.cnblogs.com/gl-developer/p/6170423.html</a></p><p>4.Mysql uuid相同导致主从复制失败：<a href="https://segmentfault.com/q/1010000010173393">https://segmentfault.com/q/1010000010173393</a></p><p>5.<a href="https://blog.csdn.net/mengtianyalll/article/details/52683021">mysql binlog_do_db参数设置的坑</a><br><a href="http://mubai745.lofter.com/post/1effea90_1c6f4464a">6. 封面来源</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> 数据库集群 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu下Docker的安装及常用命令</title>
      <link href="/2019/11/14/6/"/>
      <url>/2019/11/14/6/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录ubuntu下，docker的安装及常用命令。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ol><li>Ubuntu: 16.04</li></ol><h2 id="Docker的安装"><a href="#Docker的安装" class="headerlink" title="Docker的安装"></a>Docker的安装</h2><pre class="line-numbers language-none"><code class="language-none">$ sudo apt-get update$ sudo apt-get install \    apt-transport-https \    ca-certificates \    curl \    software-properties-common鉴于国内网络问题，强烈建议使用国内源，官方源请在注释中查看。为了确认所下载软件包的合法性，需要添加软件源的 GPG 密钥。$ curl -fsSL https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;docker-ce&#x2F;linux&#x2F;ubuntu&#x2F;gpg | sudo apt-key add -# 官方源# $ curl -fsSL https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu&#x2F;gpg | sudo apt-key add -然后，我们需要向 source.list 中添加 Docker 软件源$ sudo add-apt-repository \    &quot;deb [arch&#x3D;amd64] https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;docker-ce&#x2F;linux&#x2F;ubuntu \    $(lsb_release -cs) \    stable&quot;# 官方源# $ sudo add-apt-repository \#    &quot;deb [arch&#x3D;amd64] https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu \#    $(lsb_release -cs) \#    stable&quot;    以上命令会添加稳定版本的 Docker CE APT 镜像源，如果需要最新或者测试版本的 Docker CE 请将 stable 改为 edge 或者 test。从 Docker 17.06 开始，edge test 版本的 APT 镜像源也会包含稳定版本的 Docker。    安装 Docker CE更新 apt 软件包缓存，并安装 docker-ce：$ sudo apt-get update$ sudo apt-get install docker-ce验证是否安装正确docker run hello-world<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h2><p>镜像简单理解就是一个操作系统的安装包，而容器就是一个具体运行的一个操作系统，及镜像安装完成之后的存在。</p><h3 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h3><p>从 <a href="https://hub.docker.com/explore/">https://hub.docker.com/explore/</a> 获取，可以直接pull,也可以通过Dockerfile自行build.</p><ol><li>直接pull下来的镜像，直接可以拿来运行就可以了，具体如下：<pre class="line-numbers language-none"><code class="language-none"># pull一个ubuntu系统镜像本16.04docker pull ubuntu:16.04# 运行此镜像，运行起来的镜像就被称作容器docker run -it ubuntu:16.04<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li>通过Dockerfile自行build镜像<br>首先要有一个Dockerfile,文件名就是Dockerfile,然后进入此目录，执行以下命令：<pre class="line-numbers language-none"><code class="language-none">docker build -t&#x3D;&quot;saymagic&#x2F;ubuntu-nginx:v2&quot; .然后build成功之后，run即可<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>其中：-t是容器的名字或标签， <strong>.</strong> 不要省略</li></ol><h3 id="镜像的上传"><a href="#镜像的上传" class="headerlink" title="镜像的上传"></a>镜像的上传</h3><p>对于我们自己的镜像，如果想要给其他人，可以将其上传到docker hub,需要在docker hub中注册用户才可以。</p><ol><li>docker login<br>登录，使用在docker hub中注册用户</li><li>docker push saymagic&#x2F;ubuntu-nginx:v1<br>将本地的镜像推送到docker hub中去，这样所有人都可以访问到了，不过可以在docker hub中将其设置为Private的就只能自己访问了</li></ol><h3 id="镜像相关命令"><a href="#镜像相关命令" class="headerlink" title="镜像相关命令"></a>镜像相关命令</h3><h5 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h5><p>查看所有镜像</p><h5 id="docker-rmi-xxx"><a href="#docker-rmi-xxx" class="headerlink" title="docker rmi xxx"></a>docker rmi xxx</h5><p>删除指定镜像：xxx为镜像id</p><pre class="line-numbers language-none"><code class="language-none"># 强制删除全部镜像docker rmi -f $(docker images -q)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="关于容器"><a href="#关于容器" class="headerlink" title="关于容器"></a>关于容器</h2><h3 id="容器相关命令"><a href="#容器相关命令" class="headerlink" title="容器相关命令"></a>容器相关命令</h3><h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><pre class="line-numbers language-none"><code class="language-none"># 查看正在运行的容器docker ps# 查看所有容器docker ps -a# 停止正在运行的容器docker stop $(docker ps -q)# 删除全部容器docker rm $(docker ps -aq)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="run"><a href="#run" class="headerlink" title="run"></a>run</h4><pre class="line-numbers language-none"><code class="language-none">docker run -d  -v &#x2F;opt&#x2F;jenkins_home:&#x2F;var&#x2F;jenkins_home  -p 8089:8080 -p 50000:50000  jenkins&#x2F;jenkins:lts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>参数说明:</strong></p><ol><li>-d:后台运行</li><li>-v:磁盘挂载或映射，此条命令就是本地的&#x2F;opt&#x2F;jenkins_home映射到容器的&#x2F;var&#x2F;jenkins_home目录下，即容器中存储到&#x2F;var&#x2F;jenkins_home目录下的数据实际上是存储到了本地的&#x2F;opt&#x2F;jenkins_home目录中</li><li>-p:端口映射,外部可通过8089端口访问到容器中的8080端口,即：hostIp:containerIp</li><li>-e:环境变量，如-e MYSQL_PASSWORD&#x3D;yearning123</li></ol><h4 id="start"><a href="#start" class="headerlink" title="start"></a>start</h4><pre class="line-numbers language-none"><code class="language-none">docker start xxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中xxx为已经停止的容器的ID</p><h4 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h4><pre class="line-numbers language-none"><code class="language-none">docker exec -ti 1a5da130bf74 &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>连接到容器</p><h4 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h4><pre class="line-numbers language-none"><code class="language-none">docker cp  &#x2F;opt&#x2F;jeisp-admin.war f22e7a0b2562:&#x2F;opt&#x2F;jeisp-admin.wardocker cp f22e7a0b2562:&#x2F;opt&#x2F;jeisp-admin.war  &#x2F;opt&#x2F;jeisp-admin.war<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>将host中的文件copy到容器中和将容器中的文件copy到host中</p><h4 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h4><pre class="line-numbers language-none"><code class="language-none">docker commit -m &quot;Added nginx from ubuntu14.04&quot; -a &quot;saymagic&quot; 79c761f627f3 saymagic&#x2F;ubuntu-nginx:v1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>将正在运行的容器转为镜像</p><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><p>1: <a href="https://yeasy.gitbooks.io/docker_practice/content/install/ubuntu.html">docker——入门到实践</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins打包Springboot项目并部署至Docker中</title>
      <link href="/2019/11/13/5/"/>
      <url>/2019/11/13/5/</url>
      
        <content type="html"><![CDATA[<p>本文记录Jenkins根据每次git的合并自动打包springboot项目，并将项目自动部署到容器中。</p><span id="more"></span><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><ol><li>Jenkins</li><li>源代码管理工具：gitblit</li></ol><h2 id="Jenkins的插件安装"><a href="#Jenkins的插件安装" class="headerlink" title="Jenkins的插件安装"></a>Jenkins的插件安装</h2><p>Jenkins需要安装的插件：</p><ol><li>Git plugin</li><li>Maven Integration plugin</li><li>Publish Over SSH</li></ol><h2 id="Publish-Over-SSH-插件配置"><a href="#Publish-Over-SSH-插件配置" class="headerlink" title="Publish Over SSH 插件配置"></a>Publish Over SSH 插件配置</h2><h3 id="在jenkins服务器上生成秘钥对-使用如下命令"><a href="#在jenkins服务器上生成秘钥对-使用如下命令" class="headerlink" title="在jenkins服务器上生成秘钥对,使用如下命令"></a>在jenkins服务器上生成秘钥对,使用如下命令</h3><pre class="line-numbers language-none"><code class="language-none">ssh-keygen -t rsa<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>生成完毕之后会在~&#x2F;.ssh目录下有私钥id_rsa和公钥id_rsa.pub两个文件<br><strong>注意：</strong>一定要写passphrase，否则会连不上的</p><h3 id="复制公钥内容"><a href="#复制公钥内容" class="headerlink" title="复制公钥内容"></a>复制公钥内容</h3><p>将公钥id_rsa.pub文件中的内容copy到应用服务器中的~&#x2F;.ssh&#x2F;authorized_keys文件中，如果此文件中已经有内容，换行追加即可，没有的话自行创建</p><h3 id="Jenkins配置"><a href="#Jenkins配置" class="headerlink" title="Jenkins配置"></a>Jenkins配置</h3><p>在系统管理-&gt;系统设置-&gt;Publish Over SSH中配置参数<br><img src="http://193.112.158.158:8081/post/20181208/2018-12-08_202735.jpg"><br><strong>注意：</strong>其中Remote Directory是一个通过ssh工具传输文件时，应用服务器接收文件时的存储路径<br>配置完成之后点击下面的Test Configuration测试是否配置成功。</p><h2 id="Jenkins编译SpringBoot类型的项目"><a href="#Jenkins编译SpringBoot类型的项目" class="headerlink" title="Jenkins编译SpringBoot类型的项目"></a>Jenkins编译SpringBoot类型的项目</h2><h3 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h3><p>在创建项目时选择<strong>构建一个maven项目</strong>，需要安装前面提到的Maven Integration plugin。<br>接着就可以配置项目了，重点配置Source Code Management及Build,Build的配置如下：<br><img src="http://193.112.158.158:8081/post/20181208/2018-12-08_203651.jpg"></p><h3 id="配置Post-Steps"><a href="#配置Post-Steps" class="headerlink" title="配置Post Steps"></a>配置Post Steps</h3><p>界面如图：<br><img src="http://193.112.158.158:8081/post/20181208/2018-12-08_203835.jpg"><br><strong>相关参数说明：</strong></p><ol><li>Source files: 需要上传到应用服务器的文件，一般为jar、war等编译后的文件</li><li>Remove prefix：First part of the file path that should not be created on the remote server.</li><li>Remote directory</li><li>Exec command：这个是文件传输完毕之后，在应用服务器中需要执行的命令，一般为脚本，后面提供一个将程序部署在docker的脚本可供参考</li></ol><h2 id="附-将本地的项目部署到docker中去的脚本"><a href="#附-将本地的项目部署到docker中去的脚本" class="headerlink" title="[附:]将本地的项目部署到docker中去的脚本"></a>[附:]将本地的项目部署到docker中去的脚本</h2><p>此脚本的主要执行过程：根据容器的镜像名称获取容器编号，然后停止并删除容器。接着根据镜像重启启动一个容器，并将应用的编译后的文件拷贝到容器的tomcat中，然后启动tomcat</p><pre class="line-numbers language-none"><code class="language-none"># !&#x2F;bin&#x2F;bashCONTAINER_ID&#x3D;&#96;docker ps| grep &quot;neil&#x2F;openjdk:v0.4&quot;|awk &#39;&#123;print $1&#125;&#39;&#96;echo CONTAINER_IDif [ -n &quot;$CONTAINER_ID&quot; ]; then    docker stop $CONTAINER_ID    docker rm $CONTAINER_IDelse # 如果容器启动时失败了，就需要docker ps -a才能找到那个容器    CONTAINER_ID&#x3D;&#96;docker ps -a | grep &quot;neil&#x2F;openjdk:v0.4&quot; | awk &#39;&#123;print $1&#125;&#39;&#96;    if [ -n &quot;$CONTAINER_ID&quot; ]; then  # 如果是第一次在这台机器上拉取运行容器，那么docker ps -a也是找不到这个容器的        docker rm $CONTAINER_ID    fifi# 重新启动一个容器docker run -d -ti -p 9000:8080 neil&#x2F;openjdk:v0.4NEW_CONTAINER_ID&#x3D;&#96;docker ps| grep &quot;neil&#x2F;openjdk:v0.4&quot;|awk &#39;&#123;print $1&#125;&#39;&#96;# 向tomcat目录拷贝文件docker cp  &#x2F;opt&#x2F;jeisp-admin.war $NEW_CONTAINER_ID:&#x2F;opt&#x2F;tomcat&#x2F;apache-tomcat-8.5.30&#x2F;webapps&#x2F;jeisp-admin.war# 启动tomcatdocker exec $NEW_CONTAINER_ID bash -c  &quot;&#x2F;opt&#x2F;tomcat&#x2F;apache-tomcat-8.5.30&#x2F;bin&#x2F;startup.sh&quot;echo complete<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Referenced"><a href="#Referenced" class="headerlink" title="Referenced"></a>Referenced</h2><ol><li><a href="http://blog.51cto.com/faded/1761770">使用Publish Over SSH插件实现远程自动部署</a></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins集成SonarQube对代码进行质量检测</title>
      <link href="/2019/11/13/4/"/>
      <url>/2019/11/13/4/</url>
      
        <content type="html"><![CDATA[<p>本文主要记录jenkins集成sonarqube，以进行代码审查。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ol><li>SonarQube: V5.6.7</li><li>Jenkins: 2.138.2</li><li>Mysql: 5.7</li></ol><h2 id="SonarQube在windows下的安装及配置"><a href="#SonarQube在windows下的安装及配置" class="headerlink" title="SonarQube在windows下的安装及配置"></a>SonarQube在windows下的安装及配置</h2><h3 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h3><p>在conf&#x2F;sonar.properties文件中，修改以下内容即可：</p><pre class="line-numbers language-none"><code class="language-none">sonar.jdbc.urlsonar.jdbc.passwordsonar.jdbc.username<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>注意：</strong>MariaDB貌似是不支持的，这里数据库版本使用的是Mysql5.7</p><h3 id="汉化插件下载及安装"><a href="#汉化插件下载及安装" class="headerlink" title="汉化插件下载及安装"></a>汉化插件下载及安装</h3><p>下载地址：<br><a href="https://github.com/SonarQubeCommunity/sonar-l10n-zh/releases">https://github.com/SonarQubeCommunity/sonar-l10n-zh/releases</a><br>将jar放在&#x2F;extensions&#x2F;plugins&#x2F; 重启SonarQube即可</p><h3 id="配置邮件通知"><a href="#配置邮件通知" class="headerlink" title="配置邮件通知"></a>配置邮件通知</h3><p>启动成功之后打开<a href="http://ip:9000/">http://ip:9000</a>, 默认是这个ip地址，这里配置的qq邮箱<br><img src="http://193.112.158.158:8081/post/20181206/2018-12-06_204045.jpg"><br>除此之外，还需要在通用-&gt;Server base URL，配置一下服务器的地址，否则发送的邮件中涉及到SonarQube的地址是Localhost。</p><h2 id="Jenkins集成SonarQube"><a href="#Jenkins集成SonarQube" class="headerlink" title="Jenkins集成SonarQube"></a>Jenkins集成SonarQube</h2><h3 id="插件安装及配置"><a href="#插件安装及配置" class="headerlink" title="插件安装及配置"></a>插件安装及配置</h3><p>安装插件： SonarQube Scanner for Jenkins</p><p>然后在Jenkins的系统管理-&gt;系统设置进行参数配置,界面如图：<br><img src="http://193.112.158.158:8081/post/20181206/2018-12-06_204827.jpg"></p><p>其中Server authentication token在SonarQube：我的账户-&gt;安全-&gt;Tokens处生成</p><h2 id="在具体的job中配置SonarQube"><a href="#在具体的job中配置SonarQube" class="headerlink" title="在具体的job中配置SonarQube"></a>在具体的job中配置SonarQube</h2><p><img src="http://193.112.158.158:8081/post/20181206/2018-12-06_205642.jpg"></p><p>Analysis properties:</p><pre class="line-numbers language-none"><code class="language-none"># key和name保持一致且在sonar下唯一sonar.projectKey&#x3D;sonar.projectName&#x3D;# 工程版本sonar.projectVersion&#x3D;1.0  # 源代码目录sonar.sources&#x3D;# 分析的语言 sonar.language&#x3D;java# 编码sonar.sourceEncoding&#x3D;UTF-8# sonar.java.binaries&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>欢迎使用 Typecho</title>
      <link href="/2019/11/13/1/"/>
      <url>/2019/11/13/1/</url>
      
        <content type="html"><![CDATA[<p>如果您看到这篇文章,表示您的 blog 已经安装成功.</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
