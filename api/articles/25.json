{"title":"Linux中的硬链接和软链接","slug":"25","date":"2019-12-01T15:51:00.000Z","updated":"2019-12-01T15:54:56.000Z","comments":true,"path":"api/articles/25.json","excerpt":"本文主要介绍linux系统的软链接和硬链接的使用和差异。","covers":null,"content":"<p>本文主要介绍linux系统的软链接和硬链接的使用和差异。</p>\n<span id=\"more\"></span>\n<h2 id=\"linux文件的权限标识符\"><a href=\"#linux文件的权限标识符\" class=\"headerlink\" title=\"linux文件的权限标识符\"></a>linux文件的权限标识符</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">drwxr-xr-x<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>第一位是文件类型，-为一般文件，d为目录，l为链接文件<br>剩余9位则是代表【owner权限】【group权限】【others权限】<br>r:读，w:写，x：可执行</p>\n<h2 id=\"软链接和硬链接\"><a href=\"#软链接和硬链接\" class=\"headerlink\" title=\"软链接和硬链接\"></a>软链接和硬链接</h2><p>为了解决文件的共享使用<br>ll、ls -l：罗列出当前文件或目录的详细信息，含有时间、读写权限、大小、时间等信息，如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">drwxr-xr-x 2 root root 4096 11月  7  2018 conf.d\n-rw-r--r-- 1 root root 1077 11月  7  2018 fastcgi.conf\n-rw-r--r-- 1 root root 1007 11月  7  2018 fastcgi_params\n-rw-r--r-- 1 root root 2837 11月  7  2018 koi-utf<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>软链接</strong>：同windows的快捷方式很像，删除不影响源文件，但若被指向的原文件被删除，则相关软连接就变成了死链接；</p>\n<p><strong>硬链接</strong>：允许一个文件有多个有效路径名，作用对象为文件，只能在同一文件系统中的文件之间进行链接，之所以文件建立了硬链接就会防止数据误删，是因为文件系统的原理是，只要文件的索引节点(inode)还有一个以上的链接（仅删除了该文件的指向），只删除其中一个链接并不影响索引节点本身和其他的链接（数据的实体并未删除），只有当最后一个链接被删除后，此时如果有新数据要存储到磁盘上，被删除的文件的数据块及目录的链接才会被释放，空间被新数据暂用覆盖。</p>\n<h2 id=\"软硬链接的相关命令\"><a href=\"#软硬链接的相关命令\" class=\"headerlink\" title=\"软硬链接的相关命令\"></a>软硬链接的相关命令</h2><h3 id=\"创建软链接\"><a href=\"#创建软链接\" class=\"headerlink\" title=\"创建软链接\"></a>创建软链接</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">ln -s source target\n如：\nln -s &#x2F;xxx&#x2F;lntest&#x2F;soft&#x2F;default.txt test2\n在当前目录创建一个test2执行default.txt<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>然后可以查看test2的文件类型为l<br><strong>注意</strong>：软链接支持目录及文件；</p>\n<h3 id=\"删除软链接\"><a href=\"#删除软链接\" class=\"headerlink\" title=\"删除软链接\"></a>删除软链接</h3><p>同删除文件是一样的，使用rm命令即可</p>\n<h3 id=\"修改软链接\"><a href=\"#修改软链接\" class=\"headerlink\" title=\"修改软链接\"></a>修改软链接</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">ln -snf [source ] [target]<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"创建硬链接\"><a href=\"#创建硬链接\" class=\"headerlink\" title=\"创建硬链接\"></a>创建硬链接</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">ln source target<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>注意：<br>1、硬链接不需要使用绝对路径；<br>2、只能对文件创建硬链接；<br>3、同一个源文件的所有硬链接文件必须在同一个硬盘、同一个分区里面<br>4、使用场景很少，不建议使用；</p>\n<h2 id=\"软链接同硬链接的差异\"><a href=\"#软链接同硬链接的差异\" class=\"headerlink\" title=\"软链接同硬链接的差异\"></a>软链接同硬链接的差异</h2><p>软链接是快捷方式，可以用在硬盘合理分配上；<br>硬链接是文件名字，一个文件的许多名字互为硬链接；</p>\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.linuxidc.com/Linux/2018-07/153131.htm\">1、Linux命令 ls 和 ll 的使用方法与基本区别</a><br><a href=\"https://www.cnblogs.com/songgj/p/9115954.html\">2、Linux系统硬链接和软链接</a><br><a href=\"https://blog.csdn.net/m290345792/article/details/78518360\">3、linux软链接的创建、删除和更新</a><br><a href=\"https://blog.csdn.net/guangcheng0312q/article/details/100117582\">4、Linux软链接与硬链接实战解析</a><br><a href=\"https://huadou145.lofter.com/post/205d4db3_1c71e6ba8\">5、封面图</a></p>\n","more":"<h2 id=\"linux文件的权限标识符\"><a href=\"#linux文件的权限标识符\" class=\"headerlink\" title=\"linux文件的权限标识符\"></a>linux文件的权限标识符</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">drwxr-xr-x<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>第一位是文件类型，-为一般文件，d为目录，l为链接文件<br>剩余9位则是代表【owner权限】【group权限】【others权限】<br>r:读，w:写，x：可执行</p>\n<h2 id=\"软链接和硬链接\"><a href=\"#软链接和硬链接\" class=\"headerlink\" title=\"软链接和硬链接\"></a>软链接和硬链接</h2><p>为了解决文件的共享使用<br>ll、ls -l：罗列出当前文件或目录的详细信息，含有时间、读写权限、大小、时间等信息，如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">drwxr-xr-x 2 root root 4096 11月  7  2018 conf.d\n-rw-r--r-- 1 root root 1077 11月  7  2018 fastcgi.conf\n-rw-r--r-- 1 root root 1007 11月  7  2018 fastcgi_params\n-rw-r--r-- 1 root root 2837 11月  7  2018 koi-utf<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>软链接</strong>：同windows的快捷方式很像，删除不影响源文件，但若被指向的原文件被删除，则相关软连接就变成了死链接；</p>\n<p><strong>硬链接</strong>：允许一个文件有多个有效路径名，作用对象为文件，只能在同一文件系统中的文件之间进行链接，之所以文件建立了硬链接就会防止数据误删，是因为文件系统的原理是，只要文件的索引节点(inode)还有一个以上的链接（仅删除了该文件的指向），只删除其中一个链接并不影响索引节点本身和其他的链接（数据的实体并未删除），只有当最后一个链接被删除后，此时如果有新数据要存储到磁盘上，被删除的文件的数据块及目录的链接才会被释放，空间被新数据暂用覆盖。</p>\n<h2 id=\"软硬链接的相关命令\"><a href=\"#软硬链接的相关命令\" class=\"headerlink\" title=\"软硬链接的相关命令\"></a>软硬链接的相关命令</h2><h3 id=\"创建软链接\"><a href=\"#创建软链接\" class=\"headerlink\" title=\"创建软链接\"></a>创建软链接</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">ln -s source target\n如：\nln -s &#x2F;xxx&#x2F;lntest&#x2F;soft&#x2F;default.txt test2\n在当前目录创建一个test2执行default.txt<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>然后可以查看test2的文件类型为l<br><strong>注意</strong>：软链接支持目录及文件；</p>\n<h3 id=\"删除软链接\"><a href=\"#删除软链接\" class=\"headerlink\" title=\"删除软链接\"></a>删除软链接</h3><p>同删除文件是一样的，使用rm命令即可</p>\n<h3 id=\"修改软链接\"><a href=\"#修改软链接\" class=\"headerlink\" title=\"修改软链接\"></a>修改软链接</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">ln -snf [source ] [target]<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"创建硬链接\"><a href=\"#创建硬链接\" class=\"headerlink\" title=\"创建硬链接\"></a>创建硬链接</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">ln source target<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>注意：<br>1、硬链接不需要使用绝对路径；<br>2、只能对文件创建硬链接；<br>3、同一个源文件的所有硬链接文件必须在同一个硬盘、同一个分区里面<br>4、使用场景很少，不建议使用；</p>\n<h2 id=\"软链接同硬链接的差异\"><a href=\"#软链接同硬链接的差异\" class=\"headerlink\" title=\"软链接同硬链接的差异\"></a>软链接同硬链接的差异</h2><p>软链接是快捷方式，可以用在硬盘合理分配上；<br>硬链接是文件名字，一个文件的许多名字互为硬链接；</p>\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.linuxidc.com/Linux/2018-07/153131.htm\">1、Linux命令 ls 和 ll 的使用方法与基本区别</a><br><a href=\"https://www.cnblogs.com/songgj/p/9115954.html\">2、Linux系统硬链接和软链接</a><br><a href=\"https://blog.csdn.net/m290345792/article/details/78518360\">3、linux软链接的创建、删除和更新</a><br><a href=\"https://blog.csdn.net/guangcheng0312q/article/details/100117582\">4、Linux软链接与硬链接实战解析</a><br><a href=\"https://huadou145.lofter.com/post/205d4db3_1c71e6ba8\">5、封面图</a></p>","categories":[{"name":"Linux","path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"}]}