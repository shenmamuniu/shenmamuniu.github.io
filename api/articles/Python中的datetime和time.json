{"title":"Python中的datetime和time","slug":"Python中的datetime和time","date":"2022-11-26T02:41:30.000Z","updated":"2022-11-26T08:02:21.701Z","comments":true,"path":"api/articles/Python中的datetime和time.json","realPath":null,"excerpt":"本文记录Python中的日期和时间的用法。","covers":null,"cover":null,"content":"<p>本文记录Python中的日期和时间的用法。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"应用环境\"><a href=\"#应用环境\" class=\"headerlink\" title=\"应用环境\"></a>应用环境</h2><p>Python:3.9</p>\n<p>OS:Windows</p>\n<p>IDE:VS Code</p>\n<h2 id=\"时间：time\"><a href=\"#时间：time\" class=\"headerlink\" title=\"时间：time\"></a>时间：time</h2><p>本节内容来源：<a href=\"https://www.runoob.com/python3/python3-date-time.html\">Python3  日期和时间</a></p>\n<h3 id=\"获取当前时间\"><a href=\"#获取当前时间\" class=\"headerlink\" title=\"获取当前时间\"></a>获取当前时间</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> time\n<span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">.</span>localtime<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>输出：</p>\n<p>2022-11-26 15:43:44</p>\n<h3 id=\"将时间字符串转为时间\"><a href=\"#将时间字符串转为时间\" class=\"headerlink\" title=\"将时间字符串转为时间\"></a>将时间字符串转为时间</h3><p>这里有个struct_time的东西，为tuple格式：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">time_struct<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span><span class=\"token string\">\"2022-11-26 15:43:44\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>time_struct<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>输出结果如下:</p>\n<p>time.struct_time(tm_year&#x3D;2022, tm_mon&#x3D;11, tm_mday&#x3D;26, tm_hour&#x3D;15, tm_min&#x3D;43, tm_sec&#x3D;44, tm_wday&#x3D;5, tm_yday&#x3D;330,<br>tm_isdst&#x3D;-1)</p>\n<blockquote>\n<p>注：这个是可以直接使用&gt;,&lt;等运算符直接比较大小的</p>\n</blockquote>\n<p>如判断当前时间是否在某个时间段：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">checkTimePassed</span><span class=\"token punctuation\">(</span>startTime<span class=\"token punctuation\">,</span>endTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    start<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>startTime<span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    end<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>endTime<span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    nowstr<span class=\"token operator\">=</span>datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    now<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>nowstr<span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> now<span class=\"token operator\">></span>start <span class=\"token keyword\">and</span> now<span class=\"token operator\">&lt;</span>end<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<p>将time_struct转为时间戳：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">.</span>mktime<span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span><span class=\"token string\">\"2022-11-26 15:43:44\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>输出</p>\n<p>1669448624.0</p>\n<h3 id=\"时间格式化字符串\"><a href=\"#时间格式化字符串\" class=\"headerlink\" title=\"时间格式化字符串\"></a>时间格式化字符串</h3><ul>\n<li>%y 两位数的年份表示（00-99）</li>\n<li>%Y 四位数的年份表示（000-9999）</li>\n<li>%m 月份（01-12）</li>\n<li>%d 月内中的一天（0-31）</li>\n<li>%H 24小时制小时数（0-23）</li>\n<li>%I 12小时制小时数（01-12）</li>\n<li>%M 分钟数（00&#x3D;59）</li>\n<li>%S 秒（00-59）</li>\n</ul>\n<h2 id=\"datetime\"><a href=\"#datetime\" class=\"headerlink\" title=\"datetime\"></a>datetime</h2><h3 id=\"获取当前时间-1\"><a href=\"#获取当前时间-1\" class=\"headerlink\" title=\"获取当前时间\"></a>获取当前时间</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> datetime\ndt<span class=\"token operator\">=</span>datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dt<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>输出</p>\n<p>2022-11-26 15:50:27</p>\n<h3 id=\"获取前10分钟的时间\"><a href=\"#获取前10分钟的时间\" class=\"headerlink\" title=\"获取前10分钟的时间\"></a>获取前10分钟的时间</h3><p>使用datetime的<strong>timedelta</strong>方法：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> datetime\ndt<span class=\"token operator\">=</span>datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dt<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nyes_time <span class=\"token operator\">=</span> dt <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>minutes<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\nnewTime<span class=\"token operator\">=</span>yes_time<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>newTime<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>输出：</p>\n<p>2022-11-26 15:51:15<br>2022-11-26 15:41:15</p>\n<h2 id=\"strftime-vs-strptime\"><a href=\"#strftime-vs-strptime\" class=\"headerlink\" title=\"strftime vs. strptime\"></a>strftime vs. strptime</h2><p>strftime:将时间类型转为指定格式的字符串</p>\n<p>strptime:将时间字符串转为时间</p>\n","more":"<h2 id=\"应用环境\"><a href=\"#应用环境\" class=\"headerlink\" title=\"应用环境\"></a>应用环境</h2><p>Python:3.9</p>\n<p>OS:Windows</p>\n<p>IDE:VS Code</p>\n<h2 id=\"时间：time\"><a href=\"#时间：time\" class=\"headerlink\" title=\"时间：time\"></a>时间：time</h2><p>本节内容来源：<a href=\"https://www.runoob.com/python3/python3-date-time.html\">Python3  日期和时间</a></p>\n<h3 id=\"获取当前时间\"><a href=\"#获取当前时间\" class=\"headerlink\" title=\"获取当前时间\"></a>获取当前时间</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> time\n<span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">.</span>localtime<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>输出：</p>\n<p>2022-11-26 15:43:44</p>\n<h3 id=\"将时间字符串转为时间\"><a href=\"#将时间字符串转为时间\" class=\"headerlink\" title=\"将时间字符串转为时间\"></a>将时间字符串转为时间</h3><p>这里有个struct_time的东西，为tuple格式：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">time_struct<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span><span class=\"token string\">\"2022-11-26 15:43:44\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>time_struct<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>输出结果如下:</p>\n<p>time.struct_time(tm_year&#x3D;2022, tm_mon&#x3D;11, tm_mday&#x3D;26, tm_hour&#x3D;15, tm_min&#x3D;43, tm_sec&#x3D;44, tm_wday&#x3D;5, tm_yday&#x3D;330,<br>tm_isdst&#x3D;-1)</p>\n<blockquote>\n<p>注：这个是可以直接使用&gt;,&lt;等运算符直接比较大小的</p>\n</blockquote>\n<p>如判断当前时间是否在某个时间段：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">checkTimePassed</span><span class=\"token punctuation\">(</span>startTime<span class=\"token punctuation\">,</span>endTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    start<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>startTime<span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    end<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>endTime<span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    nowstr<span class=\"token operator\">=</span>datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    now<span class=\"token operator\">=</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>nowstr<span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> now<span class=\"token operator\">></span>start <span class=\"token keyword\">and</span> now<span class=\"token operator\">&lt;</span>end<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<p>将time_struct转为时间戳：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">.</span>mktime<span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span><span class=\"token string\">\"2022-11-26 15:43:44\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>输出</p>\n<p>1669448624.0</p>\n<h3 id=\"时间格式化字符串\"><a href=\"#时间格式化字符串\" class=\"headerlink\" title=\"时间格式化字符串\"></a>时间格式化字符串</h3><ul>\n<li>%y 两位数的年份表示（00-99）</li>\n<li>%Y 四位数的年份表示（000-9999）</li>\n<li>%m 月份（01-12）</li>\n<li>%d 月内中的一天（0-31）</li>\n<li>%H 24小时制小时数（0-23）</li>\n<li>%I 12小时制小时数（01-12）</li>\n<li>%M 分钟数（00&#x3D;59）</li>\n<li>%S 秒（00-59）</li>\n</ul>\n<h2 id=\"datetime\"><a href=\"#datetime\" class=\"headerlink\" title=\"datetime\"></a>datetime</h2><h3 id=\"获取当前时间-1\"><a href=\"#获取当前时间-1\" class=\"headerlink\" title=\"获取当前时间\"></a>获取当前时间</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> datetime\ndt<span class=\"token operator\">=</span>datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dt<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>输出</p>\n<p>2022-11-26 15:50:27</p>\n<h3 id=\"获取前10分钟的时间\"><a href=\"#获取前10分钟的时间\" class=\"headerlink\" title=\"获取前10分钟的时间\"></a>获取前10分钟的时间</h3><p>使用datetime的<strong>timedelta</strong>方法：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> datetime\ndt<span class=\"token operator\">=</span>datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dt<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nyes_time <span class=\"token operator\">=</span> dt <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>minutes<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\nnewTime<span class=\"token operator\">=</span>yes_time<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>newTime<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>输出：</p>\n<p>2022-11-26 15:51:15<br>2022-11-26 15:41:15</p>\n<h2 id=\"strftime-vs-strptime\"><a href=\"#strftime-vs-strptime\" class=\"headerlink\" title=\"strftime vs. strptime\"></a>strftime vs. strptime</h2><p>strftime:将时间类型转为指定格式的字符串</p>\n<p>strptime:将时间字符串转为时间</p>","categories":[{"name":"Python","path":"api/categories/Python.json"}],"tags":[{"name":"Python","path":"api/tags/Python.json"}]}