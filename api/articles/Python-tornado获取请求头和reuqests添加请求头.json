{"title":"Python tornado获取请求头和reuqests添加请求头","slug":"Python-tornado获取请求头和reuqests添加请求头","date":"2022-12-08T01:49:25.000Z","updated":"2022-12-08T02:00:38.802Z","comments":true,"path":"api/articles/Python-tornado获取请求头和reuqests添加请求头.json","excerpt":"本文介绍Python中使用tornado做接口时，获取客户端请求头中的数据，然后将请求头中的数据使用requests发送到另外一个接口。","covers":null,"content":"<p>本文介绍Python中使用tornado做接口时，获取客户端请求头中的数据，然后将请求头中的数据使用requests发送到另外一个接口。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"应用环境\"><a href=\"#应用环境\" class=\"headerlink\" title=\"应用环境\"></a>应用环境</h2><p>Python: 3.9</p>\n<p>OS: Win10</p>\n<p>IDE: VS Code</p>\n<h2 id=\"客户端发送请求\"><a href=\"#客户端发送请求\" class=\"headerlink\" title=\"客户端发送请求\"></a>客户端发送请求</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">$<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">'/imgproc/rest/test'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string-property property\">'token'</span><span class=\"token operator\">:</span> <span class=\"token string\">'zjk'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">dataType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token literal-property property\">pId</span><span class=\"token operator\">:</span><span class=\"token number\">23</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">timeout</span><span class=\"token operator\">:</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Tornado获取请求头中的数据\"><a href=\"#Tornado获取请求头中的数据\" class=\"headerlink\" title=\"Tornado获取请求头中的数据\"></a>Tornado获取请求头中的数据</h2><p>这里的headers是字典类型的数据，因此可以直接读取：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">token<span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">'token'</span><span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"requests发送请求时携带token\"><a href=\"#requests发送请求时携带token\" class=\"headerlink\" title=\"requests发送请求时携带token\"></a>requests发送请求时携带token</h2><p>requests这里的headers也是字典类型的数据，如下：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> requests\nrequests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>headers<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'token'</span><span class=\"token punctuation\">:</span>token<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n","more":"<h2 id=\"应用环境\"><a href=\"#应用环境\" class=\"headerlink\" title=\"应用环境\"></a>应用环境</h2><p>Python: 3.9</p>\n<p>OS: Win10</p>\n<p>IDE: VS Code</p>\n<h2 id=\"客户端发送请求\"><a href=\"#客户端发送请求\" class=\"headerlink\" title=\"客户端发送请求\"></a>客户端发送请求</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">$<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">'/imgproc/rest/test'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string-property property\">'token'</span><span class=\"token operator\">:</span> <span class=\"token string\">'zjk'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">dataType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token literal-property property\">pId</span><span class=\"token operator\">:</span><span class=\"token number\">23</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">timeout</span><span class=\"token operator\">:</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Tornado获取请求头中的数据\"><a href=\"#Tornado获取请求头中的数据\" class=\"headerlink\" title=\"Tornado获取请求头中的数据\"></a>Tornado获取请求头中的数据</h2><p>这里的headers是字典类型的数据，因此可以直接读取：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">token<span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">'token'</span><span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"requests发送请求时携带token\"><a href=\"#requests发送请求时携带token\" class=\"headerlink\" title=\"requests发送请求时携带token\"></a>requests发送请求时携带token</h2><p>requests这里的headers也是字典类型的数据，如下：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> requests\nrequests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>headers<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'token'</span><span class=\"token punctuation\">:</span>token<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>","categories":[{"name":"Python","path":"api/categories/Python.json"},{"name":"Tornado","path":"api/categories/Tornado.json"}],"tags":[{"name":"Tornado","path":"api/tags/Tornado.json"},{"name":"Python","path":"api/tags/Python.json"}]}