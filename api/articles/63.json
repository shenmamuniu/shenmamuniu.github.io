{"title":"Vue部署Nginx刷新页面404","slug":"63","date":"2020-06-07T15:31:00.000Z","updated":"2020-06-07T15:42:09.000Z","comments":true,"path":"api/articles/63.json","excerpt":"最近在把vuejs项目部署到Nginx去的时候，出现了两个问题：1. 刷新404 2. 菜单处的链接点击没反映。","covers":null,"content":"<p>最近在把vuejs项目部署到Nginx去的时候，出现了两个问题：1. 刷新404 2. 菜单处的链接点击没反映。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"开发环境\"><a href=\"#开发环境\" class=\"headerlink\" title=\"开发环境\"></a>开发环境</h2><p>OS: Deepin V20</p>\n<h2 id=\"刷新页面404的问题\"><a href=\"#刷新页面404的问题\" class=\"headerlink\" title=\"刷新页面404的问题\"></a>刷新页面404的问题</h2><p>这个是vue-router的mode配置成了history的原因，可以通过在Nginx的配置文件中添加如下内容:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">location &#x2F;&#123;\n...\ntry_files $uri $uri&#x2F; &#x2F;index.html;\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"点击菜单进行页面跳转报错\"><a href=\"#点击菜单进行页面跳转报错\" class=\"headerlink\" title=\"点击菜单进行页面跳转报错\"></a>点击菜单进行页面跳转报错</h2><p>我这里是静态资源的路径错误，路径中多了一部分当前链接的内容，而不是&#x2F;static&#x2F;…,这里通过修改vue.config.js的publicPath的属性来解决。</p>\n<ol>\n<li>publicPath</li>\n</ol>\n<p>这个属性是页面js和css的静态资源路径，如果有需要，可以修改,也可以根据当前环境进行配置，如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">publicPath: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &quot;production&quot; ? &quot;.&#x2F;&quot; : &quot;&#x2F;&quot;,<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<ol start=\"2\">\n<li>outputDir</li>\n</ol>\n<p>这个属性是打包时生成的路径，可自行定义，也是在vue.config.js中设置。</p>\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.cnblogs.com/goloving/p/9170508.html\">1、Vue路由history模式踩坑记录：nginx配置解决404问题</a></p>\n","more":"<h2 id=\"开发环境\"><a href=\"#开发环境\" class=\"headerlink\" title=\"开发环境\"></a>开发环境</h2><p>OS: Deepin V20</p>\n<h2 id=\"刷新页面404的问题\"><a href=\"#刷新页面404的问题\" class=\"headerlink\" title=\"刷新页面404的问题\"></a>刷新页面404的问题</h2><p>这个是vue-router的mode配置成了history的原因，可以通过在Nginx的配置文件中添加如下内容:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">location &#x2F;&#123;\n...\ntry_files $uri $uri&#x2F; &#x2F;index.html;\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"点击菜单进行页面跳转报错\"><a href=\"#点击菜单进行页面跳转报错\" class=\"headerlink\" title=\"点击菜单进行页面跳转报错\"></a>点击菜单进行页面跳转报错</h2><p>我这里是静态资源的路径错误，路径中多了一部分当前链接的内容，而不是&#x2F;static&#x2F;…,这里通过修改vue.config.js的publicPath的属性来解决。</p>\n<ol>\n<li>publicPath</li>\n</ol>\n<p>这个属性是页面js和css的静态资源路径，如果有需要，可以修改,也可以根据当前环境进行配置，如下：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">publicPath: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &quot;production&quot; ? &quot;.&#x2F;&quot; : &quot;&#x2F;&quot;,<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<ol start=\"2\">\n<li>outputDir</li>\n</ol>\n<p>这个属性是打包时生成的路径，可自行定义，也是在vue.config.js中设置。</p>\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.cnblogs.com/goloving/p/9170508.html\">1、Vue路由history模式踩坑记录：nginx配置解决404问题</a></p>","categories":[{"name":"前端","path":"api/categories/前端.json"}],"tags":[{"name":"NodeJS","path":"api/tags/NodeJS.json"},{"name":"VUE","path":"api/tags/VUE.json"}]}