{"title":"记一次Mysql版本升级","slug":"70","date":"2020-08-26T09:29:00.000Z","updated":"2021-03-19T06:45:44.000Z","comments":true,"path":"api/articles/70.json","realPath":null,"excerpt":"由于线上的mysql爆出了安全漏洞，因此要把mysql升级到最新版本5.7.31,本文主要对mysql版本升级过程做简单记录。","covers":null,"cover":null,"content":"<p>由于线上的mysql爆出了安全漏洞，因此要把mysql升级到最新版本5.7.31,本文主要对mysql版本升级过程做简单记录。</p>\n<span id=\"more\"></span>\n<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><p>OS:centos7<br>Mysql:5.7.26</p>\n<h2 id=\"升级Mysql版本\"><a href=\"#升级Mysql版本\" class=\"headerlink\" title=\"升级Mysql版本\"></a>升级Mysql版本</h2><p>之前mysql的安装文件：mysql-5.7.25-linux-glibc2.12-x86_64.tar.gz,由于之前并没有通过yum命令安装，而是通过二进制文件安装的，因此只需要将mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz中的文件复制到mysql的安装目录中即可。<br>解压mysql:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">tar -zxvf mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>将新版本的mysql复制到mysql安装路径中：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cp -r -f mysql-5.7.25-linux-glibc2.12-x86_64&#x2F;* &#x2F;usr&#x2F;local&#x2F;mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>如果在拷贝时，即便有-f还是需要一个个输入yes确认覆盖。可参考如下方法解决：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">unalias cp<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>之后就可以强制覆盖文件了(仅限本次会话使用)。</p>\n<h2 id=\"查看mysql版本\"><a href=\"#查看mysql版本\" class=\"headerlink\" title=\"查看mysql版本\"></a>查看mysql版本</h2><p>登陆mysql</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">mysql -uroot -p<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>查看版本</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">select version();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p><a href=\"https://www.centoschina.cn/command/help/4292.html\">1、CentOS下cp&#x2F;rm&#x2F;mv等命令强制覆盖操作</a><br><a href=\"https://huadou145.lofter.com/post/205d4db3_1c81c6e8f\">2、封面图源</a></p>\n","more":"<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><p>OS:centos7<br>Mysql:5.7.26</p>\n<h2 id=\"升级Mysql版本\"><a href=\"#升级Mysql版本\" class=\"headerlink\" title=\"升级Mysql版本\"></a>升级Mysql版本</h2><p>之前mysql的安装文件：mysql-5.7.25-linux-glibc2.12-x86_64.tar.gz,由于之前并没有通过yum命令安装，而是通过二进制文件安装的，因此只需要将mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz中的文件复制到mysql的安装目录中即可。<br>解压mysql:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">tar -zxvf mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>将新版本的mysql复制到mysql安装路径中：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">cp -r -f mysql-5.7.25-linux-glibc2.12-x86_64&#x2F;* &#x2F;usr&#x2F;local&#x2F;mysql<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>如果在拷贝时，即便有-f还是需要一个个输入yes确认覆盖。可参考如下方法解决：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">unalias cp<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>之后就可以强制覆盖文件了(仅限本次会话使用)。</p>\n<h2 id=\"查看mysql版本\"><a href=\"#查看mysql版本\" class=\"headerlink\" title=\"查看mysql版本\"></a>查看mysql版本</h2><p>登陆mysql</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">mysql -uroot -p<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>查看版本</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">select version();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p><a href=\"https://www.centoschina.cn/command/help/4292.html\">1、CentOS下cp&#x2F;rm&#x2F;mv等命令强制覆盖操作</a><br><a href=\"https://huadou145.lofter.com/post/205d4db3_1c81c6e8f\">2、封面图源</a></p>","categories":[{"name":"数据库","path":"api/categories/数据库.json"}],"tags":[{"name":"Mysql","path":"api/tags/Mysql.json"}]}