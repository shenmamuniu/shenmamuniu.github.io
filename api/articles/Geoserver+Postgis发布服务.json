{"title":"Geoserver+Postgis发布服务","slug":"Geoserver+Postgis发布服务","date":"2021-10-08T01:14:54.000Z","updated":"2021-10-08T01:14:54.000Z","comments":true,"path":"api/articles/Geoserver+Postgis发布服务.json","excerpt":"本文通过qgis+postgis+geoserver实现矢量数据的存储与数据共享。","covers":["/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1968459782.png","/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1165327728.png","/2021/10/08/geoserver-postgis-fa-bu-fu-wu/586084083.png"],"content":"<p>本文通过qgis+postgis+geoserver实现矢量数据的存储与数据共享。</p>\n<span id=\"more\"></span>\n<h2 id=\"应用环境\"><a href=\"#应用环境\" class=\"headerlink\" title=\"应用环境\"></a>应用环境</h2><p>OS:win8 x64<br>PostGIS:3.1.4<br>Postgresql:10.18.2<br>Geoserver:2.19.2<br>Tomcat:8.5.71<br>JDK:1.8.131<br>QGIS:3.16.11</p>\n<h2 id=\"Postgresql和Postgis\"><a href=\"#Postgresql和Postgis\" class=\"headerlink\" title=\"Postgresql和Postgis\"></a>Postgresql和Postgis</h2><p>Postgresql为开源的关系型数据库，Postgis为在此基础上开发的支持空间数据存储与计算的扩展工具，为Postgresql提供了空间数据存储与计算的能力。</p>\n<p>postgis对postgresql的版本支持可以参考此处<a href=\"https://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS\">链接</a>,具体如下：<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1968459782.png\" alt=\"postgis支持版本说明\"></p>\n<p>本文使用的是PostGIS版本为3.1.4,Postgresql版本为10.18.2.</p>\n<h3 id=\"Postgresql数据库安装及初始化\"><a href=\"#Postgresql数据库安装及初始化\" class=\"headerlink\" title=\"Postgresql数据库安装及初始化\"></a>Postgresql数据库安装及初始化</h3><p>安装过程根据提示进行即可，安装完成之后，数据库初始化：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">C:\\Program Files\\PostgreSQL\\10\\bin\\initdb.exe -D C:\\pgdata -E UTF8 --locale&#x3D;Chinese<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>数据库启动：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">C:\\Program Files\\PostgreSQL\\10\\bin\\pg_ctl.exe start -w -D C:\\pgdata<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"Postgis安装\"><a href=\"#Postgis安装\" class=\"headerlink\" title=\"Postgis安装\"></a>Postgis安装</h3><p>这里最好下载二进制安装包:postgis-bundle-pg10x64-setup-3.1.4-1.exe,根据提示进行安装就就好了，安装过程中会提示创建一个空间数据库postgis_31_sample。</p>\n<h3 id=\"pgAdmin创建空间数据库\"><a href=\"#pgAdmin创建空间数据库\" class=\"headerlink\" title=\"pgAdmin创建空间数据库\"></a>pgAdmin创建空间数据库</h3><p>创建完数据库添加一个叫postgis的扩展就可以了支持存储空间数据了，如下图:<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1165327728.png\"></p>\n<h2 id=\"QGIS向postgis中导入矢量数据\"><a href=\"#QGIS向postgis中导入矢量数据\" class=\"headerlink\" title=\"QGIS向postgis中导入矢量数据\"></a>QGIS向postgis中导入矢量数据</h2><p>首先在右侧的Browser创建Postgis的连接：<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/586084083.png\"><br>假定你已经在QGIS中加载了一个shapefile文件。<br>点击QGIS工具条的Database-&gt;Database Manager,打开下图所示界面：<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/4294453525.png\"><br>找到刚刚创建的postgis数据库连接，并选中数据库，然后点击Import Layer即可，根据提示进行操作。</p>\n<h2 id=\"geoserver连接postgis并发布图层服务\"><a href=\"#geoserver连接postgis并发布图层服务\" class=\"headerlink\" title=\"geoserver连接postgis并发布图层服务\"></a>geoserver连接postgis并发布图层服务</h2><p>1、 添加新的数据源，选择PostGIS,输入数据库连接信息；<br>2、 添加图层，设置图层信息发布即可</p>\n<blockquote>\n<p>注:geoserver默认用户名和密码:admin&#x2F;geoserver</p>\n</blockquote>\n<h2 id=\"tomcat控制台中文乱码\"><a href=\"#tomcat控制台中文乱码\" class=\"headerlink\" title=\"tomcat控制台中文乱码\"></a>tomcat控制台中文乱码</h2><p>windows默认编码集GBK,使用startup.bat启动tomcat时，从logging.properties读取到的编码为UTF-8,导致了乱码,将logging.properties中的以下属性调整为GBK即可:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">java.util.logging.ConsoleHandler.encoding &#x3D; GBK<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p><a href=\"https://blog.csdn.net/super712/article/details/89639583\">1、windows下tomcat8控制台出现中文乱码问题</a><br><a href=\"https://www.cnblogs.com/gispathfinder/p/9286642.html\">2、PostGIS安装</a><br><a href=\"https://blog.csdn.net/ljg124034929/article/details/70142420\">3、GeoServer+PostGIS发布图层</a><br><a href=\"https://huadou145.lofter.com/post/205d4db3_1c8bfba2e\">4、封面图源</a></p>\n","more":"<h2 id=\"应用环境\"><a href=\"#应用环境\" class=\"headerlink\" title=\"应用环境\"></a>应用环境</h2><p>OS:win8 x64<br>PostGIS:3.1.4<br>Postgresql:10.18.2<br>Geoserver:2.19.2<br>Tomcat:8.5.71<br>JDK:1.8.131<br>QGIS:3.16.11</p>\n<h2 id=\"Postgresql和Postgis\"><a href=\"#Postgresql和Postgis\" class=\"headerlink\" title=\"Postgresql和Postgis\"></a>Postgresql和Postgis</h2><p>Postgresql为开源的关系型数据库，Postgis为在此基础上开发的支持空间数据存储与计算的扩展工具，为Postgresql提供了空间数据存储与计算的能力。</p>\n<p>postgis对postgresql的版本支持可以参考此处<a href=\"https://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS\">链接</a>,具体如下：<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1968459782.png\" alt=\"postgis支持版本说明\"></p>\n<p>本文使用的是PostGIS版本为3.1.4,Postgresql版本为10.18.2.</p>\n<h3 id=\"Postgresql数据库安装及初始化\"><a href=\"#Postgresql数据库安装及初始化\" class=\"headerlink\" title=\"Postgresql数据库安装及初始化\"></a>Postgresql数据库安装及初始化</h3><p>安装过程根据提示进行即可，安装完成之后，数据库初始化：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">C:\\Program Files\\PostgreSQL\\10\\bin\\initdb.exe -D C:\\pgdata -E UTF8 --locale&#x3D;Chinese<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>数据库启动：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">C:\\Program Files\\PostgreSQL\\10\\bin\\pg_ctl.exe start -w -D C:\\pgdata<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"Postgis安装\"><a href=\"#Postgis安装\" class=\"headerlink\" title=\"Postgis安装\"></a>Postgis安装</h3><p>这里最好下载二进制安装包:postgis-bundle-pg10x64-setup-3.1.4-1.exe,根据提示进行安装就就好了，安装过程中会提示创建一个空间数据库postgis_31_sample。</p>\n<h3 id=\"pgAdmin创建空间数据库\"><a href=\"#pgAdmin创建空间数据库\" class=\"headerlink\" title=\"pgAdmin创建空间数据库\"></a>pgAdmin创建空间数据库</h3><p>创建完数据库添加一个叫postgis的扩展就可以了支持存储空间数据了，如下图:<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/1165327728.png\"></p>\n<h2 id=\"QGIS向postgis中导入矢量数据\"><a href=\"#QGIS向postgis中导入矢量数据\" class=\"headerlink\" title=\"QGIS向postgis中导入矢量数据\"></a>QGIS向postgis中导入矢量数据</h2><p>首先在右侧的Browser创建Postgis的连接：<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/586084083.png\"><br>假定你已经在QGIS中加载了一个shapefile文件。<br>点击QGIS工具条的Database-&gt;Database Manager,打开下图所示界面：<br><img src=\"/2021/10/08/geoserver-postgis-fa-bu-fu-wu/4294453525.png\"><br>找到刚刚创建的postgis数据库连接，并选中数据库，然后点击Import Layer即可，根据提示进行操作。</p>\n<h2 id=\"geoserver连接postgis并发布图层服务\"><a href=\"#geoserver连接postgis并发布图层服务\" class=\"headerlink\" title=\"geoserver连接postgis并发布图层服务\"></a>geoserver连接postgis并发布图层服务</h2><p>1、 添加新的数据源，选择PostGIS,输入数据库连接信息；<br>2、 添加图层，设置图层信息发布即可</p>\n<blockquote>\n<p>注:geoserver默认用户名和密码:admin&#x2F;geoserver</p>\n</blockquote>\n<h2 id=\"tomcat控制台中文乱码\"><a href=\"#tomcat控制台中文乱码\" class=\"headerlink\" title=\"tomcat控制台中文乱码\"></a>tomcat控制台中文乱码</h2><p>windows默认编码集GBK,使用startup.bat启动tomcat时，从logging.properties读取到的编码为UTF-8,导致了乱码,将logging.properties中的以下属性调整为GBK即可:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">java.util.logging.ConsoleHandler.encoding &#x3D; GBK<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p><a href=\"https://blog.csdn.net/super712/article/details/89639583\">1、windows下tomcat8控制台出现中文乱码问题</a><br><a href=\"https://www.cnblogs.com/gispathfinder/p/9286642.html\">2、PostGIS安装</a><br><a href=\"https://blog.csdn.net/ljg124034929/article/details/70142420\">3、GeoServer+PostGIS发布图层</a><br><a href=\"https://huadou145.lofter.com/post/205d4db3_1c8bfba2e\">4、封面图源</a></p>","categories":[{"name":"GIS","path":"api/categories/GIS.json"}],"tags":[{"name":"geoserver","path":"api/tags/geoserver.json"},{"name":"PostgreSQL","path":"api/tags/PostgreSQL.json"},{"name":"PostGIS","path":"api/tags/PostGIS.json"}]}