{"title":"Typecho附件上传失败","slug":"14","date":"2019-11-16T08:43:00.000Z","updated":"2019-11-27T14:15:40.000Z","comments":true,"path":"api/articles/14.json","realPath":null,"excerpt":"本文主要解决typecho附件上传失败的问题","covers":null,"cover":null,"content":"<p>本文主要解决typecho附件上传失败的问题</p>\n<span id=\"more\"></span>\n\n<h2 id=\"取消Typecho对服务器的检验\"><a href=\"#取消Typecho对服务器的检验\" class=\"headerlink\" title=\"取消Typecho对服务器的检验\"></a>取消Typecho对服务器的检验</h2><p>修改var&#x2F;Typecho&#x2F;Common.php</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">public static function isAppEngine()\n&#123;\n   return !empty($_SERVER[&#39;HTTP_APPNAME&#39;])                     &#x2F;&#x2F; SAE\n       || !!getenv(&#39;HTTP_BAE_ENV_APPID&#39;)                       &#x2F;&#x2F; BAE\n       || !!getenv(&#39;SERVER_SOFTWARE&#39;)                          &#x2F;&#x2F; BAE 3.0\n       || (ini_get(&#39;acl.app_id&#39;) &amp;&amp; class_exists(&#39;Alibaba&#39;))   &#x2F;&#x2F; ACE\n       || (isset($_SERVER[&#39;SERVER_SOFTWARE&#39;]) &amp;&amp; strpos($_SERVER[&#39;SERVER_SOFTWARE&#39;],&#39;Google App Engine&#39;) !&#x3D;&#x3D; false) &#x2F;&#x2F; GAE;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>修改为</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">public static function isAppEngine()\n&#123;\n    return false;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"修改上传文件夹的权限\"><a href=\"#修改上传文件夹的权限\" class=\"headerlink\" title=\"修改上传文件夹的权限\"></a>修改上传文件夹的权限</h2><p>默认情况下，文件会上传至 &#x2F;usr&#x2F;uploads目录</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod -R 777 usr&#x2F;uplods<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>此目录为typecho下的目录</strong></p>\n<h2 id=\"Git设置忽略Uploads目录\"><a href=\"#Git设置忽略Uploads目录\" class=\"headerlink\" title=\"Git设置忽略Uploads目录\"></a>Git设置忽略Uploads目录</h2><p>在typecho的根目录添加.gitignore文件，加入：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">usr&#x2F;uploads<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>如果是文件已经被纳入了版本管理，即便.gitignore中已经忽略了该文件，依旧是不起作用的，可删除本地缓存，再push</p>\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.aiuai.cn/aifarm598.html\">1. Typecho - 上传图片失败解决办法并修改图片大小限制</a><br><a href=\"https://www.cnblogs.com/thinkingthigh/p/8007061.html\">2. gitignore不起作用</a><br><a href=\"http://duyangsheng.lofter.com/post/1f344c92_1c70844d8\">3. 封面图来源</a></p>\n","more":"<h2 id=\"取消Typecho对服务器的检验\"><a href=\"#取消Typecho对服务器的检验\" class=\"headerlink\" title=\"取消Typecho对服务器的检验\"></a>取消Typecho对服务器的检验</h2><p>修改var&#x2F;Typecho&#x2F;Common.php</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">public static function isAppEngine()\n&#123;\n   return !empty($_SERVER[&#39;HTTP_APPNAME&#39;])                     &#x2F;&#x2F; SAE\n       || !!getenv(&#39;HTTP_BAE_ENV_APPID&#39;)                       &#x2F;&#x2F; BAE\n       || !!getenv(&#39;SERVER_SOFTWARE&#39;)                          &#x2F;&#x2F; BAE 3.0\n       || (ini_get(&#39;acl.app_id&#39;) &amp;&amp; class_exists(&#39;Alibaba&#39;))   &#x2F;&#x2F; ACE\n       || (isset($_SERVER[&#39;SERVER_SOFTWARE&#39;]) &amp;&amp; strpos($_SERVER[&#39;SERVER_SOFTWARE&#39;],&#39;Google App Engine&#39;) !&#x3D;&#x3D; false) &#x2F;&#x2F; GAE;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>修改为</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">public static function isAppEngine()\n&#123;\n    return false;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"修改上传文件夹的权限\"><a href=\"#修改上传文件夹的权限\" class=\"headerlink\" title=\"修改上传文件夹的权限\"></a>修改上传文件夹的权限</h2><p>默认情况下，文件会上传至 &#x2F;usr&#x2F;uploads目录</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">chmod -R 777 usr&#x2F;uplods<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>此目录为typecho下的目录</strong></p>\n<h2 id=\"Git设置忽略Uploads目录\"><a href=\"#Git设置忽略Uploads目录\" class=\"headerlink\" title=\"Git设置忽略Uploads目录\"></a>Git设置忽略Uploads目录</h2><p>在typecho的根目录添加.gitignore文件，加入：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">usr&#x2F;uploads<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>如果是文件已经被纳入了版本管理，即便.gitignore中已经忽略了该文件，依旧是不起作用的，可删除本地缓存，再push</p>\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.aiuai.cn/aifarm598.html\">1. Typecho - 上传图片失败解决办法并修改图片大小限制</a><br><a href=\"https://www.cnblogs.com/thinkingthigh/p/8007061.html\">2. gitignore不起作用</a><br><a href=\"http://duyangsheng.lofter.com/post/1f344c92_1c70844d8\">3. 封面图来源</a></p>","categories":[],"tags":[{"name":"typecho","path":"api/tags/typecho.json"}]}