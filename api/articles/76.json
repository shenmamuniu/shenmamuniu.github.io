{"title":"Centos8的一些基本配置","slug":"76","date":"2020-11-28T04:50:52.000Z","updated":"2020-11-28T04:50:52.000Z","comments":true,"path":"api/articles/76.json","realPath":null,"excerpt":"最近在搞centos8，把其常用操作及配置做个简单的记录，包括静态ip配置、gui的安装、防火墙配置、vnc配置等。","covers":null,"cover":null,"content":"<p>最近在搞centos8，把其常用操作及配置做个简单的记录，包括静态ip配置、gui的安装、防火墙配置、vnc配置等。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><p>os: centos8.2</p>\n<h2 id=\"配置静态IP\"><a href=\"#配置静态IP\" class=\"headerlink\" title=\"配置静态IP\"></a>配置静态IP</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts\nvi ifcfg-ens160<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>这里en(ethernet)后面可能是其它值，具体如下：</p>\n<blockquote>\n<p>o:主板板载网卡，集成的是设备索引号</p>\n<p>p:独立网卡，PCI网卡</p>\n<p>s:热插拔网卡，usb之类的扩展槽索引号</p>\n<p>后面的数字：MAC地址+主板信息计算得出的唯一序号</p>\n</blockquote>\n<p>修改以下内容：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 设置静态IP\nBOOTPROTO&#x3D;&quot;static&quot;\n# 开机启动\nONBOOT&#x3D;&quot;yes&quot;\n# 设置IP地址\nPREFIX&#x3D;24\nIPADDR&#x3D;192.168.1.80\nGATEWAY&#x3D;192.168.1.1\nNETMASK&#x3D;255.255.255.0\nDNS1&#x3D;192.168.1.1<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>重启网卡</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">nmcli c reload ens160<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"GUI界面安装\"><a href=\"#GUI界面安装\" class=\"headerlink\" title=\"GUI界面安装\"></a>GUI界面安装</h2><p>这里如果使用的centos8.2 dvd版的安装镜像安装时，可以直接选择安装图形界面的，如果没有安装可以执行以下命令配置</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">yum groupinstall &quot;Server with GUI&quot; -y\n\nsystemctl get-default\n\nsystemctl set-default graphical.target\n\nreboot<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h2 id=\"VNC-Server安装及配置\"><a href=\"#VNC-Server安装及配置\" class=\"headerlink\" title=\"VNC Server安装及配置\"></a>VNC Server安装及配置</h2><p>执行以下命令安装</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">yum groupinstall &quot;X Window System&quot;\nyum install gnome-classic-session gnome-terminal nautilus-open-terminal control-center liberation-mono-fonts\nunlink &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;default.target\nln -sf &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;graphical.target &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;default.target\n\nreboot # 重启机器\n\nyum install tigervnc-server -y\n\ncp &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;vncserver@.service &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;vncserver@:1.service\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>修改配置文件,这里以test用户为例：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">vim &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;vncserver@:1.service\n添加User&#x3D;test\n并将里面的&lt;User&gt;替换为test<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>修改完成之后</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">systemctl daemon-reload\n# 设置密码\nvncpasswd<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>启动及重启命令</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">systemctl enable vncserver@:1.service # 设置开机启动\nsystemctl start vncserver@:1.service # 启动vnc会话服务\nsystemctl status vncserver@:1.service # 查看nvc会话服务状态\nsystemctl stop vncserver@:1.service # 关闭nvc会话服务<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>接下来就可以通过vnc viewer远程连接centos8的图形界面了。</p>\n<h2 id=\"防火墙配置\"><a href=\"#防火墙配置\" class=\"headerlink\" title=\"防火墙配置\"></a>防火墙配置</h2><p>centos8安装完成之后，防火墙默认是启动的，可以通过以下命令对防火墙进行控制</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 查看防火墙状态\nsystemctl status firewalld.service\n# 停止\nsystemctl stop firewalld.service\nfirewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanent   # 开放80端口\nfirewall-cmd --zone&#x3D;public --remove-port&#x3D;80&#x2F;tcp --permanent # 删除开放的80端口\nfirewall-cmd --reload   # 配置立即生效\n# 查看已经开放的端口\nfirewall-cmd --zone&#x3D;public --list-ports<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h2 id=\"硬盘扩容\"><a href=\"#硬盘扩容\" class=\"headerlink\" title=\"硬盘扩容\"></a>硬盘扩容</h2><p>首先给硬盘分配空间，然后使用gparted对分区扩容</p>\n<h2 id=\"安装gparted\"><a href=\"#安装gparted\" class=\"headerlink\" title=\"安装gparted\"></a>安装gparted</h2><p>可以使用gparted.iso，也可以在系统内安装gparted应用，系统内安装gparted应用可通过以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo yum install epel-release\nsudo yum install gparted<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>安装完成之后通过gparted修改分区大小，然后扩容逻辑分区大小：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 查看逻辑分区名：\ndf -h\n# 扩容，这里+2G指添加的容量\nlvextend -L +2G &#x2F;dev&#x2F;mapper&#x2F;cl-root\nxfs_growfs &#x2F;dev&#x2F;mapper&#x2F;cl-root\n# 查看各个分区容量\nlsblk<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.jianshu.com/p/5fc492060e70\">1、网卡不叫eth0，而叫ens33、ens160、eno1 or enp0s</a></p>\n<p><a href=\"https://www.cnblogs.com/whereGo/p/13486157.html\">2、CentOS8安装图形界面</a></p>\n<p><a href=\"https://www.cnblogs.com/bumengru/p/10244207.html\">3、Windows远程连接CentOS图形化界面 - 如梦幽香 - 博客园 (cnblogs.com)</a> </p>\n<p><a href=\"https://www.cnblogs.com/DavonC/p/12707728.html\">4、centOS 6.8下使用Gparted进行分区扩容</a></p>\n<p><a href=\"https://alisonmarket.lofter.com/post/2b1789_1c7361bf1#\">5、封面图</a></p>\n","more":"<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><p>os: centos8.2</p>\n<h2 id=\"配置静态IP\"><a href=\"#配置静态IP\" class=\"headerlink\" title=\"配置静态IP\"></a>配置静态IP</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts\nvi ifcfg-ens160<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>这里en(ethernet)后面可能是其它值，具体如下：</p>\n<blockquote>\n<p>o:主板板载网卡，集成的是设备索引号</p>\n<p>p:独立网卡，PCI网卡</p>\n<p>s:热插拔网卡，usb之类的扩展槽索引号</p>\n<p>后面的数字：MAC地址+主板信息计算得出的唯一序号</p>\n</blockquote>\n<p>修改以下内容：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 设置静态IP\nBOOTPROTO&#x3D;&quot;static&quot;\n# 开机启动\nONBOOT&#x3D;&quot;yes&quot;\n# 设置IP地址\nPREFIX&#x3D;24\nIPADDR&#x3D;192.168.1.80\nGATEWAY&#x3D;192.168.1.1\nNETMASK&#x3D;255.255.255.0\nDNS1&#x3D;192.168.1.1<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>重启网卡</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">nmcli c reload ens160<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"GUI界面安装\"><a href=\"#GUI界面安装\" class=\"headerlink\" title=\"GUI界面安装\"></a>GUI界面安装</h2><p>这里如果使用的centos8.2 dvd版的安装镜像安装时，可以直接选择安装图形界面的，如果没有安装可以执行以下命令配置</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">yum groupinstall &quot;Server with GUI&quot; -y\n\nsystemctl get-default\n\nsystemctl set-default graphical.target\n\nreboot<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h2 id=\"VNC-Server安装及配置\"><a href=\"#VNC-Server安装及配置\" class=\"headerlink\" title=\"VNC Server安装及配置\"></a>VNC Server安装及配置</h2><p>执行以下命令安装</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">yum groupinstall &quot;X Window System&quot;\nyum install gnome-classic-session gnome-terminal nautilus-open-terminal control-center liberation-mono-fonts\nunlink &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;default.target\nln -sf &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;graphical.target &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;default.target\n\nreboot # 重启机器\n\nyum install tigervnc-server -y\n\ncp &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;vncserver@.service &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;vncserver@:1.service\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>修改配置文件,这里以test用户为例：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">vim &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;vncserver@:1.service\n添加User&#x3D;test\n并将里面的&lt;User&gt;替换为test<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>修改完成之后</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">systemctl daemon-reload\n# 设置密码\nvncpasswd<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>启动及重启命令</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">systemctl enable vncserver@:1.service # 设置开机启动\nsystemctl start vncserver@:1.service # 启动vnc会话服务\nsystemctl status vncserver@:1.service # 查看nvc会话服务状态\nsystemctl stop vncserver@:1.service # 关闭nvc会话服务<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>接下来就可以通过vnc viewer远程连接centos8的图形界面了。</p>\n<h2 id=\"防火墙配置\"><a href=\"#防火墙配置\" class=\"headerlink\" title=\"防火墙配置\"></a>防火墙配置</h2><p>centos8安装完成之后，防火墙默认是启动的，可以通过以下命令对防火墙进行控制</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 查看防火墙状态\nsystemctl status firewalld.service\n# 停止\nsystemctl stop firewalld.service\nfirewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanent   # 开放80端口\nfirewall-cmd --zone&#x3D;public --remove-port&#x3D;80&#x2F;tcp --permanent # 删除开放的80端口\nfirewall-cmd --reload   # 配置立即生效\n# 查看已经开放的端口\nfirewall-cmd --zone&#x3D;public --list-ports<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h2 id=\"硬盘扩容\"><a href=\"#硬盘扩容\" class=\"headerlink\" title=\"硬盘扩容\"></a>硬盘扩容</h2><p>首先给硬盘分配空间，然后使用gparted对分区扩容</p>\n<h2 id=\"安装gparted\"><a href=\"#安装gparted\" class=\"headerlink\" title=\"安装gparted\"></a>安装gparted</h2><p>可以使用gparted.iso，也可以在系统内安装gparted应用，系统内安装gparted应用可通过以下命令：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo yum install epel-release\nsudo yum install gparted<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>安装完成之后通过gparted修改分区大小，然后扩容逻辑分区大小：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 查看逻辑分区名：\ndf -h\n# 扩容，这里+2G指添加的容量\nlvextend -L +2G &#x2F;dev&#x2F;mapper&#x2F;cl-root\nxfs_growfs &#x2F;dev&#x2F;mapper&#x2F;cl-root\n# 查看各个分区容量\nlsblk<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://www.jianshu.com/p/5fc492060e70\">1、网卡不叫eth0，而叫ens33、ens160、eno1 or enp0s</a></p>\n<p><a href=\"https://www.cnblogs.com/whereGo/p/13486157.html\">2、CentOS8安装图形界面</a></p>\n<p><a href=\"https://www.cnblogs.com/bumengru/p/10244207.html\">3、Windows远程连接CentOS图形化界面 - 如梦幽香 - 博客园 (cnblogs.com)</a> </p>\n<p><a href=\"https://www.cnblogs.com/DavonC/p/12707728.html\">4、centOS 6.8下使用Gparted进行分区扩容</a></p>\n<p><a href=\"https://alisonmarket.lofter.com/post/2b1789_1c7361bf1#\">5、封面图</a></p>","categories":[{"name":"Linux","path":"api/categories/Linux.json"}],"tags":[{"name":"centos","path":"api/tags/centos.json"}]}