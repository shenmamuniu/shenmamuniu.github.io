{"title":"使用vite在vue中快速搭建cesium 3D地图项目","slug":"使用vite在vue中快速搭建cesium-3D地图项目","date":"2024-03-02T12:45:46.000Z","updated":"2024-03-02T12:52:18.655Z","comments":true,"path":"api/articles/使用vite在vue中快速搭建cesium-3D地图项目.json","realPath":null,"excerpt":null,"covers":null,"cover":null,"content":"<span id=\"more\"></span>\n\n<h2 id=\"创建vue应用\"><a href=\"#创建vue应用\" class=\"headerlink\" title=\"创建vue应用\"></a>创建vue应用</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm create vue@latest\nnpm install\nnpm run dev<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"安装及配置vite-plugin-cesium-build插件\"><a href=\"#安装及配置vite-plugin-cesium-build插件\" class=\"headerlink\" title=\"安装及配置vite-plugin-cesium-build插件\"></a>安装及配置vite-plugin-cesium-build插件</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">npm i vite-plugin-cesium-build<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>在<code>vite.config.js</code>中引入</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineConfig <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span>\n<span class=\"token keyword\">import</span> cesium <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-plugin-cesium-build'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">//...</span>\n    <span class=\"token function\">cesium</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>除此以外，插件提供了一些配置项：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">cesium</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">/**\n       * 这指示了Cesium包文件夹的位置。\n       * 这意味着将会从这个文件夹中获取CesiumJS的相关资源。\n       */</span>\n      <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token string\">'node_modules/cesium/Build/Cesium'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">/**\n       * 这指示了构建后资源位置。\n       * 这意味着构建后资源会被放在/dist/cesium-package/下\n       */</span>\n      <span class=\"token literal-property property\">to</span><span class=\"token operator\">:</span> <span class=\"token string\">'cesium-package'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">/**\n       * 设置为true时，你需要自行设置CESIUM_BASE_URL\n       */</span>\n      <span class=\"token literal-property property\">customCesiumBaseUrl</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>cesium就配置完成了，可以在vue页面中使用了。</p>\n<h2 id=\"在vue页面中引入cesium\"><a href=\"#在vue页面中引入cesium\" class=\"headerlink\" title=\"在vue页面中引入cesium\"></a>在vue页面中引入cesium</h2><p>vue提供2中API风格，选项式 API 和组合式 API,这里以选项式 API 为例：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"about\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"map\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Cesium <span class=\"token keyword\">from</span> <span class=\"token string\">'cesium'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"cesium/Build/Cesium/Widgets/widgets.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">viewer</span><span class=\"token operator\">:</span><span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">getCurrentLoc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">let</span> t<span class=\"token operator\">=</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>viewer<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    Cesium<span class=\"token punctuation\">.</span>Ion<span class=\"token punctuation\">.</span>defaultAccessToken <span class=\"token operator\">=</span><span class=\"token string\">\"your token\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>viewer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cesium<span class=\"token punctuation\">.</span>Viewer</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"map\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">baseLayer</span><span class=\"token operator\">:</span> Cesium<span class=\"token punctuation\">.</span>ImageryLayer<span class=\"token punctuation\">.</span><span class=\"token function\">fromWorldImagery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> Cesium<span class=\"token punctuation\">.</span>IonWorldImageryStyle<span class=\"token punctuation\">.</span><span class=\"token constant\">AERIAL_WITH_LABELS</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">baseLayerPicker</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentLoc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  \n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","more":"<h2 id=\"创建vue应用\"><a href=\"#创建vue应用\" class=\"headerlink\" title=\"创建vue应用\"></a>创建vue应用</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm create vue@latest\nnpm install\nnpm run dev<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"安装及配置vite-plugin-cesium-build插件\"><a href=\"#安装及配置vite-plugin-cesium-build插件\" class=\"headerlink\" title=\"安装及配置vite-plugin-cesium-build插件\"></a>安装及配置vite-plugin-cesium-build插件</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">npm i vite-plugin-cesium-build<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>在<code>vite.config.js</code>中引入</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineConfig <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span>\n<span class=\"token keyword\">import</span> cesium <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-plugin-cesium-build'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">//...</span>\n    <span class=\"token function\">cesium</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>除此以外，插件提供了一些配置项：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">cesium</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">/**\n       * 这指示了Cesium包文件夹的位置。\n       * 这意味着将会从这个文件夹中获取CesiumJS的相关资源。\n       */</span>\n      <span class=\"token literal-property property\">from</span><span class=\"token operator\">:</span> <span class=\"token string\">'node_modules/cesium/Build/Cesium'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">/**\n       * 这指示了构建后资源位置。\n       * 这意味着构建后资源会被放在/dist/cesium-package/下\n       */</span>\n      <span class=\"token literal-property property\">to</span><span class=\"token operator\">:</span> <span class=\"token string\">'cesium-package'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">/**\n       * 设置为true时，你需要自行设置CESIUM_BASE_URL\n       */</span>\n      <span class=\"token literal-property property\">customCesiumBaseUrl</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>cesium就配置完成了，可以在vue页面中使用了。</p>\n<h2 id=\"在vue页面中引入cesium\"><a href=\"#在vue页面中引入cesium\" class=\"headerlink\" title=\"在vue页面中引入cesium\"></a>在vue页面中引入cesium</h2><p>vue提供2中API风格，选项式 API 和组合式 API,这里以选项式 API 为例：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"about\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"map\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Cesium <span class=\"token keyword\">from</span> <span class=\"token string\">'cesium'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"cesium/Build/Cesium/Widgets/widgets.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">viewer</span><span class=\"token operator\">:</span><span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">getCurrentLoc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">let</span> t<span class=\"token operator\">=</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>viewer<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    Cesium<span class=\"token punctuation\">.</span>Ion<span class=\"token punctuation\">.</span>defaultAccessToken <span class=\"token operator\">=</span><span class=\"token string\">\"your token\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>viewer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cesium<span class=\"token punctuation\">.</span>Viewer</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"map\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">baseLayer</span><span class=\"token operator\">:</span> Cesium<span class=\"token punctuation\">.</span>ImageryLayer<span class=\"token punctuation\">.</span><span class=\"token function\">fromWorldImagery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> Cesium<span class=\"token punctuation\">.</span>IonWorldImageryStyle<span class=\"token punctuation\">.</span><span class=\"token constant\">AERIAL_WITH_LABELS</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">baseLayerPicker</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentLoc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  \n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":[{"name":"GIS","path":"api/categories/GIS.json"},{"name":"Vue","path":"api/categories/Vue.json"},{"name":"Vite","path":"api/categories/Vite.json"}],"tags":[{"name":"GIS","path":"api/tags/GIS.json"},{"name":"Vue","path":"api/tags/Vue.json"},{"name":"Vite","path":"api/tags/Vite.json"}]}