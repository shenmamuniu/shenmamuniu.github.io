{"title":"Jenkins集成SonarQube对代码进行质量检测","slug":"4","date":"2019-11-13T15:24:00.000Z","updated":"2020-04-30T03:35:45.000Z","comments":true,"path":"api/articles/4.json","realPath":null,"excerpt":"本文主要记录jenkins集成sonarqube，以进行代码审查。","covers":["http://193.112.158.158:8081/post/20181206/2018-12-06_204045.jpg","http://193.112.158.158:8081/post/20181206/2018-12-06_204827.jpg","http://193.112.158.158:8081/post/20181206/2018-12-06_205642.jpg"],"cover":"http://193.112.158.158:8081/post/20181206/2018-12-06_204045.jpg","content":"<p>本文主要记录jenkins集成sonarqube，以进行代码审查。</p>\n<span id=\"more\"></span>\n<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><ol>\n<li>SonarQube: V5.6.7</li>\n<li>Jenkins: 2.138.2</li>\n<li>Mysql: 5.7</li>\n</ol>\n<h2 id=\"SonarQube在windows下的安装及配置\"><a href=\"#SonarQube在windows下的安装及配置\" class=\"headerlink\" title=\"SonarQube在windows下的安装及配置\"></a>SonarQube在windows下的安装及配置</h2><h3 id=\"配置数据库\"><a href=\"#配置数据库\" class=\"headerlink\" title=\"配置数据库\"></a>配置数据库</h3><p>在conf&#x2F;sonar.properties文件中，修改以下内容即可：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sonar.jdbc.url\nsonar.jdbc.password\nsonar.jdbc.username<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><strong>注意：</strong>MariaDB貌似是不支持的，这里数据库版本使用的是Mysql5.7</p>\n<h3 id=\"汉化插件下载及安装\"><a href=\"#汉化插件下载及安装\" class=\"headerlink\" title=\"汉化插件下载及安装\"></a>汉化插件下载及安装</h3><p>下载地址：<br><a href=\"https://github.com/SonarQubeCommunity/sonar-l10n-zh/releases\">https://github.com/SonarQubeCommunity/sonar-l10n-zh/releases</a><br>将jar放在&#x2F;extensions&#x2F;plugins&#x2F; 重启SonarQube即可</p>\n<h3 id=\"配置邮件通知\"><a href=\"#配置邮件通知\" class=\"headerlink\" title=\"配置邮件通知\"></a>配置邮件通知</h3><p>启动成功之后打开<a href=\"http://ip:9000/\">http://ip:9000</a>, 默认是这个ip地址，这里配置的qq邮箱<br><img src=\"http://193.112.158.158:8081/post/20181206/2018-12-06_204045.jpg\"><br>除此之外，还需要在通用-&gt;Server base URL，配置一下服务器的地址，否则发送的邮件中涉及到SonarQube的地址是Localhost。</p>\n<h2 id=\"Jenkins集成SonarQube\"><a href=\"#Jenkins集成SonarQube\" class=\"headerlink\" title=\"Jenkins集成SonarQube\"></a>Jenkins集成SonarQube</h2><h3 id=\"插件安装及配置\"><a href=\"#插件安装及配置\" class=\"headerlink\" title=\"插件安装及配置\"></a>插件安装及配置</h3><p>安装插件： SonarQube Scanner for Jenkins</p>\n<p>然后在Jenkins的系统管理-&gt;系统设置进行参数配置,界面如图：<br><img src=\"http://193.112.158.158:8081/post/20181206/2018-12-06_204827.jpg\"></p>\n<p>其中\tServer authentication token在SonarQube：我的账户-&gt;安全-&gt;Tokens处生成</p>\n<h2 id=\"在具体的job中配置SonarQube\"><a href=\"#在具体的job中配置SonarQube\" class=\"headerlink\" title=\"在具体的job中配置SonarQube\"></a>在具体的job中配置SonarQube</h2><p><img src=\"http://193.112.158.158:8081/post/20181206/2018-12-06_205642.jpg\"></p>\n<p>Analysis properties:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># key和name保持一致且在sonar下唯一\nsonar.projectKey&#x3D;\nsonar.projectName&#x3D;\n# 工程版本\nsonar.projectVersion&#x3D;1.0  \n# 源代码目录\nsonar.sources&#x3D;\n# 分析的语言 \nsonar.language&#x3D;java\n# 编码\nsonar.sourceEncoding&#x3D;UTF-8\n# sonar.java.binaries&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","more":"<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><ol>\n<li>SonarQube: V5.6.7</li>\n<li>Jenkins: 2.138.2</li>\n<li>Mysql: 5.7</li>\n</ol>\n<h2 id=\"SonarQube在windows下的安装及配置\"><a href=\"#SonarQube在windows下的安装及配置\" class=\"headerlink\" title=\"SonarQube在windows下的安装及配置\"></a>SonarQube在windows下的安装及配置</h2><h3 id=\"配置数据库\"><a href=\"#配置数据库\" class=\"headerlink\" title=\"配置数据库\"></a>配置数据库</h3><p>在conf&#x2F;sonar.properties文件中，修改以下内容即可：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sonar.jdbc.url\nsonar.jdbc.password\nsonar.jdbc.username<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><strong>注意：</strong>MariaDB貌似是不支持的，这里数据库版本使用的是Mysql5.7</p>\n<h3 id=\"汉化插件下载及安装\"><a href=\"#汉化插件下载及安装\" class=\"headerlink\" title=\"汉化插件下载及安装\"></a>汉化插件下载及安装</h3><p>下载地址：<br><a href=\"https://github.com/SonarQubeCommunity/sonar-l10n-zh/releases\">https://github.com/SonarQubeCommunity/sonar-l10n-zh/releases</a><br>将jar放在&#x2F;extensions&#x2F;plugins&#x2F; 重启SonarQube即可</p>\n<h3 id=\"配置邮件通知\"><a href=\"#配置邮件通知\" class=\"headerlink\" title=\"配置邮件通知\"></a>配置邮件通知</h3><p>启动成功之后打开<a href=\"http://ip:9000/\">http://ip:9000</a>, 默认是这个ip地址，这里配置的qq邮箱<br><img src=\"http://193.112.158.158:8081/post/20181206/2018-12-06_204045.jpg\"><br>除此之外，还需要在通用-&gt;Server base URL，配置一下服务器的地址，否则发送的邮件中涉及到SonarQube的地址是Localhost。</p>\n<h2 id=\"Jenkins集成SonarQube\"><a href=\"#Jenkins集成SonarQube\" class=\"headerlink\" title=\"Jenkins集成SonarQube\"></a>Jenkins集成SonarQube</h2><h3 id=\"插件安装及配置\"><a href=\"#插件安装及配置\" class=\"headerlink\" title=\"插件安装及配置\"></a>插件安装及配置</h3><p>安装插件： SonarQube Scanner for Jenkins</p>\n<p>然后在Jenkins的系统管理-&gt;系统设置进行参数配置,界面如图：<br><img src=\"http://193.112.158.158:8081/post/20181206/2018-12-06_204827.jpg\"></p>\n<p>其中\tServer authentication token在SonarQube：我的账户-&gt;安全-&gt;Tokens处生成</p>\n<h2 id=\"在具体的job中配置SonarQube\"><a href=\"#在具体的job中配置SonarQube\" class=\"headerlink\" title=\"在具体的job中配置SonarQube\"></a>在具体的job中配置SonarQube</h2><p><img src=\"http://193.112.158.158:8081/post/20181206/2018-12-06_205642.jpg\"></p>\n<p>Analysis properties:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># key和name保持一致且在sonar下唯一\nsonar.projectKey&#x3D;\nsonar.projectName&#x3D;\n# 工程版本\nsonar.projectVersion&#x3D;1.0  \n# 源代码目录\nsonar.sources&#x3D;\n# 分析的语言 \nsonar.language&#x3D;java\n# 编码\nsonar.sourceEncoding&#x3D;UTF-8\n# sonar.java.binaries&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":[],"tags":[{"name":"Jenkins","path":"api/tags/Jenkins.json"}]}