{"title":"Manjaro启用交换空间","slug":"41","date":"2020-02-15T13:41:00.000Z","updated":"2020-02-20T13:48:53.000Z","comments":true,"path":"api/articles/41.json","realPath":null,"excerpt":"目前我在用的小米笔记本的内存只有4G，系统经常出现卡死的情况，交换空间是未启用的状态，看如果启用了交换空间会不会好一点。","covers":null,"cover":null,"content":"<p>目前我在用的小米笔记本的内存只有4G，系统经常出现卡死的情况，交换空间是未启用的状态，看如果启用了交换空间会不会好一点。</p>\n<span id=\"more\"></span>\n<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><p>OS: manjaro-xfce 18.1.5<br>内存：4G，小米笔记本</p>\n<h2 id=\"交换空间-Swap-space\"><a href=\"#交换空间-Swap-space\" class=\"headerlink\" title=\"交换空间(Swap space)\"></a>交换空间(Swap space)</h2><p>交换空间是磁盘上的一块区域，可以是一个分区，也可以是一个文件，或者他们的组成，当系统物理内存不足时，Linux会把内存中的不常用的数据保存到交换空间中，这样系统就有更多的物理内存为各个进程服务，而当系统需要访问swap上存储的内容时，再将swap上的数据加载到内存中，这就是我们常说的swap out和swap in。</p>\n<h2 id=\"交换空间的启用\"><a href=\"#交换空间的启用\" class=\"headerlink\" title=\"交换空间的启用\"></a>交换空间的启用</h2><h3 id=\"交换空间大小的选择\"><a href=\"#交换空间大小的选择\" class=\"headerlink\" title=\"交换空间大小的选择\"></a>交换空间大小的选择</h3><p>一般当前内存+2即可，最大不超过当前内存×2。</p>\n<h3 id=\"创建分区\"><a href=\"#创建分区\" class=\"headerlink\" title=\"创建分区\"></a>创建分区</h3><p>我这里是manjaro已经安装完成了，且只有一个分区，直接通过gpated是无法成功创建分区的。通过系统启动盘中的gaprted工具创建一个新的分区。</p>\n<h3 id=\"创建及启用交换空间\"><a href=\"#创建及启用交换空间\" class=\"headerlink\" title=\"创建及启用交换空间\"></a>创建及启用交换空间</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\"># 找到创建的新分区\nsudo fdisk -l\n# 创建swap分区,这里的sda2为新创建的分区的名称\nsudo mkswap &#x2F;dev&#x2F;sda2\n# 查看正在使用的分区,应该是没有的\nswapon -s\n# 激活交换空间\nsudo swapon &#x2F;dev&#x2F;sda2\n此时再执行swapon -s就会有了\n# 将交换空间信息写入到&#x2F;etc&#x2F;fstab文件中以便重启时仍能自动加载交换空间分区\nsudo sh -c &#39;echo &quot;&#x2F;dev&#x2F;sdb1 none  swap    sw   0    0&quot; &gt;&gt; &#x2F;etc&#x2F;fstab&#39;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://segmentfault.com/a/1190000008125116\">1、Linux交换空间（swap space）</a><br><a href=\"https://blog.csdn.net/youmatterhsp/article/details/83933158\">2、&#x2F;etc&#x2F;fstab文件的详解</a><br><a href=\"https://www.runoob.com/linux/linux-comm-swapon.html\">3、Linux swapon命令</a><br><a href=\"https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb\">4、封面图</a></p>\n","more":"<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h2><p>OS: manjaro-xfce 18.1.5<br>内存：4G，小米笔记本</p>\n<h2 id=\"交换空间-Swap-space\"><a href=\"#交换空间-Swap-space\" class=\"headerlink\" title=\"交换空间(Swap space)\"></a>交换空间(Swap space)</h2><p>交换空间是磁盘上的一块区域，可以是一个分区，也可以是一个文件，或者他们的组成，当系统物理内存不足时，Linux会把内存中的不常用的数据保存到交换空间中，这样系统就有更多的物理内存为各个进程服务，而当系统需要访问swap上存储的内容时，再将swap上的数据加载到内存中，这就是我们常说的swap out和swap in。</p>\n<h2 id=\"交换空间的启用\"><a href=\"#交换空间的启用\" class=\"headerlink\" title=\"交换空间的启用\"></a>交换空间的启用</h2><h3 id=\"交换空间大小的选择\"><a href=\"#交换空间大小的选择\" class=\"headerlink\" title=\"交换空间大小的选择\"></a>交换空间大小的选择</h3><p>一般当前内存+2即可，最大不超过当前内存×2。</p>\n<h3 id=\"创建分区\"><a href=\"#创建分区\" class=\"headerlink\" title=\"创建分区\"></a>创建分区</h3><p>我这里是manjaro已经安装完成了，且只有一个分区，直接通过gpated是无法成功创建分区的。通过系统启动盘中的gaprted工具创建一个新的分区。</p>\n<h3 id=\"创建及启用交换空间\"><a href=\"#创建及启用交换空间\" class=\"headerlink\" title=\"创建及启用交换空间\"></a>创建及启用交换空间</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\"># 找到创建的新分区\nsudo fdisk -l\n# 创建swap分区,这里的sda2为新创建的分区的名称\nsudo mkswap &#x2F;dev&#x2F;sda2\n# 查看正在使用的分区,应该是没有的\nswapon -s\n# 激活交换空间\nsudo swapon &#x2F;dev&#x2F;sda2\n此时再执行swapon -s就会有了\n# 将交换空间信息写入到&#x2F;etc&#x2F;fstab文件中以便重启时仍能自动加载交换空间分区\nsudo sh -c &#39;echo &quot;&#x2F;dev&#x2F;sdb1 none  swap    sw   0    0&quot; &gt;&gt; &#x2F;etc&#x2F;fstab&#39;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<h2 id=\"Referenced\"><a href=\"#Referenced\" class=\"headerlink\" title=\"Referenced\"></a>Referenced</h2><p><a href=\"https://segmentfault.com/a/1190000008125116\">1、Linux交换空间（swap space）</a><br><a href=\"https://blog.csdn.net/youmatterhsp/article/details/83933158\">2、&#x2F;etc&#x2F;fstab文件的详解</a><br><a href=\"https://www.runoob.com/linux/linux-comm-swapon.html\">3、Linux swapon命令</a><br><a href=\"https://tiezhuzhuzhu923.lofter.com/post/310ff6d7_1c804cbfb\">4、封面图</a></p>","categories":[{"name":"Linux","path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"交换空间","path":"api/tags/交换空间.json"}]}